import{t as h,r as m,i as r,j as e,D as _,ap as k,c as l,o as N,p as y,q as v,I as x,C as L,d as $,e as F,F as z,k as T,m as G}from"./index-DOc7Nwb7.js";import{A as H,a as V,b as q,c as B,d as J,e as W,f as Q,g as K}from"./alert-dialog-V7xGXdVc.js";import{R as E}from"./RichTextEditor-NQxhVz6n.js";import{P as X}from"./PageGuide-CPKKXXS6.js";import{P as Y}from"./plus-BaQ35Jcx.js";import{S as Z}from"./sparkles-CoQ80pK2.js";import{E as ee}from"./external-link-C3PXjBR9.js";import{S as se}from"./square-pen-ClRv15cM.js";import{T as te}from"./trash-2-CFEfisbM.js";import"./scroll-area-DPaNxEJD.js";import"./separator-BWuYil37.js";import"./book-open-BffBrdze.js";import"./link-FmUqdGRG.js";import"./info-By5wLOUH.js";const b=i=>i?i.trim().startsWith("<")?i:i.replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*?)\*/gim,"<em>$1</em>").replace(/\n/gim,"<br />"):"";function fe(){const{data:i,refetch:p}=h.dpaTemplates.list.useQuery(),[A,C]=m.useState(!1),[a,d]=m.useState({name:"",content:"",jurisdiction:"General"}),[t,c]=m.useState(null),[u,g]=m.useState(null),[n,w]=m.useState(null),f=h.dpaTemplates.create.useMutation({onSuccess:()=>{r.success("Template created"),C(!1),d({name:"",content:"",jurisdiction:"General"}),p()},onError:s=>r.error("Failed to create template: "+s.message)}),j=h.dpaTemplates.update.useMutation({onSuccess:()=>{r.success("Template updated"),c(null),p()},onError:s=>r.error("Failed to update template: "+s.message)}),D=h.dpaTemplates.delete.useMutation({onSuccess:()=>{r.success("Template deleted"),g(null),p()},onError:s=>r.error("Failed to delete template: "+s.message)}),S=()=>{if(!a.name||!a.content)return r.error("Name and Content are required");f.mutate(a)},P=()=>{if(!(t!=null&&t.name)||!(t!=null&&t.content))return r.error("Name and Content are required");j.mutate({id:t.id,name:t.name,content:t.content,jurisdiction:t.jurisdiction})},I=()=>{u&&D.mutate({id:u})},R=async s=>s?new Promise(o=>{setTimeout(()=>{const U=s.toLowerCase().includes("nda")?"MUTUAL NON-DISCLOSURE AGREEMENT":s.toLowerCase().includes("msa")?"MASTER SERVICES AGREEMENT":"AGREEMENT";o(`
<div style="font-family: 'Times New Roman', serif; color: #000;">
    <h1 style="text-align: center; text-transform: uppercase; font-size: 24px; margin-bottom: 40px;">${U}</h1>
    
    <p><strong>THIS AGREEMENT</strong> is made on ${new Date().toLocaleDateString()}</p>
    
    <p><strong>BETWEEN:</strong></p>
    <ol>
        <li><strong>[Company Name]</strong>, a company organized and existing under the laws of [State/Country], with its head office located at [Address] (the "Disclosing Party"); and</li>
        <li><strong>[Counterparty Name]</strong>, a company organized and existing under the laws of [State/Country], with its head office located at [Address] (the "Receiving Party").</li>
    </ol>
    
    <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ccc;">

    <h3>1. PURPOSE</h3>
    <p>The parties wish to explore a business opportunity of mutual interest and in connection with this opportunity, the Disclosing Party may disclose to the Receiving Party certain confidential technical and business information that the Disclosing Party desires the Receiving Party to treat as confidential.</p>

    <h3>2. CONFIDENTIAL INFORMATION</h3>
    <p>"Confidential Information" means any information disclosed by the Disclosing Party to the Receiving Party, either directly or indirectly, in writing, orally or by inspection of tangible objects (including without limitation documents, prototypes, samples, plant and equipment), which is designated as "Confidential," "Proprietary" or some similar designation.</p>

    <h3>3. NON-USE AND NON-DISCLOSURE</h3>
    <p>The Receiving Party agrees not to use any Confidential Information for any purpose except to evaluate and engage in discussions concerning a potential business relationship between the parties. The Receiving Party agrees not to disclose any Confidential Information to third parties or to such of its employees and consultants who do not have a need to know.</p>

    <h3>4. TERM AND TERMINATION</h3>
    <p>This Agreement shall remain in effect for a period of [Number] years from the Effective Date. The obligations of confidentiality shall survive the termination of this Agreement for a period of [Number] years.</p>

    <div style="margin-top: 60px; display: flex; justify-content: space-between;">
        <div style="width: 45%;">
            <p><strong>Signed for and on behalf of<br>The Disclosing Party:</strong></p>
            <br><br>
            <div style="border-top: 1px solid #000; padding-top: 10px;">
                <p>Name: ______________________</p>
                <p>Title: _______________________</p>
            </div>
        </div>
        <div style="width: 45%;">
            <p><strong>Signed for and on behalf of<br>The Receiving Party:</strong></p>
            <br><br>
            <div style="border-top: 1px solid #000; padding-top: 10px;">
                <p>Name: ______________________</p>
                <p>Title: _______________________</p>
            </div>
        </div>
    </div>
</div>
`)},1500)}):r.error("Enter a name first for context"),M=s=>{const o=b(s.content);c({...s,content:o})},O=s=>{const o=b(s.content);w({...s,content:o})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(X,{title:"Vendor Contract Templates",description:"Manage standard agreements (NDAs, MSAs, DPAs) for your vendor onboarding.",rationale:"Ensure consistent legal terms across your vendor supply chain.",howToUse:[{step:"Create",description:"Draft new contract templates."},{step:"AI Draft",description:"Use AI to generate standard legal clauses."},{step:"Manage",description:"Update, version, and delete templates."}]}),e.jsxs(_,{open:A,onOpenChange:C,children:[e.jsx(k,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," New Template"]})}),e.jsxs(N,{className:"max-w-5xl h-[90vh] flex flex-col p-0 overflow-hidden",children:[e.jsx(y,{className:"px-6 py-4 border-b",children:e.jsx(v,{children:"Create New Contract Template"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Template Name"}),e.jsx(x,{value:a.name,onChange:s=>d({...a,name:s.target.value}),placeholder:"e.g. Standard Mutual NDA"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category / Jurisdiction"}),e.jsx(x,{value:a.jurisdiction,onChange:s=>d({...a,jurisdiction:s.target.value}),placeholder:"e.g. Legal, NDA, US-Only"})]})]}),e.jsxs("div",{className:"space-y-2 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Document Content"}),e.jsxs(l,{variant:"outline",size:"sm",className:"h-7 text-xs text-purple-600 border-purple-200 hover:bg-purple-50",onClick:()=>{r.promise(R(a.name),{loading:"Drafting legal document...",success:s=>(d(o=>({...o,content:s})),"Draft generated!"),error:"Failed to generate"})},children:[e.jsx(Z,{className:"h-3 w-3 mr-1"})," Auto-Draft with AI"]})]}),e.jsx("div",{className:"flex-1",children:e.jsx(E,{className:"h-full",value:a.content,onChange:s=>d({...a,content:s})})})]})]}),e.jsx("div",{className:"p-4 border-t bg-slate-50 flex justify-end",children:e.jsx(l,{onClick:S,disabled:f.isPending,className:"w-full sm:w-auto",children:f.isPending?"Creating...":"Save Template"})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i==null?void 0:i.map(s=>e.jsxs(L,{className:"hover:shadow-md transition-shadow group flex flex-col",children:[e.jsxs($,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[e.jsxs(F,{className:"text-lg font-bold flex items-center truncate pr-2",children:[e.jsx(z,{className:"mr-2 h-5 w-5 text-indigo-500 shrink-0"}),e.jsx("span",{className:"truncate",title:s.name,children:s.name})]}),e.jsx(T,{variant:"secondary",className:"shrink-0",children:s.jurisdiction})]}),e.jsxs(G,{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-sm text-slate-500 mb-4 font-sans bg-slate-50 p-3 rounded border h-32 overflow-hidden relative",children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:b(s.content)}}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-slate-50 to-transparent"})]}),e.jsxs("div",{className:"mt-auto flex justify-between items-center text-xs text-muted-foreground pt-2 border-t",children:[e.jsxs("span",{children:["v",s.version]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(l,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>O(s),children:[e.jsx(ee,{className:"h-3 w-3 mr-1"})," View"]}),e.jsxs(l,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>M(s),children:[e.jsx(se,{className:"h-3 w-3 mr-1"})," Edit"]}),e.jsx(l,{variant:"ghost",size:"sm",className:"h-7 px-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>g(s.id),children:e.jsx(te,{className:"h-3 w-3"})})]})]})]})]},s.id))}),e.jsx(_,{open:!!n,onOpenChange:s=>!s&&w(null),children:e.jsxs(N,{className:"max-w-5xl h-[90vh] overflow-y-auto",children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center justify-between",children:[e.jsx("span",{children:n==null?void 0:n.name}),e.jsx(T,{variant:"outline",children:n==null?void 0:n.jurisdiction})]})}),e.jsx("div",{className:"max-w-4xl mx-auto w-full py-8",children:e.jsx("div",{className:"bg-white p-12 rounded shadow-sm border min-h-[800px] print:shadow-none print:border-none",dangerouslySetInnerHTML:{__html:(n==null?void 0:n.content)||""}})})]})}),e.jsx(_,{open:!!t,onOpenChange:s=>!s&&c(null),children:e.jsxs(N,{className:"max-w-5xl h-[90vh] flex flex-col p-0 overflow-hidden",children:[e.jsx(y,{className:"px-6 py-4 border-b",children:e.jsx(v,{children:"Edit Template"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Template Name"}),e.jsx(x,{value:(t==null?void 0:t.name)||"",onChange:s=>c({...t,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category / Jurisdiction"}),e.jsx(x,{value:(t==null?void 0:t.jurisdiction)||"",onChange:s=>c({...t,jurisdiction:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2 flex-1 flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"text-sm font-medium",children:"Document Content"})}),e.jsx("div",{className:"flex-1",children:e.jsx(E,{value:(t==null?void 0:t.content)||"",onChange:s=>c({...t,content:s})})})]})]}),e.jsx("div",{className:"p-4 border-t bg-slate-50 flex justify-end",children:e.jsx(l,{onClick:P,disabled:j.isPending,className:"w-full sm:w-auto",children:j.isPending?"Updating...":"Update Template"})})]})}),e.jsx(H,{open:!!u,onOpenChange:s=>!s&&g(null),children:e.jsxs(V,{children:[e.jsxs(q,{children:[e.jsx(B,{children:"Are you sure?"}),e.jsx(J,{children:"This will permanently delete this template."})]}),e.jsxs(W,{children:[e.jsx(Q,{children:"Cancel"}),e.jsx(K,{onClick:I,className:"bg-red-600 hover:bg-red-700",children:D.isPending?"Deleting...":"Delete"})]})]})})]})}export{fe as default};
