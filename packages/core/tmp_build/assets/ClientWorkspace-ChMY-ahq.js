import{t as p,i as L,j as e,C as u,d as v,e as y,m as j,x as G,f as D,c as g,k as P,U as W,F as V,aq as h,n as re,ab as ae,r as w,A as B,S as A}from"./index-DOc7Nwb7.js";import{D as ie}from"./DashboardLayout-aHnUqq57.js";import{T as R}from"./trending-up-eUiO956o.js";import{R as le}from"./refresh-cw-Cjym1DSW.js";import{T as q}from"./target-cfAj3L6j.js";import{T as ne}from"./trending-down-qhVy-7Im.js";import{C as H}from"./calendar-BlLJlGbj.js";import{C as oe}from"./ChecklistProgressWidget-BEJu_NKS.js";import{P as Y}from"./progress-B-1k4ZZX.js";import{S as ce}from"./sparkles-CoQ80pK2.js";import{A as S}from"./arrow-right-M96iV-v9.js";import{M as de}from"./message-square-5hBo7zY3.js";import{T as me}from"./trophy-BQCkJfBy.js";import{L as xe}from"./layout-grid-CGqkIAJU.js";import{S as Z}from"./settings-CIu9FFiX.js";import{S as I}from"./shield-check-ETs8j4-d.js";import{C as U}from"./circle-check-C5kiwRoG.js";import{c as M}from"./utils-BC5CVi_C.js";import{R as he}from"./rocket-C2MuHhsn.js";import{Z as pe}from"./zap-B01fFOkT.js";import{D as ge}from"./DemoImportDialog-CCqxm96L.js";import{D as ue}from"./database-Bjtecw5f.js";import{P as je}from"./plus-BaQ35Jcx.js";import{S as Q}from"./square-check-big-BUI41YoI.js";import{B as fe}from"./book-open-BffBrdze.js";import{P as be}from"./pie-chart-74fe97t2.js";import{C as Ne}from"./clock-osbacZli.js";import{f as we}from"./format-H2tx8_vS.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./scale-BCebIfgE.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./activity-B1F2IRm3.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./enhanced-dialog-CeRPsI16.js";import"./differenceInCalendarDays-nctqlg7V.js";function ve({clientId:n}){var d;const{data:s=[],isLoading:c,refetch:f}=p.postureTrending.getHistory.useQuery({clientId:n,limit:8},{staleTime:6e4}),{data:a,isLoading:l}=p.postureTrending.getForecast.useQuery({clientId:n},{staleTime:6e4}),t=p.postureTrending.createSnapshot.useMutation({onSuccess:()=>{L.success("Snapshot created successfully"),f()},onError:x=>L.error(x.message)}),$=c||l,i=[...s].reverse(),b=s.length>=2?(s[0].complianceScore||0)-(s[1].complianceScore||0):0;return $?e.jsxs(u,{children:[e.jsx(v,{className:"pb-2",children:e.jsxs(y,{className:"text-sm flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Compliance Trend"]})}),e.jsx(j,{className:"h-48 flex items-center justify-center",children:e.jsx(G,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):e.jsxs(u,{children:[e.jsx(v,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(y,{className:"text-sm flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-primary"}),"Compliance Trend"]}),e.jsx(D,{className:"text-xs",children:s.length>0?`${s.length} snapshots`:"No data yet"})]}),e.jsxs(g,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1",onClick:()=>t.mutate({clientId:n}),disabled:t.isPending,children:[t.isPending?e.jsx(G,{className:"h-3 w-3 animate-spin"}):e.jsx(le,{className:"h-3 w-3"}),"Snapshot"]})]})}),e.jsx(j,{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"h-32 flex flex-col items-center justify-center text-muted-foreground text-sm",children:[e.jsx(q,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{children:"No snapshots yet"}),e.jsx("p",{className:"text-xs",children:'Click "Snapshot" to start tracking'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[((d=s[0])==null?void 0:d.complianceScore)||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Current Score"})]}),e.jsx("div",{className:"flex items-center gap-1",children:b>0?e.jsxs(P,{className:"bg-green-100 text-green-700 gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),"+",b,"%"]}):b<0?e.jsxs(P,{className:"bg-red-100 text-red-700 gap-1",children:[e.jsx(ne,{className:"h-3 w-3"}),b,"%"]}):e.jsx(P,{variant:"secondary",className:"gap-1",children:"No change"})})]}),e.jsx("div",{className:"h-16 flex items-end gap-1",children:i.map((x,k)=>e.jsx("div",{className:"flex-1 bg-primary/20 rounded-t relative group cursor-pointer",style:{height:`${x.complianceScore||0}%`},title:`${new Date(x.snapshotDate).toLocaleDateString()}: ${x.complianceScore}%`,children:e.jsx("div",{className:"absolute inset-0 bg-primary rounded-t opacity-0 group-hover:opacity-100 transition-opacity"})},x.id))}),e.jsxs("div",{className:"flex justify-between text-[10px] text-muted-foreground",children:[e.jsx("span",{children:i[0]&&new Date(i[0].snapshotDate).toLocaleDateString()}),e.jsx("span",{children:i[i.length-1]&&new Date(i[i.length-1].snapshotDate).toLocaleDateString()})]}),(a==null?void 0:a.hasEnoughData)&&e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Forecast"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(H,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:a.weeksTo100!==null?e.jsxs(e.Fragment,{children:["100% in ",e.jsxs("strong",{children:[a.weeksTo100," weeks"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"Velocity too low to forecast"})})]}),a.avgVelocity>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Average: ",a.avgVelocity," controls/week"]}),a.milestones&&a.milestones.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.milestones.slice(0,3).map(x=>e.jsxs(P,{variant:"outline",className:"text-[10px]",children:[x.score,"% in ",x.weeksEstimate,"w"]},x.score))})]}),a&&!a.hasEnoughData&&e.jsx("div",{className:"border-t pt-3 text-xs text-muted-foreground text-center",children:a.message})]})})]})}function ye({weeklyFocus:n,complianceScore:s}){return e.jsxs(u,{className:"border-indigo-200 shadow-md bg-gradient-to-br from-indigo-50/50 to-white overflow-hidden",children:[e.jsx("div",{className:"h-1.5 w-full bg-indigo-600"}),e.jsxs(v,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(y,{className:"text-xl font-bold flex items-center gap-2 text-indigo-900",children:[e.jsx(q,{className:"h-5 w-5 text-indigo-600"}),"Guided Journey: Weekly Focus"]}),e.jsx(P,{className:"bg-indigo-100 text-indigo-700 border-indigo-200 hover:bg-indigo-100 uppercase tracking-wider text-[10px] font-bold",children:"Model 2 (Guided)"})]}),e.jsx(D,{className:"text-indigo-600/80 font-medium",children:"Your roadmap to audit readiness, curated by your compliance coach."})]}),e.jsxs(j,{className:"space-y-4",children:[n?e.jsxs("div",{className:"bg-white border border-indigo-100 rounded-lg p-4 shadow-sm",children:[e.jsxs("h4",{className:"font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-amber-500"}),"This Week's Goal"]}),e.jsx("p",{className:"text-slate-700 leading-relaxed text-sm",children:n})]}):e.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-slate-500 text-sm italic",children:"Awaiting weekly focus from your advisor. Check back after your next implementation call!"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold uppercase tracking-wider text-slate-500",children:[e.jsx("span",{children:"Audit Readiness Progress"}),e.jsxs("span",{className:"text-indigo-600",children:[s,"%"]})]}),e.jsx(Y,{value:s,className:"h-2 bg-slate-100"})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsxs(g,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700 shadow-sm",size:"sm",children:["Quick Actions ",e.jsx(S,{className:"ml-2 h-4 w-4"})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[e.jsx(de,{className:"mr-2 h-4 w-4"})," Ask Coach"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-slate-500 pt-2 border-t border-indigo-50",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"})," Next Call: Friday, 2 PM"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-3 w-3 text-amber-500"})," Milestone: ISO 27001 Ph 1"]})]})]})]})}function ke({clientId:n,stats:s}){const c=[{id:"framework",title:"Select Frameworks",description:"Choose standards like ISO 27001 or SOC 2 to set your baseline.",completed:s.hasFrameworks,link:`/clients/${n}/settings`,icon:xe},{id:"users",title:"Invite Your Team",description:"Compliance is a team sport. Add your coworkers.",completed:s.hasUsers,link:`/clients/${n}/people`,icon:W},{id:"controls",title:"Assign Controls",description:"Select which security controls apply to your organization.",completed:s.hasControls,link:`/clients/${n}/controls`,icon:Z},{id:"policies",title:"Draft First Policy",description:"Use our AI templates to document your security procedures.",completed:s.hasPolicies,link:`/clients/${n}/policies`,icon:V},{id:"evidence",title:"Collect Evidence",description:"Upload your first evidence file to verify a control.",completed:s.hasEvidence,link:`/clients/${n}/evidence`,icon:I}],f=c.filter(l=>l.completed).length,a=Math.round(f/c.length*100);return e.jsxs(u,{className:"border-emerald-100 shadow-lg bg-emerald-50/30 overflow-hidden",children:[e.jsx("div",{className:"h-1.5 w-full bg-emerald-500"}),e.jsxs(v,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xl font-bold text-slate-900",children:"Phase 1: Launch"}),e.jsx(D,{className:"text-emerald-700 font-medium",children:"Complete these 5 steps to establish your compliance baseline."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-black text-emerald-600",children:[a,"%"]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Complete"})]})]}),e.jsx(Y,{value:a,className:"h-2 bg-emerald-100 mt-2"})]}),e.jsxs(j,{className:"space-y-3",children:[c.map(l=>e.jsx(h,{href:l.link,children:e.jsxs("div",{className:`flex items-start gap-4 p-3 rounded-lg border transition-all cursor-pointer group ${l.completed?"bg-white border-emerald-100 opacity-75":"bg-white border-slate-200 hover:border-emerald-300 hover:shadow-sm"}`,children:[e.jsx("div",{className:`mt-1 rounded-full p-1 ${l.completed?"text-emerald-500":"text-slate-300"}`,children:l.completed?e.jsx(U,{className:"h-5 w-5"}):e.jsx(re,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-bold ${l.completed?"text-slate-500 line-through":"text-slate-900"}`,children:l.title}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 group-hover:line-clamp-none transition-all",children:l.description})]}),e.jsx(S,{className:`h-4 w-4 mt-1 transition-transform group-hover:translate-x-1 ${l.completed?"text-slate-300":"text-slate-400"}`})]})},l.id)),a===100&&e.jsxs("div",{className:"mt-4 p-4 bg-emerald-600 rounded-xl text-white text-center shadow-lg animate-in zoom-in-95 duration-500",children:[e.jsxs("h4",{className:"font-bold flex items-center justify-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Baseline Achieved!"]}),e.jsx("p",{className:"text-xs text-emerald-100 mt-1",children:"You've completed Phase 1. Ready to optimize your risks?"}),e.jsx(h,{href:`/clients/${n}/risk/assessments`,children:e.jsx(g,{size:"sm",variant:"secondary",className:"mt-3 w-full font-bold",children:"Unlock Phase 2: Optimize"})})]})]})]})}function Ce({currentPhase:n,phase1Progress:s,phase2Progress:c=0,phase3Progress:f=0,onPhaseClick:a}){const l=[{id:1,title:"Launch",subtitle:"Establish Baseline",icon:he,progress:s,color:"text-blue-500",bg:"bg-blue-500",border:"border-blue-200"},{id:2,title:"Optimize",subtitle:"Manage Risk & Gaps",icon:pe,progress:c,color:"text-teal-500",bg:"bg-teal-500",border:"border-teal-200"},{id:3,title:"Scale",subtitle:"Continuous Assurance",icon:I,progress:f,color:"text-emerald-500",bg:"bg-emerald-500",border:"border-emerald-200"}];return e.jsx(u,{className:"border-none shadow-sm bg-slate-50/50 mb-6",children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:l.map((t,$)=>{const i=n===t.id,b=t.progress===100;return e.jsxs("div",{className:M("flex-1 w-full relative flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer",i?"bg-white shadow-md border-primary/20 ring-1 ring-primary/10":"bg-white/50 border-transparent hover:bg-white hover:border-slate-200"),onClick:()=>a==null?void 0:a(t.id),children:[$<l.length-1&&e.jsx("div",{className:"hidden md:block absolute -right-6 top-1/2 -translate-y-1/2 w-8 h-0.5 bg-slate-200 z-0"}),e.jsx("div",{className:M("h-10 w-10 rounded-full flex items-center justify-center shrink-0 z-10 transition-colors",i?`${t.bg} text-white`:b?`${t.color} bg-white border-2 ${t.border}`:"bg-slate-100 text-slate-400"),children:b&&!i?e.jsx(U,{className:"h-6 w-6"}):e.jsx(t.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:M("text-sm font-bold",i?"text-slate-900":"text-slate-500"),children:["Phase ",t.id,": ",t.title]}),i&&e.jsxs("span",{className:M("text-xs font-bold",t.color),children:[t.progress,"%"]})]}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:t.subtitle}),i&&e.jsx("div",{className:"h-1.5 w-full bg-slate-100 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:M("h-full transition-all duration-500",t.bg),style:{width:`${t.progress}%`}})})]})]},t.id)})})})})}function ws(){const{id:n}=ae(),s=parseInt(n||"0"),[c,f]=w.useState(1),[a,l]=w.useState(!1),{data:t,isLoading:$}=p.clients.get.useQuery({id:s},{enabled:s>0}),{data:i,isLoading:b}=p.clientControls.list.useQuery({clientId:s},{enabled:s>0}),{data:d,isLoading:x}=p.clientPolicies.list.useQuery({clientId:s},{enabled:s>0}),{data:k,isLoading:z}=p.governance.list.useQuery({clientId:s,status:"pending",limit:10},{enabled:s>0}),{data:N}=p.clients.getOnboardingStatus.useQuery({clientId:s},{enabled:s>0}),T=p.useUtils(),F=p.clients.importDemoData.useMutation({onSuccess:()=>{L.success("Demo Data Imported Successfully"),T.clientControls.list.invalidate(),T.clientPolicies.list.invalidate(),T.governance.list.invalidate(),T.clients.getOnboardingStatus.invalidate()},onError:r=>{L.error("Import Failed: "+r.message)}}),E=w.useMemo(()=>{if(!N)return 0;const o=[N.hasFrameworks,N.hasUsers,N.hasControls,N.hasPolicies,N.hasEvidence].filter(Boolean).length;return Math.round(o/5*100)},[N]),J=w.useMemo(()=>{if(!i)return 0;const r=i.filter(o=>o.status==="implemented").length;return Math.min(100,Math.round(r/(i.length||1)*100))},[i]),_=w.useMemo(()=>{if(!d)return 0;const r=d.filter(o=>o.status==="approved").length;return Math.min(100,Math.round(r/(d.length||1)*100))},[d]);w.useEffect(()=>{E===100&&c===1&&f(2)},[E]);const m=w.useMemo(()=>{if(!i||!d)return null;const r=i.length,o=i.filter(C=>C.status==="implemented").length,K=r>0?Math.round(o/r*100):0,X=d.length,ee=d.filter(C=>C.status==="approved").length,se=d.filter(C=>C.status==="draft").length,te=d.filter(C=>C.status==="review").length;return{totalControls:r,implementedControls:o,controlsProgress:K,totalPolicies:X,approvedPolicies:ee,draftPolicies:se,reviewPolicies:te}},[i,d]),O=w.useMemo(()=>k?k.filter(r=>r.status!=="completed"&&r.status!=="entered-in-error"&&r.status!=="unknown").sort((r,o)=>new Date(r.dueDate||"9999-12-31").getTime()-new Date(o.dueDate||"9999-12-31").getTime()).slice(0,5):[],[k]);return e.jsx(ie,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Governance Dashboard"}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:["Overview of",$?e.jsx(B,{className:"h-5 w-32 inline-block"}):e.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"'s compliance posture and activities."]})]}),e.jsxs(g,{size:"lg",onClick:()=>l(!0),disabled:F.isPending,className:"gap-2 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white shadow-md border-0",children:[e.jsx(ue,{className:"h-5 w-5"}),F.isPending?"Importing Data...":"Import Demo Data"]}),e.jsx(ge,{open:a,onOpenChange:l,onImport:async()=>{await F.mutateAsync({clientId:s})}})]})}),(t==null?void 0:t.serviceModel)==="guided"&&e.jsx("div",{className:"grid gap-4 md:grid-cols-1",children:e.jsx(ye,{weeklyFocus:t.weeklyFocus||"No focus set yet for this week.",complianceScore:(m==null?void 0:m.controlsProgress)||0})}),(t==null?void 0:t.serviceModel)==="subscription"&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsx(Ce,{currentPhase:c,phase1Progress:E,phase2Progress:J,phase3Progress:_,onPhaseClick:f}),c===1&&e.jsx(ke,{clientId:s,stats:N||{hasFrameworks:!1,hasUsers:!1,hasControls:!1,hasPolicies:!1,hasEvidence:!1}}),c===2&&e.jsxs(u,{className:"bg-gradient-to-br from-teal-600 to-teal-700 text-white border-none shadow-lg shadow-teal-900/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs(v,{className:"relative z-10",children:[e.jsxs(y,{className:"flex items-center gap-2 text-white",children:[e.jsx(A,{className:"w-6 h-6 text-teal-200"}),"Phase 2: Optimize"]}),e.jsx(D,{className:"text-teal-100",children:"Focus on identifying risks and closing compliance gaps."})]}),e.jsx(j,{className:"space-y-4 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{href:`/clients/${s}/risk/assessments`,children:e.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-teal-100",children:"Run Risk Assessment"}),e.jsx("div",{className:"text-xs text-teal-200/80",children:"Identify threats to your assets"})]}),e.jsx(S,{className:"w-5 h-5 text-teal-200 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(h,{href:`/clients/${s}/gap-analysis`,children:e.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-teal-100",children:"Gap Analysis"}),e.jsx("div",{className:"text-xs text-teal-200/80",children:"Compare against frameworks"})]}),e.jsx(S,{className:"w-5 h-5 text-teal-200 group-hover:translate-x-1 transition-transform"})]})})]})})]}),c===3&&e.jsxs(u,{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white border-none shadow-lg shadow-emerald-900/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs(v,{className:"relative z-10",children:[e.jsxs(y,{className:"flex items-center gap-2 text-white",children:[e.jsx(A,{className:"w-6 h-6 text-emerald-200"}),"Phase 3: Scale"]}),e.jsx(D,{className:"text-emerald-100",children:"Automate assurance and maintain continuous audit readiness."})]}),e.jsx(j,{className:"space-y-4 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{href:`/clients/${s}/evidence`,children:e.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-emerald-100",children:"Automated Evidence"}),e.jsx("div",{className:"text-xs text-emerald-200/80",children:"Connect integrations & collectors"})]}),e.jsx(S,{className:"w-5 h-5 text-emerald-200 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(h,{href:`/clients/${s}/reports`,children:e.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-emerald-100",children:"Audit Reports"}),e.jsx("div",{className:"text-xs text-emerald-200/80",children:"Generate reports for stakeholders"})]}),e.jsx(S,{className:"w-5 h-5 text-emerald-200 group-hover:translate-x-1 transition-transform"})]})})]})})]})]}),(!(t!=null&&t.serviceModel)||(t==null?void 0:t.serviceModel)!=="managed"&&(t==null?void 0:t.serviceModel)!=="subscription")&&e.jsxs(u,{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-emerald-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-6 h-6 text-emerald-400"}),"Getting Started with Governance"]}),e.jsxs(D,{className:"text-slate-300 flex justify-between items-center",children:[e.jsx("span",{children:"Establish your compliance baseline, implement controls, and automate evidence collection."}),e.jsx(h,{href:`/clients/${s}/policies?create=true`,children:e.jsxs(g,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white border-none shadow-sm h-8",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Create Policy"]})})]})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 relative",children:[{step:"1. Scope",title:"Select Frameworks",desc:"Choose standards (ISO, SOC2) to apply.",link:`/clients/${s}/settings`,icon:Z,color:"text-blue-400",bg:"bg-blue-900/50"},{step:"2. Define",title:"Assign Controls",desc:"Build your Statement of Applicability.",link:`/clients/${s}/controls`,icon:Q,color:"text-amber-400",bg:"bg-amber-900/50"},{step:"3. Document",title:"Draft Policies",desc:"Create policies using AI templates.",link:`/clients/${s}/policies`,icon:fe,color:"text-purple-400",bg:"bg-purple-900/50"},{step:"4. Implement",title:"Assign Tasks",desc:"Delegate tasks to your team.",link:`/clients/${s}/tasks`,icon:W,color:"text-pink-400",bg:"bg-pink-900/50"},{step:"5. Verify",title:"Audit & Report",desc:"Monitor coverage and export reports.",link:`/clients/${s}/reports`,icon:be,color:"text-emerald-400",bg:"bg-emerald-900/50"}].map((r,o)=>e.jsx(h,{href:r.link,children:e.jsxs("div",{className:"group relative flex flex-col items-center text-center p-4 rounded-xl hover:bg-white/10 transition-colors cursor-pointer h-full border border-transparent hover:border-white/10",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${r.bg} flex items-center justify-center mb-3 shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(r.icon,{className:`w-6 h-6 ${r.color}`})}),e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1",children:r.step}),e.jsx("div",{className:"font-semibold mb-1 text-white",children:r.title}),e.jsx("div",{className:"text-xs text-slate-400 leading-snug",children:r.desc})]})},o))})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-emerald-200 dark:shadow-none bg-emerald-600 text-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Controls Implemented"}),m?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold mt-1 text-white",children:[m.implementedControls," ",e.jsxs("span",{className:"text-sm font-normal text-white/70",children:["/ ",m.totalControls]})]}),e.jsx("div",{className:"mt-2 h-2 w-full bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${m.controlsProgress}%`}})})]}):e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md ml-3",children:e.jsx(Q,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-blue-200 dark:shadow-none bg-blue-600 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Policies Approved"}),m?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold mt-1 text-white",children:[m.approvedPolicies," ",e.jsxs("span",{className:"text-sm font-normal text-white/70",children:["/ ",m.totalPolicies]})]}),e.jsxs("p",{className:"text-xs text-white/60 mt-1",children:[m.draftPolicies," drafts, ",m.reviewPolicies," in review"]})]}):e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(V,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-amber-200 dark:shadow-none bg-amber-500 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Open Tasks"}),z?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold mt-1 text-white",children:(k==null?void 0:k.filter(r=>r.status!=="completed").length)||0}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Pending actions"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(Ne,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-purple-200 dark:shadow-none bg-purple-600 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Evidence Collected"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-white",children:"-"}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Evidence tracking"})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(A,{className:"w-5 h-5 text-white"})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(oe,{clientId:s})}),e.jsx("div",{className:"md:col-span-3"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-7 lg:grid-cols-7",children:[e.jsx("div",{className:"md:col-span-4",children:e.jsx(ve,{clientId:s})}),e.jsxs(u,{className:"md:col-span-3",children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-lg",children:"Upcoming Tasks"}),e.jsx(D,{children:"Actions due soon"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[z?Array.from({length:3}).map((r,o)=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(B,{className:"h-10 w-full"})},o)):O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[e.jsx(U,{className:"h-8 w-8 mb-2 opacity-20"}),e.jsx("p",{children:"No pending tasks"}),e.jsx(h,{href:`/clients/${s}/tasks`,children:e.jsx(g,{variant:"link",size:"sm",children:"Create Task"})})]}):O.map(r=>e.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 pb-4 last:pb-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium line-clamp-1",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(P,{variant:r.priority==="high"?"destructive":"secondary",className:"h-5 px-1 text-[10px]",children:r.priority||"Medium"}),r.dueDate&&e.jsxs("span",{className:new Date(r.dueDate)<new Date?"text-red-500":"",children:["Due ",we(new Date(r.dueDate),"MMM d")]})]})]}),e.jsx(h,{href:`/clients/${s}/tasks`,children:e.jsx(g,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(S,{className:"h-4 w-4"})})})]},r.id)),!z&&O.length>0&&e.jsx(h,{href:`/clients/${s}/tasks`,children:e.jsx(g,{variant:"outline",className:"w-full mt-2",children:"View All Tasks"})})]})})]})]})]})})}export{ws as default};
