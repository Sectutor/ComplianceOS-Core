import{ab as I,t as i,r as C,j as e,A as M,D as S,ap as T,c as l,F as k,o as $,p as E,q as P,s as B,C as x,m as h,aq as p,S as O,ar as Q,d as b,e as f,f as D,T as z}from"./index-DOc7Nwb7.js";import{D as G}from"./DashboardLayout-aHnUqq57.js";import{C as V}from"./ChecklistProgressWidget-BEJu_NKS.js";import{M as q}from"./index-utl_XIpZ.js";import{B as H}from"./book-open-BffBrdze.js";import{A as U}from"./arrow-right-M96iV-v9.js";import{S as L}from"./square-check-big-BUI41YoI.js";import{L as W}from"./link-FmUqdGRG.js";import{C as J}from"./clipboard-check-CQkJX5J0.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./progress-B-1k4ZZX.js";function Se(){const{id:R}=I(),s=parseInt(R||"0"),{data:j,isLoading:w}=i.clients.get.useQuery({id:s},{enabled:s>0}),{data:t,isLoading:A}=i.clients.getComplianceScore.useQuery({clientId:s},{enabled:s>0}),{data:a,isLoading:F}=i.clients.getPolicyCoverageAnalysis.useQuery({clientId:s},{enabled:s>0}),{data:n,isLoading:N}=i.clientControls.list.useQuery({clientId:s},{enabled:s>0}),{data:d}=i.readiness.list.useQuery({clientId:s},{enabled:s>0}),o=C.useMemo(()=>d==null?void 0:d.find(r=>!!r.scopingReport),[d]),g=w||A||F||N,v=C.useMemo(()=>n?Array.from(new Set(n.map(m=>m.framework))).filter(Boolean).map(m=>{const c=n.filter(u=>u.framework===m),y=c.filter(u=>u.status==="implemented").length;return{name:m,total:c.length,implemented:y,progress:c.length>0?Math.round(y/c.length*100):0}}):[],[n]);return e.jsx(G,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Compliance Dashboard"}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:["Monitor compliance across frameworks and controls for",w?e.jsx(M,{className:"h-5 w-32 inline-block"}):e.jsx("span",{className:"font-medium text-foreground",children:j==null?void 0:j.name}),"."]})]}),(o==null?void 0:o.scopingReport)&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(S,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"gap-2 border-indigo-200 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 hover:text-indigo-800",children:[e.jsx(k,{className:"h-4 w-4"}),"View Executive Report"]})}),e.jsxs($,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-slate-50 p-0 border-none shadow-2xl",children:[e.jsxs(E,{className:"bg-white border-b px-8 py-6 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg shadow-lg shadow-indigo-200",children:e.jsx(k,{className:"h-5 w-5 text-white"})}),e.jsx(P,{className:"text-2xl font-bold text-slate-900",children:"Executive Scoping Report"})]}),e.jsx(B,{className:"text-slate-500 font-medium italic",children:"Strategic Readiness Assessment & Compliance Blueprint"})]}),e.jsx("div",{className:"p-10",children:e.jsxs("div",{className:"bg-white shadow-sm border border-slate-200 rounded-xl p-12 min-h-[500px] overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-slate-50/50 -mr-32 -mt-32 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:`prose prose-slate max-w-none \r
                                            prose-headings:text-slate-900 prose-headings:font-bold \r
                                            prose-h1:text-3xl prose-h1:pb-4 prose-h1:border-b\r
                                            prose-h2:text-xl prose-h2:mt-10 prose-h2:pb-2 prose-h2:border-b prose-h2:border-slate-100\r
                                            prose-p:text-slate-600 prose-p:leading-relaxed\r
                                            prose-strong:text-slate-900 prose-strong:font-bold\r
                                            prose-li:text-slate-600`,children:e.jsx(q,{children:o.scopingReport})}),e.jsxs("div",{className:"mt-20 pt-8 border-t border-slate-100 flex justify-between items-center text-[10px] uppercase tracking-widest font-bold text-slate-400",children:[e.jsx("span",{children:"Generated by ComplianceOS AI"}),e.jsx("span",{children:"Confidential - For Internal Use Only"})]})]})})]})]})}),e.jsx(x,{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-100",children:e.jsxs(h,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg hidden sm:block",children:e.jsx(H,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-900 text-base",children:"Audit Readiness Guide"}),e.jsx("p",{className:"text-amber-700/80 text-sm",children:"Step-by-step workflow to prepare for ISO 27001, SOC 2, and other audits."})]})]}),e.jsx(p,{href:`/clients/${s}/compliance/overview`,children:e.jsxs(l,{size:"sm",className:"bg-amber-600 hover:bg-amber-700 text-white font-semibold whitespace-nowrap",children:["View Workflow ",e.jsx(U,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-blue-200 dark:shadow-none bg-blue-600 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Overall Readiness"}),g?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold mt-1 text-white",children:[(t==null?void 0:t.complianceScore)||0,"%"]}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Combined score"}),e.jsx("div",{className:"h-1.5 w-full bg-white/30 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:"h-full bg-white transition-all duration-500",style:{width:`${(t==null?void 0:t.complianceScore)||0}%`}})})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(O,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-emerald-200 dark:shadow-none bg-emerald-600 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Controls Implemented"}),g?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold mt-1 text-white",children:[(t==null?void 0:t.implementedControls)||0," ",e.jsxs("span",{className:"text-sm font-normal text-white/70",children:["/ ",(t==null?void 0:t.totalControls)||0]})]}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Total controls"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(L,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-amber-200 dark:shadow-none bg-amber-500 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Policy Mapping"}),g?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold mt-1 text-white",children:[(a==null?void 0:a.coveragePercentage)||0,"%"]}),e.jsxs("p",{className:"text-xs text-white/60 mt-1",children:[(a==null?void 0:a.mappedControls)||0," controls mapped"]})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(W,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 rounded-xl border-none shadow-lg shadow-purple-200 dark:shadow-none bg-purple-600 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Frameworks"}),N?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded mt-1"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold mt-1 text-white",children:v.length}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Active frameworks"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(Q,{className:"w-5 h-5 text-white"})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(V,{clientId:s})}),e.jsx("div",{className:"md:col-span-3"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(r=>e.jsxs(x,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(f,{className:"text-base font-semibold",children:r.name})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Readiness"}),e.jsxs("span",{className:"font-bold",children:[r.progress,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${r.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t",children:[e.jsx("span",{className:"text-muted-foreground",children:"Implemented"}),e.jsxs("span",{children:[r.implemented," / ",r.total]})]}),e.jsx(p,{href:`/clients/${s}/controls?framework=${encodeURIComponent(r.name)}`,children:e.jsx(l,{variant:"outline",className:"w-full h-8 text-xs mt-2",children:"View Controls"})})]})})]},r.name))}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Gap Analysis Summary"}),e.jsx(D,{children:"Recent identified gaps"})]}),e.jsx(h,{children:e.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:a&&a.unmappedControls>0?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-8 w-8 mb-2 text-warning"}),e.jsxs("p",{className:"font-medium text-foreground",children:[a.unmappedControls," controls unmapped"]}),e.jsx("p",{className:"text-sm mb-4",children:"These controls lack policy coverage."}),e.jsx(p,{href:`/clients/${s}/policies`,children:e.jsx(l,{variant:"outline",size:"sm",children:"Map Policies"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-8 w-8 mb-2 text-emerald-500 opacity-20"}),e.jsx("p",{children:"No policy gaps identified"})]})})})]}),e.jsxs(x,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Evidence Coverage"}),e.jsx(D,{children:"Controls with linked evidence"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[e.jsx(J,{className:"h-8 w-8 mb-2 opacity-20"}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:(t==null?void 0:t.evidenceStatus.verified)||0}),e.jsx("p",{className:"text-sm",children:"Verified Evidence Items"}),e.jsx(p,{href:`/clients/${s}/evidence`,children:e.jsx(l,{variant:"link",size:"sm",className:"mt-2",children:"Go to Evidence"})})]})})]})]})]})})}export{Se as default};
