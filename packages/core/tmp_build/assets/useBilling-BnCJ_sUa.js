import{r as T,t as c,i as a}from"./index-DOc7Nwb7.js";const l={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_MODE:"saas",VITE_ENABLE_BILLING:"true",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyamxrcnRjY21scnZzanRwcHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNDk0NjksImV4cCI6MjA4MTYyNTQ2OX0.Ee98pmtBz53EnLMhd0rH_hSTSG3G0o0SyLQ4uJuSI2g",VITE_SUPABASE_URL:"https://erjlkrtccmlrvsjtpppp.supabase.co"};var I={};const t=(r,s)=>{if(typeof import.meta<"u"&&l){const i=l[s||r]||l[r];if(i)return i}return typeof process<"u"&&I&&I[r]||""},w={env:t("NODE_ENV"),isProduction:t("NODE_ENV")==="production",port:parseInt(t("PORT")||"3000",10),databaseUrl:t("DATABASE_URL"),isBillingEnabled:t("ENABLE_BILLING","VITE_ENABLE_BILLING")==="true",stripe:{secretKey:t("STRIPE_SECRET_KEY"),webhookSecret:t("STRIPE_WEBHOOK_SECRET"),publishableKey:t("NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY","VITE_STRIPE_PUBLISHABLE_KEY"),prices:{startup:{monthly:t("STRIPE_PRICE_STARTUP_MONTHLY")||"price_1Snk7y08dNwwNbqftY7z1TbZ",yearly:t("STRIPE_PRICE_STARTUP_YEARLY")||"price_1SnkGg08dNwwNbqfFqxBnLMB"},guided:{monthly:t("STRIPE_PRICE_GUIDED_MONTHLY")||"price_1Snk7y08dNwwNbqfkexPd4SR",yearly:t("STRIPE_PRICE_GUIDED_YEARLY")||"price_1SnkGh08dNwwNbqfoVCkK6ej"},managed:t("STRIPE_PRICE_MANAGED")||"price_1Snk8D08dNwwNbqftHqV7sxo"}},jwtSecret:t("JWT_SECRET")||"fallback-secret-change-me"},P=w.isBillingEnabled;function L(){const r=P,s=!0,[i,n]=T.useState(!1),u=c.billing.createCheckout.useMutation({onSuccess:e=>{e.url&&(window.location.href=e.url)},onError:e=>{a.error(`Checkout failed: ${e.message}`),n(!1)}}),E=c.billing.createPortal.useMutation({onSuccess:e=>{e.url&&(window.location.href=e.url)},onError:e=>{a.error(`Portal failed: ${e.message}`),n(!1)}}),_=async(e,o)=>{if(r){n(!0);try{await u.mutateAsync({clientId:e,tier:o,successUrl:`${window.location.origin}/clients/${e}/settings?billing=success`,cancelUrl:`${window.location.origin}/clients/${e}/settings?billing=cancel`})}catch{n(!1)}}},p=e=>_(e,"pro"),d=e=>_(e,"enterprise"),S=c.billing.createUserCheckout.useMutation({onSuccess:e=>{e.url&&(window.location.href=e.url)},onError:e=>{a.error(`Account upgrade failed: ${e.message}`),n(!1)}}),g=async e=>{if(r){n(!0);try{await S.mutateAsync({tier:e,successUrl:`${window.location.origin}/clients?upgrade=success`,cancelUrl:`${window.location.origin}/clients?upgrade=cancel`})}catch{n(!1)}}},f=async e=>{if(r){n(!0);try{await E.mutateAsync({clientId:e,returnUrl:`${window.location.origin}/clients/${e}/settings`})}catch{n(!1)}}};return{billingEnabled:r,saasMode:s,isLoading:i||u.isPending||E.isPending,upgradeToPro:p,upgradeToEnterprise:d,upgradeAccount:g,manageSubscription:f}}export{L as u};
