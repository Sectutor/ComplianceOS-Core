import{ab as l,j as e,t as x,x as h,T as j,aq as u,c as f}from"./index-DOc7Nwb7.js";import{D as o}from"./DashboardLayout-aHnUqq57.js";import{R as v}from"./RoadmapCreateForm-D3RUrP5x.js";import{P as g}from"./PageGuide-CPKKXXS6.js";import{A as N}from"./arrow-left-CpuUojG-.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./textarea-BtxBxzdY.js";import"./calendar-CRg26W4I.js";import"./differenceInCalendarDays-nctqlg7V.js";import"./endOfWeek-tX_WdcBG.js";import"./format-H2tx8_vS.js";import"./startOfMonth-BTb_IeTV.js";import"./isSameDay-CGHMiO64.js";import"./chevron-left-DZH-lUm7.js";import"./utils-BC5CVi_C.js";import"./separator-BWuYil37.js";import"./accordion-BvRtf4FI.js";import"./trending-up-eUiO956o.js";import"./plus-BaQ35Jcx.js";import"./clock-osbacZli.js";import"./save-CvVmWchr.js";import"./dollar-sign-M9UCfTjq.js";import"./arrow-right-M96iV-v9.js";import"./info-By5wLOUH.js";function be(){const d=l(),r=d.roadmapId?parseInt(d.roadmapId,10):null,s=d.id?parseInt(d.id,10):null;if(!r||!s)return e.jsx(o,{children:e.jsx("div",{className:"p-8",children:"Invalid URL parameters"})});const{data:i,isLoading:m,error:n}=x.roadmap.getStrategic.useQuery({roadmapId:r},{enabled:!!r});if(m)return e.jsx(o,{children:e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading roadmap data..."})]})})});if(n)return e.jsx(o,{children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load roadmap"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:n.message})]})})});if(!i)return e.jsx(o,{children:e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Roadmap not found"})})});let a={id:r,title:i.title,description:i.description};try{if(i.description&&typeof i.description=="string"&&i.description.trim().length>0&&i.description.startsWith("{"))try{const t=JSON.parse(i.description);a={...a,...t.businessContext||{},...t.drivers||{},...t.posture||{},...t.governance||{},vision:t.vision||"",framework:t.framework||"",targetDate:t.targetDate?new Date(t.targetDate):void 0,objectives:t.objectives||[],detailedObjectives:t.detailedObjectives||(t.objectives?t.objectives.map((p,c)=>({id:`obj-${c}`,title:p,alignment:t.vision||"",priority:"High",horizon:"Q1",owner:"TBD",estimatedHours:40,budget:0,complexity:"Medium"})):[]),metrics:t.metrics||[],kpiTargets:t.kpiTargets||[]}}catch(t){console.error("Error parsing roadmap description JSON:",t),a.vision=i.description||""}else a.vision=i.description||""}catch(t){console.error("Error processing roadmap data:",t),a.vision=i.description||""}return e.jsx(o,{children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"pt-6 pb-2",children:e.jsx("div",{className:"px-8",children:e.jsx(u,{href:`/clients/${s}/roadmap/${r}`,children:e.jsxs(f,{variant:"ghost",size:"sm",className:"gap-2 mb-4 pl-0 hover:pl-2 transition-all",children:[e.jsx(N,{className:"h-4 w-4"})," Back to Roadmap"]})})})}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"px-8 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Edit Roadmap: ",i.title]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Update your roadmap configuration and details"})]}),e.jsx(g,{title:"Edit Roadmap Configuration",description:"Modify roadmap metadata and initial setup.",rationale:"Keep roadmap parameters aligned with changing business needs.",howToUse:[{step:"Update Info",description:"Change title, description, and vision."},{step:"Adjust Timeline",description:"Modify target dates and milestones."},{step:"Drivers",description:"Update business drivers and objectives."}],integrations:[{name:"Roadmap Engine",description:"Updates recalculate project timelines."}]})]})}),e.jsx("div",{className:"w-full px-0",children:e.jsx(v,{clientId:s,initialData:a,onSuccess:t=>{window.location.href=`/clients/${s}/roadmap/${r}`},onCancel:()=>{window.location.href=`/clients/${s}/roadmap/${r}`}})})]})]})})}export{be as default};
