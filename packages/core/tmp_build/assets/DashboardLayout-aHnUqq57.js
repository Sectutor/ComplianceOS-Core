import{M as ae,r as c,aE as ge,ae as ne,aF as Pr,aG as Ar,aH as Rr,aI as Mr,aJ as Ne,j as r,am as pe,D as ln,o as cn,b as $t,t as oe,c as Q,a4 as Et,E as ze,G as We,H as Ve,J as Ue,K as V,x as dn,h as et,F as ce,S as de,aK as _t,u as Dt,ad as un,af as le,aL as fe,aM as $r,ai as Er,aN as pn,aO as _r,ak as mn,aP as Dr,aQ as Lr,aR as hn,aS as fn,aT as vn,aU as Tr,aV as Ir,aW as Br,aX as Or,aY as Fr,aZ as Hr,a_ as zr,a$ as Wr,k as gn,ac as vt,a as bn,b0 as Vr,b1 as Ur,g as xn,b2 as wn,b3 as Gr,b4 as Kr,ar as Ce,U as _e,T as gt,b5 as qr,ao as yn,b6 as Yr,b7 as Xr,ap as Qr,B as Zr,p as Jr,q as es,L as Ge,I as Me,b8 as ts,b9 as ns,Z as rs,_ as ss,X as as,Y as os,$ as is,a1 as Kt,ba as ls,bb as cs,bc as ds,i as Ke,bd as us,be as ps,aa as Cn,bf as ms,bg as hs,bh as fs,bi as bt,a3 as vs}from"./index-DOc7Nwb7.js";import{R as gs,C as bs,a as xs}from"./index--2vFva6Y.js";import{S as Te}from"./search-CwuIBBPE.js";import{F as ws}from"./filter-Ceo--4mb.js";import{C as De}from"./clipboard-check-CQkJX5J0.js";import{S as Ie}from"./sparkles-CoQ80pK2.js";import{S as ys}from"./send-FW7-3cjH.js";import{S as Cs}from"./scroll-area-DPaNxEJD.js";import{B as Sn,S as tt}from"./settings-CIu9FFiX.js";import{C as Ss}from"./circle-check-C5kiwRoG.js";import{c as js,e as ks,g as Ns}from"./en-US-Bfz1jvxT.js";import{t as ee,g as qt,m as Yt,a as qe}from"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import{R as Ps}from"./rocket-C2MuHhsn.js";import{S as As}from"./scale-BCebIfgE.js";import{L as Ye}from"./layout-grid-CGqkIAJU.js";import{B as nt}from"./book-open-BffBrdze.js";import{Z as ct}from"./zap-B01fFOkT.js";import{S as Rs}from"./star-BTvaCCU4.js";import{B as Ms}from"./briefcase-BxorFA78.js";import{T as $s}from"./target-cfAj3L6j.js";import{D as dt}from"./database-Bjtecw5f.js";import{A as Ze}from"./activity-B1F2IRm3.js";import{S as $e}from"./shield-check-ETs8j4-d.js";import{S as ut}from"./shield-alert-iAruRy4W.js";import{B as jn}from"./brain-C-Zi22rJ.js";import{L as kn}from"./link-FmUqdGRG.js";import{L as xt}from"./lock-czWF3qbC.js";import{G as Es}from"./globe-BMGZmoaJ.js";import{C as Nn}from"./calendar-BlLJlGbj.js";import{M as Pn}from"./message-square-5hBo7zY3.js";import{U as _s}from"./upload-BBmUECj8.js";import{U as Ds}from"./user-CqRnJLgW.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=ae("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ae("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ae("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ae("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ae("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ae("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ae("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=ae("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ae("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ae("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ae("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Fs=gs,Hs=bs,zs=xs;var Zt=1,Ws=.9,Vs=.8,Us=.17,pt=.1,mt=.999,Gs=.9999,Ks=.99,qs=/[\\\/_+.#"@\[\(\{&]/,Ys=/[\\\/_+.#"@\[\(\{&]/g,Xs=/[\s-]/,Rn=/[\s-]/g;function St(e,n,t,a,s,o,i){if(o===n.length)return s===e.length?Zt:Ks;var l=`${s},${o}`;if(i[l]!==void 0)return i[l];for(var d=a.charAt(o),p=t.indexOf(d,s),m=0,h,u,f,g;p>=0;)h=St(e,n,t,a,p+1,o+1,i),h>m&&(p===s?h*=Zt:qs.test(e.charAt(p-1))?(h*=Vs,f=e.slice(s,p-1).match(Ys),f&&s>0&&(h*=Math.pow(mt,f.length))):Xs.test(e.charAt(p-1))?(h*=Ws,g=e.slice(s,p-1).match(Rn),g&&s>0&&(h*=Math.pow(mt,g.length))):(h*=Us,s>0&&(h*=Math.pow(mt,p-s))),e.charAt(p)!==n.charAt(o)&&(h*=Gs)),(h<pt&&t.charAt(p-1)===a.charAt(o+1)||a.charAt(o+1)===a.charAt(o)&&t.charAt(p-1)!==a.charAt(o))&&(u=St(e,n,t,a,p+1,o+2,i),u*pt>h&&(h=u*pt)),h>m&&(m=h),p=t.indexOf(d,p+1);return i[l]=m,m}function Jt(e){return e.toLowerCase().replace(Rn," ")}function Qs(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,St(e,n,Jt(e),Jt(n),0,0,{})}var Ee='[cmdk-group=""]',ht='[cmdk-group-items=""]',Zs='[cmdk-group-heading=""]',Mn='[cmdk-item=""]',en=`${Mn}:not([aria-disabled="true"])`,jt="cmdk-item-select",je="data-value",Js=(e,n,t)=>Qs(e,n,t),$n=c.createContext(void 0),Oe=()=>c.useContext($n),En=c.createContext(void 0),Lt=()=>c.useContext(En),_n=c.createContext(void 0),Dn=c.forwardRef((e,n)=>{let t=ke(()=>{var v,P;return{search:"",value:(P=(v=e.value)!=null?v:e.defaultValue)!=null?P:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=ke(()=>new Set),s=ke(()=>new Map),o=ke(()=>new Map),i=ke(()=>new Set),l=Ln(e),{label:d,children:p,value:m,onValueChange:h,filter:u,shouldFilter:f,loop:g,disablePointerSelection:x=!1,vimBindings:b=!0,...w}=e,M=ge(),$=ge(),E=ge(),D=c.useRef(null),j=da();we(()=>{if(m!==void 0){let v=m.trim();t.current.value=v,T.emit()}},[m]),we(()=>{j(6,G)},[]);let T=c.useMemo(()=>({subscribe:v=>(i.current.add(v),()=>i.current.delete(v)),snapshot:()=>t.current,setState:(v,P,L)=>{var k,O,F,J;if(!Object.is(t.current[v],P)){if(t.current[v]=P,v==="search")U(),B(),j(1,N);else if(v==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let H=document.getElementById(E);H?H.focus():(k=document.getElementById(M))==null||k.focus()}if(j(7,()=>{var H;t.current.selectedItemId=(H=X())==null?void 0:H.id,T.emit()}),L||j(5,G),((O=l.current)==null?void 0:O.value)!==void 0){let H=P??"";(J=(F=l.current).onValueChange)==null||J.call(F,H);return}}T.emit()}},emit:()=>{i.current.forEach(v=>v())}}),[]),Z=c.useMemo(()=>({value:(v,P,L)=>{var k;P!==((k=o.current.get(v))==null?void 0:k.value)&&(o.current.set(v,{value:P,keywords:L}),t.current.filtered.items.set(v,A(P,L)),j(2,()=>{B(),T.emit()}))},item:(v,P)=>(a.current.add(v),P&&(s.current.has(P)?s.current.get(P).add(v):s.current.set(P,new Set([v]))),j(3,()=>{U(),B(),t.current.value||N(),T.emit()}),()=>{o.current.delete(v),a.current.delete(v),t.current.filtered.items.delete(v);let L=X();j(4,()=>{U(),(L==null?void 0:L.getAttribute("id"))===v&&N(),T.emit()})}),group:v=>(s.current.has(v)||s.current.set(v,new Set),()=>{o.current.delete(v),s.current.delete(v)}),filter:()=>l.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:M,inputId:E,labelId:$,listInnerRef:D}),[]);function A(v,P){var L,k;let O=(k=(L=l.current)==null?void 0:L.filter)!=null?k:Js;return v?O(v,t.current.search,P):0}function B(){if(!t.current.search||l.current.shouldFilter===!1)return;let v=t.current.filtered.items,P=[];t.current.filtered.groups.forEach(k=>{let O=s.current.get(k),F=0;O.forEach(J=>{let H=v.get(J);F=Math.max(H,F)}),P.push([k,F])});let L=D.current;_().sort((k,O)=>{var F,J;let H=k.getAttribute("id"),ye=O.getAttribute("id");return((F=v.get(ye))!=null?F:0)-((J=v.get(H))!=null?J:0)}).forEach(k=>{let O=k.closest(ht);O?O.appendChild(k.parentElement===O?k:k.closest(`${ht} > *`)):L.appendChild(k.parentElement===L?k:k.closest(`${ht} > *`))}),P.sort((k,O)=>O[1]-k[1]).forEach(k=>{var O;let F=(O=D.current)==null?void 0:O.querySelector(`${Ee}[${je}="${encodeURIComponent(k[0])}"]`);F==null||F.parentElement.appendChild(F)})}function N(){let v=_().find(L=>L.getAttribute("aria-disabled")!=="true"),P=v==null?void 0:v.getAttribute(je);T.setState("value",P||void 0)}function U(){var v,P,L,k;if(!t.current.search||l.current.shouldFilter===!1){t.current.filtered.count=a.current.size;return}t.current.filtered.groups=new Set;let O=0;for(let F of a.current){let J=(P=(v=o.current.get(F))==null?void 0:v.value)!=null?P:"",H=(k=(L=o.current.get(F))==null?void 0:L.keywords)!=null?k:[],ye=A(J,H);t.current.filtered.items.set(F,ye),ye>0&&O++}for(let[F,J]of s.current)for(let H of J)if(t.current.filtered.items.get(H)>0){t.current.filtered.groups.add(F);break}t.current.filtered.count=O}function G(){var v,P,L;let k=X();k&&(((v=k.parentElement)==null?void 0:v.firstChild)===k&&((L=(P=k.closest(Ee))==null?void 0:P.querySelector(Zs))==null||L.scrollIntoView({block:"nearest"})),k.scrollIntoView({block:"nearest"}))}function X(){var v;return(v=D.current)==null?void 0:v.querySelector(`${Mn}[aria-selected="true"]`)}function _(){var v;return Array.from(((v=D.current)==null?void 0:v.querySelectorAll(en))||[])}function q(v){let P=_()[v];P&&T.setState("value",P.getAttribute(je))}function te(v){var P;let L=X(),k=_(),O=k.findIndex(J=>J===L),F=k[O+v];(P=l.current)!=null&&P.loop&&(F=O+v<0?k[k.length-1]:O+v===k.length?k[0]:k[O+v]),F&&T.setState("value",F.getAttribute(je))}function S(v){let P=X(),L=P==null?void 0:P.closest(Ee),k;for(;L&&!k;)L=v>0?la(L,Ee):ca(L,Ee),k=L==null?void 0:L.querySelector(en);k?T.setState("value",k.getAttribute(je)):te(v)}let ie=()=>q(_().length-1),Re=v=>{v.preventDefault(),v.metaKey?ie():v.altKey?S(1):te(1)},He=v=>{v.preventDefault(),v.metaKey?q(0):v.altKey?S(-1):te(-1)};return c.createElement(ne.div,{ref:n,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:v=>{var P;(P=w.onKeyDown)==null||P.call(w,v);let L=v.nativeEvent.isComposing||v.keyCode===229;if(!(v.defaultPrevented||L))switch(v.key){case"n":case"j":{b&&v.ctrlKey&&Re(v);break}case"ArrowDown":{Re(v);break}case"p":case"k":{b&&v.ctrlKey&&He(v);break}case"ArrowUp":{He(v);break}case"Home":{v.preventDefault(),q(0);break}case"End":{v.preventDefault(),ie();break}case"Enter":{v.preventDefault();let k=X();if(k){let O=new Event(jt);k.dispatchEvent(O)}}}}},c.createElement("label",{"cmdk-label":"",htmlFor:Z.inputId,id:Z.labelId,style:pa},d),at(e,v=>c.createElement(En.Provider,{value:T},c.createElement($n.Provider,{value:Z},v))))}),ea=c.forwardRef((e,n)=>{var t,a;let s=ge(),o=c.useRef(null),i=c.useContext(_n),l=Oe(),d=Ln(e),p=(a=(t=d.current)==null?void 0:t.forceMount)!=null?a:i==null?void 0:i.forceMount;we(()=>{if(!p)return l.item(s,i==null?void 0:i.id)},[p]);let m=Tn(s,o,[e.value,e.children,o],e.keywords),h=Lt(),u=he(j=>j.value&&j.value===m.current),f=he(j=>p||l.filter()===!1?!0:j.search?j.filtered.items.get(s)>0:!0);c.useEffect(()=>{let j=o.current;if(!(!j||e.disabled))return j.addEventListener(jt,g),()=>j.removeEventListener(jt,g)},[f,e.onSelect,e.disabled]);function g(){var j,T;x(),(T=(j=d.current).onSelect)==null||T.call(j,m.current)}function x(){h.setState("value",m.current,!0)}if(!f)return null;let{disabled:b,value:w,onSelect:M,forceMount:$,keywords:E,...D}=e;return c.createElement(ne.div,{ref:Ne(o,n),...D,id:s,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!u,"data-disabled":!!b,"data-selected":!!u,onPointerMove:b||l.getDisablePointerSelection()?void 0:x,onClick:b?void 0:g},e.children)}),ta=c.forwardRef((e,n)=>{let{heading:t,children:a,forceMount:s,...o}=e,i=ge(),l=c.useRef(null),d=c.useRef(null),p=ge(),m=Oe(),h=he(f=>s||m.filter()===!1?!0:f.search?f.filtered.groups.has(i):!0);we(()=>m.group(i),[]),Tn(i,l,[e.value,e.heading,d]);let u=c.useMemo(()=>({id:i,forceMount:s}),[s]);return c.createElement(ne.div,{ref:Ne(l,n),...o,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&c.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:p},t),at(e,f=>c.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?p:void 0},c.createElement(_n.Provider,{value:u},f))))}),na=c.forwardRef((e,n)=>{let{alwaysRender:t,...a}=e,s=c.useRef(null),o=he(i=>!i.search);return!t&&!o?null:c.createElement(ne.div,{ref:Ne(s,n),...a,"cmdk-separator":"",role:"separator"})}),ra=c.forwardRef((e,n)=>{let{onValueChange:t,...a}=e,s=e.value!=null,o=Lt(),i=he(p=>p.search),l=he(p=>p.selectedItemId),d=Oe();return c.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),c.createElement(ne.input,{ref:n,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":l,id:d.inputId,type:"text",value:s?e.value:i,onChange:p=>{s||o.setState("search",p.target.value),t==null||t(p.target.value)}})}),sa=c.forwardRef((e,n)=>{let{children:t,label:a="Suggestions",...s}=e,o=c.useRef(null),i=c.useRef(null),l=he(p=>p.selectedItemId),d=Oe();return c.useEffect(()=>{if(i.current&&o.current){let p=i.current,m=o.current,h,u=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=p.offsetHeight;m.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return u.observe(p),()=>{cancelAnimationFrame(h),u.unobserve(p)}}},[]),c.createElement(ne.div,{ref:Ne(o,n),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":a,id:d.listId},at(e,p=>c.createElement("div",{ref:Ne(i,d.listInnerRef),"cmdk-list-sizer":""},p)))}),aa=c.forwardRef((e,n)=>{let{open:t,onOpenChange:a,overlayClassName:s,contentClassName:o,container:i,...l}=e;return c.createElement(Pr,{open:t,onOpenChange:a},c.createElement(Ar,{container:i},c.createElement(Rr,{"cmdk-overlay":"",className:s}),c.createElement(Mr,{"aria-label":e.label,"cmdk-dialog":"",className:o},c.createElement(Dn,{ref:n,...l}))))}),oa=c.forwardRef((e,n)=>he(t=>t.filtered.count===0)?c.createElement(ne.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),ia=c.forwardRef((e,n)=>{let{progress:t,children:a,label:s="Loading...",...o}=e;return c.createElement(ne.div,{ref:n,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},at(e,i=>c.createElement("div",{"aria-hidden":!0},i)))}),re=Object.assign(Dn,{List:sa,Item:ea,Input:ra,Group:ta,Separator:na,Dialog:aa,Empty:oa,Loading:ia});function la(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function ca(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function Ln(e){let n=c.useRef(e);return we(()=>{n.current=e}),n}var we=typeof window>"u"?c.useEffect:c.useLayoutEffect;function ke(e){let n=c.useRef();return n.current===void 0&&(n.current=e()),n}function he(e){let n=Lt(),t=()=>e(n.snapshot());return c.useSyncExternalStore(n.subscribe,t,t)}function Tn(e,n,t,a=[]){let s=c.useRef(),o=Oe();return we(()=>{var i;let l=(()=>{var p;for(let m of t){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(p=m.current.textContent)==null?void 0:p.trim():s.current}})(),d=a.map(p=>p.trim());o.value(e,l,d),(i=n.current)==null||i.setAttribute(je,l),s.current=l}),s}var da=()=>{let[e,n]=c.useState(),t=ke(()=>new Map);return we(()=>{t.current.forEach(a=>a()),t.current=new Map},[e]),(a,s)=>{t.current.set(a,s),n({})}};function ua(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function at({asChild:e,children:n},t){return e&&c.isValidElement(n)?c.cloneElement(ua(n),{ref:n.ref},t(n.props.children)):t(n)}var pa={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const In=c.forwardRef(({className:e,...n},t)=>r.jsx(re,{ref:t,className:pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));In.displayName=re.displayName;const ma=({children:e,...n})=>r.jsx(ln,{...n,children:r.jsx(cn,{className:"overflow-hidden p-0 shadow-lg",children:r.jsx(In,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})})}),Bn=c.forwardRef(({className:e,...n},t)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Te,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(re.Input,{ref:t,className:pe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Bn.displayName=re.Input.displayName;const On=c.forwardRef(({className:e,...n},t)=>r.jsx(re.List,{ref:t,className:pe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));On.displayName=re.List.displayName;const kt=c.forwardRef((e,n)=>r.jsx(re.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));kt.displayName=re.Empty.displayName;const Fn=c.forwardRef(({className:e,...n},t)=>r.jsx(re.Group,{ref:t,className:pe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));Fn.displayName=re.Group.displayName;const ha=c.forwardRef(({className:e,...n},t)=>r.jsx(re.Separator,{ref:t,className:pe("-mx-1 h-px bg-border",e),...n}));ha.displayName=re.Separator.displayName;const Hn=c.forwardRef(({className:e,...n},t)=>r.jsx(re.Item,{ref:t,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e),...n}));Hn.displayName=re.Item.displayName;function fa(e,n){const[t,a]=c.useState(e);return c.useEffect(()=>{const s=setTimeout(()=>{a(e)},n);return()=>{clearTimeout(s)}},[e,n]),t}function va(){const[e,n]=c.useState(!1),[t,a]=c.useState(""),[s,o]=c.useState(!1),[,i]=$t(),[l,d]=c.useState(void 0),[p,m]=c.useState(void 0),[h,u]=c.useState(void 0),[f,g]=c.useState(void 0),x=fa(t,300),{data:b}=oe.clients.list.useQuery(),{data:w,isLoading:M}=oe.search.global.useQuery({query:x,limit:20,type:l,framework:p,status:h,clientId:f},{enabled:x.length>0});c.useEffect(()=>{const A=B=>{B.key==="k"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),n(N=>!N))};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[]);const $=c.useCallback(A=>{n(!1),a(""),E(),i(A)},[i]),E=()=>{d(void 0),m(void 0),u(void 0),g(void 0)},D=l||p||h||f,j=A=>{switch(A){case"control":return r.jsx(de,{className:"h-4 w-4 text-blue-500"});case"policy":return r.jsx(ce,{className:"h-4 w-4 text-green-500"});case"evidence":return r.jsx(De,{className:"h-4 w-4 text-purple-500"});case"client":return r.jsx(et,{className:"h-4 w-4 text-orange-500"});default:return r.jsx(Te,{className:"h-4 w-4"})}},T=A=>{switch(A){case"control":return"Control";case"policy":return"Policy";case"evidence":return"Evidence";case"client":return"Client";default:return A}},Z=w==null?void 0:w.reduce((A,B)=>(A[B.type]||(A[B.type]=[]),A[B.type].push(B),A),{});return r.jsxs(r.Fragment,{children:[r.jsxs(Q,{variant:"outline",className:"relative h-9 w-full justify-start rounded-md bg-muted/50 text-sm font-normal text-muted-foreground shadow-none sm:pr-12 md:w-40 lg:w-64",onClick:()=>n(!0),children:[r.jsx(Te,{className:"mr-2 h-4 w-4"}),r.jsx("span",{className:"hidden lg:inline-flex",children:"Search..."}),r.jsx("span",{className:"inline-flex lg:hidden",children:"Search"}),r.jsxs("kbd",{className:"pointer-events-none absolute right-1.5 top-1.5 hidden h-6 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[r.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),r.jsxs(ma,{open:e,onOpenChange:n,children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx(Bn,{placeholder:"Search controls, policies, evidence, clients...",value:t,onValueChange:a}),r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[r.jsxs(Q,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>o(!s),children:[r.jsx(ws,{className:"h-3 w-3 mr-1"}),"Filters",D&&r.jsx("span",{className:"ml-1 bg-primary text-primary-foreground rounded-full px-1.5 text-[10px]",children:[l,p,h,f].filter(Boolean).length})]}),D&&r.jsxs(Q,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground",onClick:E,children:[r.jsx(Et,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),s&&r.jsxs("div",{className:"grid grid-cols-2 gap-2 p-3 border-b bg-muted/30",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Type"}),r.jsxs(ze,{value:l||"all",onValueChange:A=>d(A==="all"?void 0:A),children:[r.jsx(We,{className:"h-8 text-xs",children:r.jsx(Ve,{placeholder:"All types"})}),r.jsxs(Ue,{children:[r.jsx(V,{value:"all",children:"All types"}),r.jsx(V,{value:"control",children:"Controls"}),r.jsx(V,{value:"policy",children:"Policies"}),r.jsx(V,{value:"evidence",children:"Evidence"}),r.jsx(V,{value:"client",children:"Clients"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Framework"}),r.jsxs(ze,{value:p||"all",onValueChange:A=>m(A==="all"?void 0:A),children:[r.jsx(We,{className:"h-8 text-xs",children:r.jsx(Ve,{placeholder:"All frameworks"})}),r.jsxs(Ue,{children:[r.jsx(V,{value:"all",children:"All frameworks"}),r.jsx(V,{value:"ISO 27001",children:"ISO 27001"}),r.jsx(V,{value:"SOC 2",children:"SOC 2"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Status"}),r.jsxs(ze,{value:h||"all",onValueChange:A=>u(A==="all"?void 0:A),children:[r.jsx(We,{className:"h-8 text-xs",children:r.jsx(Ve,{placeholder:"All statuses"})}),r.jsxs(Ue,{children:[r.jsx(V,{value:"all",children:"All statuses"}),r.jsx(V,{value:"not_started",children:"Not Started"}),r.jsx(V,{value:"in_progress",children:"In Progress"}),r.jsx(V,{value:"implemented",children:"Implemented"}),r.jsx(V,{value:"draft",children:"Draft"}),r.jsx(V,{value:"review",children:"Review"}),r.jsx(V,{value:"approved",children:"Approved"}),r.jsx(V,{value:"pending",children:"Pending"}),r.jsx(V,{value:"verified",children:"Verified"}),r.jsx(V,{value:"expired",children:"Expired"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Client"}),r.jsxs(ze,{value:(f==null?void 0:f.toString())||"all",onValueChange:A=>g(A==="all"?void 0:parseInt(A)),children:[r.jsx(We,{className:"h-8 text-xs",children:r.jsx(Ve,{placeholder:"All clients"})}),r.jsxs(Ue,{children:[r.jsx(V,{value:"all",children:"All clients"}),b==null?void 0:b.map(A=>r.jsx(V,{value:A.id.toString(),children:A.name},A.id))]})]})]})]})]}),r.jsxs(On,{children:[M&&x.length>0&&r.jsx("div",{className:"flex items-center justify-center py-6",children:r.jsx(dn,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!M&&x.length>0&&(!w||w.length===0)&&r.jsx(kt,{children:"No results found."}),!M&&x.length===0&&r.jsx(kt,{children:"Start typing to search..."}),Z&&Object.entries(Z).map(([A,B])=>r.jsx(Fn,{heading:`${T(A)}s`,children:B==null?void 0:B.map(N=>r.jsxs(Hn,{value:`${N.type}-${N.id}-${N.title}`,onSelect:()=>$(N.url),className:"flex items-center gap-3 cursor-pointer",children:[j(N.type),r.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[r.jsx("span",{className:"font-medium truncate",children:N.title}),r.jsxs("span",{className:"text-xs text-muted-foreground truncate",children:[N.description,N.clientName&&` • ${N.clientName}`]})]}),N.framework&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:N.framework}),N.status&&r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${N.status==="implemented"||N.status==="approved"||N.status==="verified"?"bg-green-100 text-green-700":N.status==="in_progress"||N.status==="review"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:N.status.replace("_"," ")})]},`${N.type}-${N.id}`))},A))]})]})]})}function ga({clientId:e}){const{isOpen:n,toggleChat:t,setClientId:a}=_t();return c.useEffect(()=>{e!==void 0&&a(e)},[e,a]),n?null:r.jsx(Q,{onClick:t,className:"fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg bg-gradient-to-br from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 z-40 transition-transform hover:scale-105 active:scale-95",title:"Open AI Compliance Advisor",children:r.jsx(Ie,{className:"w-6 h-6 text-white"})})}function ba(){const{isOpen:e,closeChat:n,messages:t,sendMessage:a,isLoading:s}=_t(),[o,i]=c.useState(""),l=c.useRef(null),d=()=>{var h;(h=l.current)==null||h.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{e&&d()},[t,e]);const p=()=>{!o.trim()||s||(a(o),i(""))},m=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),p())};return e?r.jsxs("div",{className:"fixed bottom-0 right-0 w-96 h-[600px] bg-white shadow-2xl rounded-tl-lg border-l border-t border-gray-200 z-50 flex flex-col animate-in slide-in-from-bottom duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-slate-50 to-white",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-sm",children:r.jsx(Ie,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Compliance Advisor"}),r.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AI Powered"})]})]}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0 hover:bg-slate-100 rounded-full",children:r.jsx(Et,{className:"w-4 h-4 text-gray-500"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50",children:[t.length===0?r.jsxs("div",{className:"text-center text-gray-500 mt-12 px-6",children:[r.jsx("div",{className:"bg-white p-4 rounded-full w-16 h-16 mx-auto mb-4 shadow-sm flex items-center justify-center",children:r.jsx(Ls,{className:"w-8 h-8 text-blue-500"})}),r.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"How can I help?"}),r.jsx("p",{className:"text-sm",children:"Ask me about controls, policies, or import strategies."}),r.jsxs("div",{className:"mt-6 space-y-2",children:[r.jsx("button",{onClick:()=>a("How do I implement Access Control?"),className:"block w-full text-xs bg-white border border-gray-200 p-2 rounded-md hover:border-blue-300 hover:text-blue-600 transition-colors text-left",children:'"How do I implement Access Control?"'}),r.jsx("button",{onClick:()=>a("What evidence is needed for AC-2?"),className:"block w-full text-xs bg-white border border-gray-200 p-2 rounded-md hover:border-blue-300 hover:text-blue-600 transition-colors text-left",children:'"What evidence is needed for AC-2?"'})]})]}):t.map(h=>r.jsx("div",{className:`flex ${h.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-[85%] rounded-2xl p-3.5 shadow-sm text-sm ${h.role==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-white text-gray-800 border border-gray-100 rounded-bl-sm"}`,children:r.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:h.content})})},h.id)),s&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white rounded-2xl rounded-bl-sm p-3 border border-gray-100 shadow-sm",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),r.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),r.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"})]})})}),r.jsx("div",{ref:l})]}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:r.jsxs("div",{className:"flex gap-2 relative",children:[r.jsx("textarea",{value:o,onChange:h=>i(h.target.value),onKeyPress:m,placeholder:"Ask a question...",className:"flex-1 resize-none rounded-xl border border-gray-200 pl-4 pr-12 py-3 text-sm text-gray-900 placeholder:text-gray-400 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white transition-all shadow-sm",rows:1,style:{minHeight:"44px",maxHeight:"120px"},disabled:s}),r.jsx(Q,{onClick:p,disabled:!o.trim()||s,size:"icon",className:`absolute right-1.5 top-1.5 h-8 w-8 rounded-lg transition-all ${o.trim()?"bg-blue-600 hover:bg-blue-700":"bg-gray-200 text-gray-400 hover:bg-gray-200"}`,children:r.jsx(ys,{className:"w-4 h-4"})})]})})]}):null}function xa(){const{openChat:e,activeContext:n}=_t(),t=()=>{const a=(n==null?void 0:n.pageTitle)||"this page";e(`Can you help me understand ${a}?`)};return r.jsx(Q,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-colors",title:"Get AI Assistance for this page",children:r.jsx(Ts,{className:"w-5 h-5"})})}let Nt={},zn;function ft(e={}){Nt={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function y(e){return e?Nt[e]:Nt}function wa(e){zn=e}function se(){return zn}let rt={};function Xe(e,n){rt[e]=n}function be(e){var n;(n=rt[e])==null||n.call(rt)}function ya(){rt={}}function Qe(e,n,t,a){return(e/=a/2)<1?t/2*e*e+n:-t/2*(--e*(e-2)-1)+n}function Wn(e){const n='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(t=>{const a=t.matches(n),s=Array.from(t.querySelectorAll(n));return[...a?[t]:[],...s]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&ja(t))}function Vn(e){if(!e||Sa(e))return;const n=y("smoothScroll"),t=e.offsetHeight>window.innerHeight;e.scrollIntoView({behavior:!n||Ca(e)?"auto":"smooth",inline:"center",block:t?"start":"center"})}function Ca(e){if(!e||!e.parentElement)return;const n=e.parentElement;return n.scrollHeight>n.clientHeight}function Sa(e){const n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}function ja(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let st={};function Y(e,n){st[e]=n}function C(e){return e?st[e]:st}function tn(){st={}}function ka(e,n,t,a){let s=C("__activeStagePosition");const o=s||t.getBoundingClientRect(),i=a.getBoundingClientRect(),l=Qe(e,o.x,i.x-o.x,n),d=Qe(e,o.y,i.y-o.y,n),p=Qe(e,o.width,i.width-o.width,n),m=Qe(e,o.height,i.height-o.height,n);s={x:l,y:d,width:p,height:m},Gn(s),Y("__activeStagePosition",s)}function Un(e){if(!e)return;const n=e.getBoundingClientRect(),t={x:n.x,y:n.y,width:n.width,height:n.height};Y("__activeStagePosition",t),Gn(t)}function Na(){const e=C("__activeStagePosition"),n=C("__overlaySvg");if(!e)return;if(!n){console.warn("No stage svg found.");return}const t=window.innerWidth,a=window.innerHeight;n.setAttribute("viewBox",`0 0 ${t} ${a}`)}function Pa(e){const n=Aa(e);document.body.appendChild(n),Yn(n,t=>{t.target.tagName==="path"&&be("overlayClick")}),Y("__overlaySvg",n)}function Gn(e){const n=C("__overlaySvg");if(!n){Pa(e);return}const t=n.firstElementChild;if((t==null?void 0:t.tagName)!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",Kn(e))}function Aa(e){const n=window.innerWidth,t=window.innerHeight,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.classList.add("driver-overlay","driver-overlay-animated"),a.setAttribute("viewBox",`0 0 ${n} ${t}`),a.setAttribute("xmlSpace","preserve"),a.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),a.setAttribute("version","1.1"),a.setAttribute("preserveAspectRatio","xMinYMin slice"),a.style.fillRule="evenodd",a.style.clipRule="evenodd",a.style.strokeLinejoin="round",a.style.strokeMiterlimit="2",a.style.zIndex="10000",a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%";const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",Kn(e)),s.style.fill=y("overlayColor")||"rgb(0,0,0)",s.style.opacity=`${y("overlayOpacity")}`,s.style.pointerEvents="auto",s.style.cursor="auto",a.appendChild(s),a}function Kn(e){const n=window.innerWidth,t=window.innerHeight,a=y("stagePadding")||0,s=y("stageRadius")||0,o=e.width+a*2,i=e.height+a*2,l=Math.min(s,o/2,i/2),d=Math.floor(Math.max(l,0)),p=e.x-a+d,m=e.y-a,h=o-d*2,u=i-d*2;return`M${n},0L0,0L0,${t}L${n},${t}L${n},0Z
    M${p},${m} h${h} a${d},${d} 0 0 1 ${d},${d} v${u} a${d},${d} 0 0 1 -${d},${d} h-${h} a${d},${d} 0 0 1 -${d},-${d} v-${u} a${d},${d} 0 0 1 ${d},-${d} z`}function Ra(){const e=C("__overlaySvg");e&&e.remove()}function Ma(){const e=document.getElementById("driver-dummy-element");if(e)return e;let n=document.createElement("div");return n.id="driver-dummy-element",n.style.width="0",n.style.height="0",n.style.pointerEvents="none",n.style.opacity="0",n.style.position="fixed",n.style.top="50%",n.style.left="50%",document.body.appendChild(n),n}function nn(e){const{element:n}=e;let t=typeof n=="function"?n():typeof n=="string"?document.querySelector(n):n;t||(t=Ma()),Ea(t,e)}function $a(){const e=C("__activeElement"),n=C("__activeStep");e&&(Un(e),Na(),Qn(e,n))}function Ea(e,n){var t;const a=Date.now(),s=C("__activeStep"),o=C("__activeElement")||e,i=!o||o===e,l=e.id==="driver-dummy-element",d=o.id==="driver-dummy-element",p=y("animate"),m=n.onHighlightStarted||y("onHighlightStarted"),h=(n==null?void 0:n.onHighlighted)||y("onHighlighted"),u=(s==null?void 0:s.onDeselected)||y("onDeselected"),f=y(),g=C();!i&&u&&u(d?void 0:o,s,{config:f,state:g,driver:se()}),m&&m(l?void 0:e,n,{config:f,state:g,driver:se()});const x=!i&&p;let b=!1;Ia(),Y("previousStep",s),Y("previousElement",o),Y("activeStep",n),Y("activeElement",e);const w=()=>{if(C("__transitionCallback")!==w)return;const M=Date.now()-a,$=400-M<=400/2;n.popover&&$&&!b&&x&&(rn(e,n),b=!0),y("animate")&&M<400?ka(M,400,o,e):(Un(e),h&&h(l?void 0:e,n,{config:y(),state:C(),driver:se()}),Y("__transitionCallback",void 0),Y("__previousStep",s),Y("__previousElement",o),Y("__activeStep",n),Y("__activeElement",e)),window.requestAnimationFrame(w)};Y("__transitionCallback",w),window.requestAnimationFrame(w),Vn(e),!x&&n.popover&&rn(e,n),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),((t=n.disableActiveInteraction)!=null?t:y("disableActiveInteraction"))&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function _a(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(n=>{n.classList.remove("driver-active-element","driver-no-interaction"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-controls")})}function Be(){const e=C("__resizeTimeout");e&&window.cancelAnimationFrame(e),Y("__resizeTimeout",window.requestAnimationFrame($a))}function Da(e){var n;if(!C("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const t=C("__activeElement"),a=(n=C("popover"))==null?void 0:n.wrapper,s=Wn([...a?[a]:[],...t?[t]:[]]),o=s[0],i=s[s.length-1];if(e.preventDefault(),e.shiftKey){const l=s[s.indexOf(document.activeElement)-1]||i;l==null||l.focus()}else{const l=s[s.indexOf(document.activeElement)+1]||o;l==null||l.focus()}}function qn(e){var n;((n=y("allowKeyboardControl"))==null||n)&&(e.key==="Escape"?be("escapePress"):e.key==="ArrowRight"?be("arrowRightPress"):e.key==="ArrowLeft"&&be("arrowLeftPress"))}function Yn(e,n,t){const a=(s,o)=>{const i=s.target;e.contains(i)&&((!t||t(i))&&(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation()),o==null||o(s))};document.addEventListener("pointerdown",a,!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerup",a,!0),document.addEventListener("mouseup",a,!0),document.addEventListener("click",s=>{a(s,n)},!0)}function La(){window.addEventListener("keyup",qn,!1),window.addEventListener("keydown",Da,!1),window.addEventListener("resize",Be),window.addEventListener("scroll",Be)}function Ta(){window.removeEventListener("keyup",qn),window.removeEventListener("resize",Be),window.removeEventListener("scroll",Be)}function Ia(){const e=C("popover");e&&(e.wrapper.style.display="none")}function rn(e,n){var t,a;let s=C("popover");s&&document.body.removeChild(s.wrapper),s=Oa(),document.body.appendChild(s.wrapper);const{title:o,description:i,showButtons:l,disableButtons:d,showProgress:p,nextBtnText:m=y("nextBtnText")||"Next &rarr;",prevBtnText:h=y("prevBtnText")||"&larr; Previous",progressText:u=y("progressText")||"{current} of {total}"}=n.popover||{};s.nextButton.innerHTML=m,s.previousButton.innerHTML=h,s.progress.innerHTML=u,o?(s.title.innerHTML=o,s.title.style.display="block"):s.title.style.display="none",i?(s.description.innerHTML=i,s.description.style.display="block"):s.description.style.display="none";const f=l||y("showButtons"),g=p||y("showProgress")||!1,x=(f==null?void 0:f.includes("next"))||(f==null?void 0:f.includes("previous"))||g;s.closeButton.style.display=f.includes("close")?"block":"none",x?(s.footer.style.display="flex",s.progress.style.display=g?"block":"none",s.nextButton.style.display=f.includes("next")?"block":"none",s.previousButton.style.display=f.includes("previous")?"block":"none"):s.footer.style.display="none";const b=d||y("disableButtons")||[];b!=null&&b.includes("next")&&(s.nextButton.disabled=!0,s.nextButton.classList.add("driver-popover-btn-disabled")),b!=null&&b.includes("previous")&&(s.previousButton.disabled=!0,s.previousButton.classList.add("driver-popover-btn-disabled")),b!=null&&b.includes("close")&&(s.closeButton.disabled=!0,s.closeButton.classList.add("driver-popover-btn-disabled"));const w=s.wrapper;w.style.display="block",w.style.left="",w.style.top="",w.style.bottom="",w.style.right="",w.id="driver-popover-content",w.setAttribute("role","dialog"),w.setAttribute("aria-labelledby","driver-popover-title"),w.setAttribute("aria-describedby","driver-popover-description");const M=s.arrow;M.className="driver-popover-arrow";const $=((t=n.popover)==null?void 0:t.popoverClass)||y("popoverClass")||"";w.className=`driver-popover ${$}`.trim(),Yn(s.wrapper,T=>{var Z,A,B;const N=T.target,U=((Z=n.popover)==null?void 0:Z.onNextClick)||y("onNextClick"),G=((A=n.popover)==null?void 0:A.onPrevClick)||y("onPrevClick"),X=((B=n.popover)==null?void 0:B.onCloseClick)||y("onCloseClick");if(N.closest(".driver-popover-next-btn"))return U?U(e,n,{config:y(),state:C(),driver:se()}):be("nextClick");if(N.closest(".driver-popover-prev-btn"))return G?G(e,n,{config:y(),state:C(),driver:se()}):be("prevClick");if(N.closest(".driver-popover-close-btn"))return X?X(e,n,{config:y(),state:C(),driver:se()}):be("closeClick")},T=>!(s!=null&&s.description.contains(T))&&!(s!=null&&s.title.contains(T))&&typeof T.className=="string"&&T.className.includes("driver-popover")),Y("popover",s);const E=((a=n.popover)==null?void 0:a.onPopoverRender)||y("onPopoverRender");E&&E(s,{config:y(),state:C(),driver:se()}),Qn(e,n),Vn(w);const D=e.classList.contains("driver-dummy-element"),j=Wn([w,...D?[]:[e]]);j.length>0&&j[0].focus()}function Xn(){const e=C("popover");if(!(e!=null&&e.wrapper))return;const n=e.wrapper.getBoundingClientRect(),t=y("stagePadding")||0,a=y("popoverOffset")||0;return{width:n.width+t+a,height:n.height+t+a,realWidth:n.width,realHeight:n.height}}function sn(e,n){const{elementDimensions:t,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:o}=n;return e==="start"?Math.max(Math.min(t.top-s,window.innerHeight-a.realHeight-o.width),o.width):e==="end"?Math.max(Math.min(t.top-(a==null?void 0:a.realHeight)+t.height+s,window.innerHeight-(a==null?void 0:a.realHeight)-o.width),o.width):e==="center"?Math.max(Math.min(t.top+t.height/2-(a==null?void 0:a.realHeight)/2,window.innerHeight-(a==null?void 0:a.realHeight)-o.width),o.width):0}function an(e,n){const{elementDimensions:t,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:o}=n;return e==="start"?Math.max(Math.min(t.left-s,window.innerWidth-a.realWidth-o.width),o.width):e==="end"?Math.max(Math.min(t.left-(a==null?void 0:a.realWidth)+t.width+s,window.innerWidth-(a==null?void 0:a.realWidth)-o.width),o.width):e==="center"?Math.max(Math.min(t.left+t.width/2-(a==null?void 0:a.realWidth)/2,window.innerWidth-(a==null?void 0:a.realWidth)-o.width),o.width):0}function Qn(e,n){const t=C("popover");if(!t)return;const{align:a="start",side:s="left"}=(n==null?void 0:n.popover)||{},o=a,i=e.id==="driver-dummy-element"?"over":s,l=y("stagePadding")||0,d=Xn(),p=t.arrow.getBoundingClientRect(),m=e.getBoundingClientRect(),h=m.top-d.height;let u=h>=0;const f=window.innerHeight-(m.bottom+d.height);let g=f>=0;const x=m.left-d.width;let b=x>=0;const w=window.innerWidth-(m.right+d.width);let M=w>=0;const $=!u&&!g&&!b&&!M;let E=i;if(i==="top"&&u?M=b=g=!1:i==="bottom"&&g?M=b=u=!1:i==="left"&&b?M=u=g=!1:i==="right"&&M&&(b=u=g=!1),i==="over"){const D=window.innerWidth/2-d.realWidth/2,j=window.innerHeight/2-d.realHeight/2;t.wrapper.style.left=`${D}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${j}px`,t.wrapper.style.bottom="auto"}else if($){const D=window.innerWidth/2-(d==null?void 0:d.realWidth)/2,j=10;t.wrapper.style.left=`${D}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${j}px`,t.wrapper.style.top="auto"}else if(b){const D=Math.min(x,window.innerWidth-(d==null?void 0:d.realWidth)-p.width),j=sn(o,{elementDimensions:m,popoverDimensions:d,popoverPadding:l,popoverArrowDimensions:p});t.wrapper.style.left=`${D}px`,t.wrapper.style.top=`${j}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",E="left"}else if(M){const D=Math.min(w,window.innerWidth-(d==null?void 0:d.realWidth)-p.width),j=sn(o,{elementDimensions:m,popoverDimensions:d,popoverPadding:l,popoverArrowDimensions:p});t.wrapper.style.right=`${D}px`,t.wrapper.style.top=`${j}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",E="right"}else if(u){const D=Math.min(h,window.innerHeight-d.realHeight-p.width);let j=an(o,{elementDimensions:m,popoverDimensions:d,popoverPadding:l,popoverArrowDimensions:p});t.wrapper.style.top=`${D}px`,t.wrapper.style.left=`${j}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",E="top"}else if(g){const D=Math.min(f,window.innerHeight-(d==null?void 0:d.realHeight)-p.width);let j=an(o,{elementDimensions:m,popoverDimensions:d,popoverPadding:l,popoverArrowDimensions:p});t.wrapper.style.left=`${j}px`,t.wrapper.style.bottom=`${D}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",E="bottom"}$?t.arrow.classList.add("driver-popover-arrow-none"):Ba(o,E,e)}function Ba(e,n,t){const a=C("popover");if(!a)return;const s=t.getBoundingClientRect(),o=Xn(),i=a.arrow,l=o.width,d=window.innerWidth,p=s.width,m=s.left,h=o.height,u=window.innerHeight,f=s.top,g=s.height;i.className="driver-popover-arrow";let x=n,b=e;if(n==="top"?(m+p<=0?(x="right",b="end"):m+p-l<=0&&(x="top",b="start"),m>=d?(x="left",b="end"):m+l>=d&&(x="top",b="end")):n==="bottom"?(m+p<=0?(x="right",b="start"):m+p-l<=0&&(x="bottom",b="start"),m>=d?(x="left",b="start"):m+l>=d&&(x="bottom",b="end")):n==="left"?(f+g<=0?(x="bottom",b="end"):f+g-h<=0&&(x="left",b="start"),f>=u?(x="top",b="end"):f+h>=u&&(x="left",b="end")):n==="right"&&(f+g<=0?(x="bottom",b="start"):f+g-h<=0&&(x="right",b="start"),f>=u?(x="top",b="start"):f+h>=u&&(x="right",b="end")),!x)i.classList.add("driver-popover-arrow-none");else{i.classList.add(`driver-popover-arrow-side-${x}`),i.classList.add(`driver-popover-arrow-align-${b}`);const w=t.getBoundingClientRect(),M=i.getBoundingClientRect(),$=y("stagePadding")||0,E=w.left-$<window.innerWidth&&w.right+$>0&&w.top-$<window.innerHeight&&w.bottom+$>0;n==="bottom"&&E&&(M.x>w.x&&M.x+M.width<w.x+w.width?a.wrapper.style.transform="translateY(0)":(i.classList.remove(`driver-popover-arrow-align-${b}`),i.classList.add("driver-popover-arrow-none"),a.wrapper.style.transform=`translateY(-${$/2}px)`))}}function Oa(){const e=document.createElement("div");e.classList.add("driver-popover");const n=document.createElement("div");n.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const a=document.createElement("div");a.id="driver-popover-description",a.classList.add("driver-popover-description"),a.style.display="none",a.innerText="Popover description is here";const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-close-btn"),s.setAttribute("aria-label","Close"),s.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const i=document.createElement("span");i.classList.add("driver-popover-progress-text"),i.innerText="";const l=document.createElement("span");l.classList.add("driver-popover-navigation-btns");const d=document.createElement("button");d.type="button",d.classList.add("driver-popover-prev-btn"),d.innerHTML="&larr; Previous";const p=document.createElement("button");return p.type="button",p.classList.add("driver-popover-next-btn"),p.innerHTML="Next &rarr;",l.appendChild(d),l.appendChild(p),o.appendChild(i),o.appendChild(l),e.appendChild(s),e.appendChild(n),e.appendChild(t),e.appendChild(a),e.appendChild(o),{wrapper:e,arrow:n,title:t,description:a,footer:o,previousButton:d,nextButton:p,closeButton:s,footerButtons:l,progress:i}}function Fa(){var e;const n=C("popover");n&&((e=n.wrapper.parentElement)==null||e.removeChild(n.wrapper))}function Ha(e={}){ft(e);function n(){y("allowClose")&&m()}function t(){const u=y("overlayClickBehavior");if(y("allowClose")&&u==="close"){m();return}if(typeof u=="function"){const f=C("__activeStep"),g=C("__activeElement");u(g,f,{config:y(),state:C(),driver:se()});return}u==="nextStep"&&a()}function a(){const u=C("activeIndex"),f=y("steps")||[];if(typeof u>"u")return;const g=u+1;f[g]?p(g):m()}function s(){const u=C("activeIndex"),f=y("steps")||[];if(typeof u>"u")return;const g=u-1;f[g]?p(g):m()}function o(u){(y("steps")||[])[u]?p(u):m()}function i(){var u;if(C("__transitionCallback"))return;const f=C("activeIndex"),g=C("__activeStep"),x=C("__activeElement");if(typeof f>"u"||typeof g>"u"||typeof C("activeIndex")>"u")return;const b=((u=g.popover)==null?void 0:u.onPrevClick)||y("onPrevClick");if(b)return b(x,g,{config:y(),state:C(),driver:se()});s()}function l(){var u;if(C("__transitionCallback"))return;const f=C("activeIndex"),g=C("__activeStep"),x=C("__activeElement");if(typeof f>"u"||typeof g>"u")return;const b=((u=g.popover)==null?void 0:u.onNextClick)||y("onNextClick");if(b)return b(x,g,{config:y(),state:C(),driver:se()});a()}function d(){C("isInitialized")||(Y("isInitialized",!0),document.body.classList.add("driver-active",y("animate")?"driver-fade":"driver-simple"),La(),Xe("overlayClick",t),Xe("escapePress",n),Xe("arrowLeftPress",i),Xe("arrowRightPress",l))}function p(u=0){var f,g,x,b,w,M,$,E;const D=y("steps");if(!D){console.error("No steps to drive through"),m();return}if(!D[u]){m();return}Y("__activeOnDestroyed",document.activeElement),Y("activeIndex",u);const j=D[u],T=D[u+1],Z=D[u-1],A=((f=j.popover)==null?void 0:f.doneBtnText)||y("doneBtnText")||"Done",B=y("allowClose"),N=typeof((g=j.popover)==null?void 0:g.showProgress)<"u"?(x=j.popover)==null?void 0:x.showProgress:y("showProgress"),U=(((b=j.popover)==null?void 0:b.progressText)||y("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${D.length}`),G=((w=j.popover)==null?void 0:w.showButtons)||y("showButtons"),X=["next","previous",...B?["close"]:[]].filter(S=>!(G!=null&&G.length)||G.includes(S)),_=((M=j.popover)==null?void 0:M.onNextClick)||y("onNextClick"),q=(($=j.popover)==null?void 0:$.onPrevClick)||y("onPrevClick"),te=((E=j.popover)==null?void 0:E.onCloseClick)||y("onCloseClick");nn({...j,popover:{showButtons:X,nextBtnText:T?void 0:A,disableButtons:[...Z?[]:["previous"]],showProgress:N,progressText:U,onNextClick:_||(()=>{T?p(u+1):m()}),onPrevClick:q||(()=>{p(u-1)}),onCloseClick:te||(()=>{m()}),...(j==null?void 0:j.popover)||{}}})}function m(u=!0){const f=C("__activeElement"),g=C("__activeStep"),x=C("__activeOnDestroyed"),b=y("onDestroyStarted");if(u&&b){const $=!f||(f==null?void 0:f.id)==="driver-dummy-element";b($?void 0:f,g,{config:y(),state:C(),driver:se()});return}const w=(g==null?void 0:g.onDeselected)||y("onDeselected"),M=y("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Ta(),Fa(),_a(),Ra(),ya(),tn(),f&&g){const $=f.id==="driver-dummy-element";w&&w($?void 0:f,g,{config:y(),state:C(),driver:se()}),M&&M($?void 0:f,g,{config:y(),state:C(),driver:se()})}x&&x.focus()}const h={isActive:()=>C("isInitialized")||!1,refresh:Be,drive:(u=0)=>{d(),p(u)},setConfig:ft,setSteps:u=>{tn(),ft({...y(),steps:u})},getConfig:y,getState:C,getActiveIndex:()=>C("activeIndex"),isFirstStep:()=>C("activeIndex")===0,isLastStep:()=>{const u=y("steps")||[],f=C("activeIndex");return f!==void 0&&f===u.length-1},getActiveStep:()=>C("activeStep"),getActiveElement:()=>C("activeElement"),getPreviousElement:()=>C("previousElement"),getPreviousStep:()=>C("previousStep"),moveNext:a,movePrevious:s,moveTo:o,hasNextStep:()=>{const u=y("steps")||[],f=C("activeIndex");return f!==void 0&&!!u[f+1]},hasPreviousStep:()=>{const u=y("steps")||[],f=C("activeIndex");return f!==void 0&&!!u[f-1]},highlight:u=>{d(),nn({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{m(!1)}};return wa(h),h}const za=c.createContext({startTour:()=>{}}),Wa=({children:e})=>{const{user:n}=Dt(),t=oe.useUtils(),{data:a}=oe.users.me.useQuery(void 0,{enabled:!!n}),s=oe.users.completeTour.useMutation({onSuccess:()=>{t.users.me.invalidate()}}),o=()=>{const i=Ha({showProgress:!0,animate:!0,doneBtnText:"Finish",nextBtnText:"Next",prevBtnText:"Previous",allowClose:!0,steps:[{popover:{title:"Welcome to GRCompliance",description:"Let us show you around your new compliance operating system.",align:"center"}},{element:'[data-tour="sidebar-dashboard"]',popover:{title:"Dashboard",description:"Your central hub for monitoring compliance status across all clients.",side:"right"}},{element:'[data-tour="client-switcher"]',popover:{title:"Client Management",description:"Switch between different client workspaces here.",side:"right"}},{element:'[data-tour="sidebar-clients"]',popover:{title:"Clients List",description:"View and manage all your client organizations.",side:"right"}},{element:'[data-tour="user-menu"]',popover:{title:"Profile & Settings",description:"Manage your account settings and preferences here.",side:"left"}}],onDestroyStarted:()=>{a!=null&&a.hasSeenTour||s.mutate(),i.destroy()}});i.drive()};return c.useEffect(()=>{if(a&&!a.hasSeenTour&&!s.isLoading&&!s.isSuccess){const i=setTimeout(()=>{o()},1500);return()=>clearTimeout(i)}},[a]),r.jsx(za.Provider,{value:{startTour:o},children:e})};var Zn=["PageUp","PageDown"],Jn=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],er={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ae="Slider",[Pt,Va,Ua]=$r(Ae),[tr]=mn(Ae,[Ua]),[Ga,ot]=tr(Ae),nr=c.forwardRef((e,n)=>{const{name:t,min:a=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:p=[a],value:m,onValueChange:h=()=>{},onValueCommit:u=()=>{},inverted:f=!1,form:g,...x}=e,b=c.useRef(new Set),w=c.useRef(0),$=i==="horizontal"?Ka:qa,[E=[],D]=un({prop:m,defaultProp:p,onChange:N=>{var G;(G=[...b.current][w.current])==null||G.focus(),h(N)}}),j=c.useRef(E);function T(N){const U=Ja(E,N);B(N,U)}function Z(N){B(N,w.current)}function A(){const N=j.current[w.current];E[w.current]!==N&&u(E)}function B(N,U,{commit:G}={commit:!1}){const X=ro(o),_=so(Math.round((N-a)/o)*o+a,X),q=pn(_,[a,s]);D((te=[])=>{const S=Qa(te,q,U);if(no(S,d*o)){w.current=S.indexOf(q);const ie=String(S)!==String(te);return ie&&G&&u(S),ie?S:te}else return te})}return r.jsx(Ga,{scope:e.__scopeSlider,name:t,disabled:l,min:a,max:s,valueIndexToChangeRef:w,thumbs:b.current,values:E,orientation:i,form:g,children:r.jsx(Pt.Provider,{scope:e.__scopeSlider,children:r.jsx(Pt.Slot,{scope:e.__scopeSlider,children:r.jsx($,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:n,onPointerDown:le(x.onPointerDown,()=>{l||(j.current=E)}),min:a,max:s,inverted:f,onSlideStart:l?void 0:T,onSlideMove:l?void 0:Z,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&B(a,0,{commit:!0}),onEndKeyDown:()=>!l&&B(s,E.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:U})=>{if(!l){const _=Zn.includes(N.key)||N.shiftKey&&Jn.includes(N.key)?10:1,q=w.current,te=E[q],S=o*_*U;B(te+S,q,{commit:!0})}}})})})})});nr.displayName=Ae;var[rr,sr]=tr(Ae,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ka=c.forwardRef((e,n)=>{const{min:t,max:a,dir:s,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onStepKeyDown:p,...m}=e,[h,u]=c.useState(null),f=fe(n,$=>u($)),g=c.useRef(void 0),x=Er(s),b=x==="ltr",w=b&&!o||!b&&o;function M($){const E=g.current||h.getBoundingClientRect(),D=[0,E.width],T=Tt(D,w?[t,a]:[a,t]);return g.current=E,T($-E.left)}return r.jsx(rr,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:r.jsx(ar,{dir:x,"data-orientation":"horizontal",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:$=>{const E=M($.clientX);i==null||i(E)},onSlideMove:$=>{const E=M($.clientX);l==null||l(E)},onSlideEnd:()=>{g.current=void 0,d==null||d()},onStepKeyDown:$=>{const D=er[w?"from-left":"from-right"].includes($.key);p==null||p({event:$,direction:D?-1:1})}})})}),qa=c.forwardRef((e,n)=>{const{min:t,max:a,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:d,...p}=e,m=c.useRef(null),h=fe(n,m),u=c.useRef(void 0),f=!s;function g(x){const b=u.current||m.current.getBoundingClientRect(),w=[0,b.height],$=Tt(w,f?[a,t]:[t,a]);return u.current=b,$(x-b.top)}return r.jsx(rr,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:r.jsx(ar,{"data-orientation":"vertical",...p,ref:h,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=g(x.clientY);o==null||o(b)},onSlideMove:x=>{const b=g(x.clientY);i==null||i(b)},onSlideEnd:()=>{u.current=void 0,l==null||l()},onStepKeyDown:x=>{const w=er[f?"from-bottom":"from-top"].includes(x.key);d==null||d({event:x,direction:w?-1:1})}})})}),ar=c.forwardRef((e,n)=>{const{__scopeSlider:t,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:d,...p}=e,m=ot(Ae,t);return r.jsx(ne.span,{...p,ref:n,onKeyDown:le(e.onKeyDown,h=>{h.key==="Home"?(i(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Zn.concat(Jn).includes(h.key)&&(d(h),h.preventDefault())}),onPointerDown:le(e.onPointerDown,h=>{const u=h.target;u.setPointerCapture(h.pointerId),h.preventDefault(),m.thumbs.has(u)?u.focus():a(h)}),onPointerMove:le(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:le(e.onPointerUp,h=>{const u=h.target;u.hasPointerCapture(h.pointerId)&&(u.releasePointerCapture(h.pointerId),o(h))})})}),or="SliderTrack",ir=c.forwardRef((e,n)=>{const{__scopeSlider:t,...a}=e,s=ot(or,t);return r.jsx(ne.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...a,ref:n})});ir.displayName=or;var At="SliderRange",lr=c.forwardRef((e,n)=>{const{__scopeSlider:t,...a}=e,s=ot(At,t),o=sr(At,t),i=c.useRef(null),l=fe(n,i),d=s.values.length,p=s.values.map(u=>ur(u,s.min,s.max)),m=d>1?Math.min(...p):0,h=100-Math.max(...p);return r.jsx(ne.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...a,ref:l,style:{...e.style,[o.startEdge]:m+"%",[o.endEdge]:h+"%"}})});lr.displayName=At;var Rt="SliderThumb",cr=c.forwardRef((e,n)=>{const t=Va(e.__scopeSlider),[a,s]=c.useState(null),o=fe(n,l=>s(l)),i=c.useMemo(()=>a?t().findIndex(l=>l.ref.current===a):-1,[t,a]);return r.jsx(Ya,{...e,ref:o,index:i})}),Ya=c.forwardRef((e,n)=>{const{__scopeSlider:t,index:a,name:s,...o}=e,i=ot(Rt,t),l=sr(Rt,t),[d,p]=c.useState(null),m=fe(n,M=>p(M)),h=d?i.form||!!d.closest("form"):!0,u=_r(d),f=i.values[a],g=f===void 0?0:ur(f,i.min,i.max),x=Za(a,i.values.length),b=u==null?void 0:u[l.size],w=b?eo(b,g,l.direction):0;return c.useEffect(()=>{if(d)return i.thumbs.add(d),()=>{i.thumbs.delete(d)}},[d,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${w}px)`},children:[r.jsx(Pt.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(ne.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":f,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:m,style:f===void 0?{display:"none"}:e.style,onFocus:le(e.onFocus,()=>{i.valueIndexToChangeRef.current=a})})}),h&&r.jsx(dr,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:f},a)]})});cr.displayName=Rt;var Xa="RadioBubbleInput",dr=c.forwardRef(({__scopeSlider:e,value:n,...t},a)=>{const s=c.useRef(null),o=fe(s,a),i=Dr(n);return c.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&m){const h=new Event("input",{bubbles:!0});m.call(l,n),l.dispatchEvent(h)}},[i,n]),r.jsx(ne.input,{style:{display:"none"},...t,ref:o,defaultValue:n})});dr.displayName=Xa;function Qa(e=[],n,t){const a=[...e];return a[t]=n,a.sort((s,o)=>s-o)}function ur(e,n,t){const o=100/(t-n)*(e-n);return pn(o,[0,100])}function Za(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function Ja(e,n){if(e.length===1)return 0;const t=e.map(s=>Math.abs(s-n)),a=Math.min(...t);return t.indexOf(a)}function eo(e,n,t){const a=e/2,o=Tt([0,50],[0,a]);return(a-o(n)*t)*t}function to(e){return e.slice(0,-1).map((n,t)=>e[t+1]-n)}function no(e,n){if(n>0){const t=to(e);return Math.min(...t)>=n}return!0}function Tt(e,n){return t=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const a=(n[1]-n[0])/(e[1]-e[0]);return n[0]+a*(t-e[0])}}function ro(e){return(String(e).split(".")[1]||"").length}function so(e,n){const t=Math.pow(10,n);return Math.round(e*t)/t}var pr=nr,ao=ir,oo=lr,io=cr;const mr=c.forwardRef(({className:e,rangeClassName:n,...t},a)=>r.jsxs(pr,{ref:a,className:pe("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(ao,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(oo,{className:pe("absolute h-full bg-primary",n)})}),r.jsx(io,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));mr.displayName=pr.displayName;function lo(e){const n=co(e),t=c.forwardRef((a,s)=>{const{children:o,...i}=a,l=c.Children.toArray(o),d=l.find(po);if(d){const p=d.props.children,m=l.map(h=>h===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:h);return r.jsx(n,{...i,ref:s,children:c.isValidElement(p)?c.cloneElement(p,void 0,m):null})}return r.jsx(n,{...i,ref:s,children:o})});return t.displayName=`${e}.Slot`,t}function co(e){const n=c.forwardRef((t,a)=>{const{children:s,...o}=t;if(c.isValidElement(s)){const i=ho(s),l=mo(o,s.props);return s.type!==c.Fragment&&(l.ref=a?Ne(a,i):i),c.cloneElement(s,l)}return c.Children.count(s)>1?c.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var uo=Symbol("radix.slottable");function po(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===uo}function mo(e,n){const t={...n};for(const a in n){const s=e[a],o=n[a];/^on[A-Z]/.test(a)?s&&o?t[a]=(...l)=>{const d=o(...l);return s(...l),d}:s&&(t[a]=s):a==="style"?t[a]={...s,...o}:a==="className"&&(t[a]=[s,o].filter(Boolean).join(" "))}return{...e,...t}}function ho(e){var a,s;let n=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var it="Popover",[hr]=mn(it,[fn]),Fe=fn(),[fo,ve]=hr(it),fr=e=>{const{__scopePopover:n,children:t,open:a,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,l=Fe(n),d=c.useRef(null),[p,m]=c.useState(!1),[h,u]=un({prop:a,defaultProp:s??!1,onChange:o,caller:it});return r.jsx(Lr,{...l,children:r.jsx(fo,{scope:n,contentId:ge(),triggerRef:d,open:h,onOpenChange:u,onOpenToggle:c.useCallback(()=>u(f=>!f),[u]),hasCustomAnchor:p,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:i,children:t})})};fr.displayName=it;var vr="PopoverAnchor",vo=c.forwardRef((e,n)=>{const{__scopePopover:t,...a}=e,s=ve(vr,t),o=Fe(t),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return c.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(hn,{...o,...a,ref:n})});vo.displayName=vr;var gr="PopoverTrigger",br=c.forwardRef((e,n)=>{const{__scopePopover:t,...a}=e,s=ve(gr,t),o=Fe(t),i=fe(n,s.triggerRef),l=r.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Sr(s.open),...a,ref:i,onClick:le(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:r.jsx(hn,{asChild:!0,...o,children:l})});br.displayName=gr;var It="PopoverPortal",[go,bo]=hr(It,{forceMount:void 0}),xr=e=>{const{__scopePopover:n,forceMount:t,children:a,container:s}=e,o=ve(It,n);return r.jsx(go,{scope:n,forceMount:t,children:r.jsx(vn,{present:t||o.open,children:r.jsx(Tr,{asChild:!0,container:s,children:a})})})};xr.displayName=It;var Pe="PopoverContent",wr=c.forwardRef((e,n)=>{const t=bo(Pe,e.__scopePopover),{forceMount:a=t.forceMount,...s}=e,o=ve(Pe,e.__scopePopover);return r.jsx(vn,{present:a||o.open,children:o.modal?r.jsx(wo,{...s,ref:n}):r.jsx(yo,{...s,ref:n})})});wr.displayName=Pe;var xo=lo("PopoverContent.RemoveScroll"),wo=c.forwardRef((e,n)=>{const t=ve(Pe,e.__scopePopover),a=c.useRef(null),s=fe(n,a),o=c.useRef(!1);return c.useEffect(()=>{const i=a.current;if(i)return Ir(i)},[]),r.jsx(Br,{as:xo,allowPinchZoom:!0,children:r.jsx(yr,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:le(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,p=l.button===2||d;o.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),yo=c.forwardRef((e,n)=>{const t=ve(Pe,e.__scopePopover),a=c.useRef(!1),s=c.useRef(!1);return r.jsx(yr,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(a.current||(l=t.triggerRef.current)==null||l.focus(),o.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:o=>{var d,p;(d=e.onInteractOutside)==null||d.call(e,o),o.defaultPrevented||(a.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((p=t.triggerRef.current)==null?void 0:p.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),yr=c.forwardRef((e,n)=>{const{__scopePopover:t,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,...h}=e,u=ve(Pe,t),f=Fe(t);return Or(),r.jsx(Fr,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:r.jsx(Hr,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:p,onDismiss:()=>u.onOpenChange(!1),children:r.jsx(zr,{"data-state":Sr(u.open),role:"dialog",id:u.contentId,...f,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cr="PopoverClose",Co=c.forwardRef((e,n)=>{const{__scopePopover:t,...a}=e,s=ve(Cr,t);return r.jsx(ne.button,{type:"button",...a,ref:n,onClick:le(e.onClick,()=>s.onOpenChange(!1))})});Co.displayName=Cr;var So="PopoverArrow",jo=c.forwardRef((e,n)=>{const{__scopePopover:t,...a}=e,s=Fe(t);return r.jsx(Wr,{...s,...a,ref:n})});jo.displayName=So;function Sr(e){return e?"open":"closed"}var ko=fr,No=br,Po=xr,jr=wr;const Ao=ko,Ro=No,kr=c.forwardRef(({className:e,align:n="center",sideOffset:t=4,...a},s)=>r.jsx(Po,{children:r.jsx(jr,{ref:s,align:n,sideOffset:t,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=bottom]:slide-in-from-top-2 data-[state=left]:slide-in-from-right-2 data-[state=right]:slide-in-from-left-2 data-[state=top]:slide-in-from-bottom-2",e),...a})}));kr.displayName=jr.displayName;function Je(e,n){const t=ee(e),a=ee(n),s=t.getTime()-a.getTime();return s<0?-1:s>0?1:s}function Mo(e){return js(e,Date.now())}function $o(e,n){const t=ee(e),a=ee(n),s=t.getFullYear()-a.getFullYear(),o=t.getMonth()-a.getMonth();return s*12+o}function Eo(e){return n=>{const a=(e?Math[e]:Math.trunc)(n);return a===0?0:a}}function _o(e,n){return+ee(e)-+ee(n)}function Do(e){const n=ee(e);return n.setHours(23,59,59,999),n}function Lo(e){const n=ee(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(23,59,59,999),n}function To(e){const n=ee(e);return+Do(n)==+Lo(n)}function Io(e,n){const t=ee(e),a=ee(n),s=Je(t,a),o=Math.abs($o(t,a));let i;if(o<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-s*o);let l=Je(t,a)===-s;To(ee(e))&&o===1&&Je(e,a)===1&&(l=!1),i=s*(o-Number(l))}return i===0?0:i}function Bo(e,n,t){const a=_o(e,n)/1e3;return Eo(t==null?void 0:t.roundingMethod)(a)}function Oo(e,n,t){const a=Ns(),s=(t==null?void 0:t.locale)??a.locale??ks,o=2520,i=Je(e,n);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:i});let d,p;i>0?(d=ee(n),p=ee(e)):(d=ee(e),p=ee(n));const m=Bo(p,d),h=(qt(p)-qt(d))/1e3,u=Math.round((m-h)/60);let f;if(u<2)return t!=null&&t.includeSeconds?m<5?s.formatDistance("lessThanXSeconds",5,l):m<10?s.formatDistance("lessThanXSeconds",10,l):m<20?s.formatDistance("lessThanXSeconds",20,l):m<40?s.formatDistance("halfAMinute",0,l):m<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):u===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",u,l);if(u<45)return s.formatDistance("xMinutes",u,l);if(u<90)return s.formatDistance("aboutXHours",1,l);if(u<Yt){const g=Math.round(u/60);return s.formatDistance("aboutXHours",g,l)}else{if(u<o)return s.formatDistance("xDays",1,l);if(u<qe){const g=Math.round(u/Yt);return s.formatDistance("xDays",g,l)}else if(u<qe*2)return f=Math.round(u/qe),s.formatDistance("aboutXMonths",f,l)}if(f=Io(p,d),f<12){const g=Math.round(u/qe);return s.formatDistance("xMonths",g,l)}else{const g=f%12,x=Math.trunc(f/12);return g<3?s.formatDistance("aboutXYears",x,l):g<9?s.formatDistance("overXYears",x,l):s.formatDistance("almostXYears",x+1,l)}}function Fo(e,n){return Oo(e,Mo(e),n)}const Ho=()=>{const[e,n]=c.useState(!1),[,t]=$t(),{data:a,refetch:s}=oe.notifications.getNotifications.useQuery({limit:20},{enabled:e}),{data:o,refetch:i}=oe.notifications.getUnreadCount.useQuery(),l=oe.notifications.markAsRead.useMutation({onSuccess:()=>{s(),i()}}),d=oe.notifications.markAllAsRead.useMutation({onSuccess:()=>{s(),i()}}),p=async m=>{m.readAt||await l.mutateAsync({id:m.id}),m.link&&(t(m.link),n(!1))};return r.jsxs(Ao,{open:e,onOpenChange:n,children:[r.jsx(Ro,{asChild:!0,children:r.jsxs(Q,{variant:"ghost",size:"icon",className:"relative p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors",children:[r.jsx(Sn,{className:"w-5 h-5"}),o&&o>0?r.jsx("span",{className:"absolute top-1.5 right-1.5 w-4 h-4 bg-red-500 text-white text-[10px] flex items-center justify-center rounded-full border-2 border-white font-bold",children:o>9?"9+":o}):null]})}),r.jsxs(kr,{className:"w-80 p-0 mr-4",align:"end",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Notifications"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-600",onClick:()=>d.mutate(),title:"Mark all as read",children:r.jsx(Ss,{className:"h-4 w-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-600",onClick:()=>t("/settings?tab=notifications"),children:r.jsx(tt,{className:"h-4 w-4"})})]})]}),r.jsx(Cs,{className:"h-80",children:!a||a.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center text-slate-400",children:[r.jsx(An,{className:"h-8 w-8 mb-2 opacity-20"}),r.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):r.jsx("div",{className:"flex flex-col",children:a.map(m=>r.jsxs("button",{className:`flex flex-col gap-1 p-4 text-left border-b hover:bg-slate-50 transition-colors relative ${m.readAt?"":"bg-blue-50/40"}`,onClick:()=>p(m),children:[!m.readAt&&r.jsx("div",{className:"absolute left-1 top-4 w-1.5 h-1.5 bg-blue-500 rounded-full"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-bold text-slate-900 line-clamp-1 pr-4",children:m.title}),r.jsx("span",{className:"text-[10px] text-slate-400 whitespace-nowrap",children:Fo(new Date(m.sentAt),{addSuffix:!0})})]}),r.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 leading-relaxed",children:m.message}),m.type==="overdue_alert"&&r.jsx(gn,{variant:"outline",className:"w-fit mt-1 text-[9px] h-4 px-1.5 bg-red-50 text-red-600 border-red-100 uppercase tracking-wider font-bold",children:"Overdue"})]},m.id))})}),r.jsx("div",{className:"p-2 border-t text-center",children:r.jsx(Q,{variant:"ghost",size:"sm",className:"w-full text-xs text-slate-500 hover:text-primary",onClick:()=>{t("/notifications"),n(!1)},children:"View all notifications"})})]})]})},zo={icon:nt,label:"Learning Zone",path:"/learning",submenu:[{label:"ISO 27001",path:"/learning/iso-27001"},{label:"SOC 2",path:"/learning/soc-2"},{label:"GDPR",path:"/learning/gdpr"},{label:"HIPAA",path:"/learning/hipaa"},{label:"CMMC",path:"/learning/cmmc"}]},Wo=[{label:"User Management",path:"/admin/user-management"},{label:"User Invitations",path:"/admin/invitations"},{label:"Audit Logs",path:"/admin/audit"},{label:"LLM Settings",path:"/admin/llm"},{label:"Issue Trackers",path:"/admin/issue-tracker"},{label:"Billing",path:"/admin/billing"},{label:"Waitlist Management",path:"/sales/waitlist"}],Vo={icon:xt,label:"Admin Console",path:"/admin",submenu:Wo},Uo=[{icon:de,label:"Controls",path:"/client-controls"},{icon:ce,label:"Policies",path:"/client-policies"},{icon:nt,label:"Knowledge Base",path:"/knowledge-base"},{icon:Ie,label:"AI Questionnaires",path:"/questionnaires",isPremium:!0},{icon:kn,label:"Mappings",path:"/mappings"},{icon:De,label:"Evidence",path:"/evidence"},{icon:gt,label:"Risk Management",path:"/risks"},{icon:wt,label:"Threat Modeling",path:"/dev/projects",isPremium:!0},{icon:Ze,label:"Gap Analysis",path:"/gap-analysis"},{icon:yt,label:"Compliance Journey",path:"/journey"},{icon:Is,label:"Discovery Wizard",path:"/readiness/wizard"},{icon:jn,label:"AI Governance",path:"/ai-governance",isPremium:!0},{icon:et,label:"Federal Hub",path:"/federal",submenu:[{label:"FIPS 199 Categorization",path:"/federal/fips-199"},{label:"SSP (NIST 800-171)",path:"/federal/ssp-171"},{label:"SSP (NIST 800-172)",path:"/federal/ssp-172"},{label:"SAR Report",path:"/federal/sar"},{label:"POA&M (NIST 171)",path:"/federal/poam"}]},{icon:_e,label:"People",path:"/people"},{icon:Le,label:"RACI Matrix",path:"/raci-matrix"},{icon:Nn,label:"Calendar",path:"/calendar"},{icon:Sn,label:"Notifications",path:"/notifications"},{icon:Le,label:"Reports",path:"/reports"},{icon:tt,label:"Settings",path:"/settings"},{icon:Se,label:"Tasks",path:"/tasks"},{icon:Pn,label:"Communication",path:"/communication"},{icon:yn,label:"Activity Log",path:"/activity"},{icon:Ct,label:"Personnel Compliance",path:"/personnel-compliance"}],on="sidebar-width",Go=280,Ko=200,qo=480;function xe(e,n){if(!n)return e;const[t,a]=e.split("?"),s=a?`?${a}`:"";return t==="/governance"?`/clients/${n}/governance${s}`:t==="/governance/workbench"?`/clients/${n}/governance/workbench${s}`:t==="/compliance"?`/clients/${n}/compliance${s}`:t==="/client-dashboard"?`/clients/${n}?tab=dashboard${a?"&"+a:""}`:t==="/client-controls"?`/clients/${n}/controls${s}`:t==="/client-policies"?`/clients/${n}/policies${s}`:t==="/audit-readiness"?`/clients/${n}/audit-readiness${s}`:t==="/readiness/wizard"?`/clients/${n}/readiness/wizard${s}`:t==="/intake"?`/clients/${n}/intake${s}`:t==="/board-summary"?`/clients/${n}/board-summary${s}`:t==="/communication"?`/clients/${n}/communication${s}`:t==="/ai-governance"?`/clients/${n}/ai-governance${s}`:t==="/activity"?`/clients/${n}/activity${s}`:t==="/readiness/roadmap"?`/clients/${n}/roadmap/dashboard${s}`:t==="/roadmap"?`/clients/${n}/roadmap/dashboard${s}`:t==="/implementation"?`/clients/${n}/implementation${s}`:t==="/implementation/dashboard"?`/clients/${n}/implementation${s}`:t==="/evidence"?`/clients/${n}/evidence${s}`:t==="/journey"?`/clients/${n}/journey${s}`:t==="/onboarding"?`/onboarding${s}`:t==="/gap-analysis"?`/clients/${n}/gap-analysis${s}`:t==="/training/management"?`/clients/${n}/training/management${s}`:t==="/personnel-compliance"?`/clients/${n}/personnel-compliance${s}`:t==="/audit-hub"?`/clients/${n}/audit-hub${s}`:t==="/reports"?`/clients/${n}/reports${s}`:t==="/trust-center"?`/trust-center/${n}${s}`:t==="/trust-center"?`/trust-center/${n}${s}`:t==="/projects"?`/clients/${n}/projects${s}`:t==="/marketplace"?`/clients/${n}/marketplace${s}`:Uo.some(i=>i.path===t)||t.startsWith("/risks")||t.startsWith("/vendors")||t.startsWith("/business-continuity")||t.startsWith("/federal")||t.startsWith("/privacy")||t.startsWith("/workflows")||t.startsWith("/cyber")||t.startsWith("/ai-governance")||t.startsWith("/roadmap")||t.startsWith("/readiness")||t.startsWith("/compliance-journey")||t.startsWith("/assurance")||t.startsWith("/implementation")||t==="/asvs"||t==="/samm"||t==="/metrics"?`/clients/${n}${t}${s}`:e}function Mt(e,n,t){try{const a="http://localhost",s=new URL(e,a),o=new URL(n+t,a);if(s.pathname===o.pathname&&s.search===o.search)return!0;const i=s.searchParams.get("tab"),l=o.searchParams.get("tab"),d=s.pathname.match(/^\/clients\/\d+$/),p=o.pathname.match(/^\/clients\/\d+$/);if(d&&p)return i?i===l:!l;if(s.pathname==="/clients")return o.pathname==="/clients";if(d&&o.pathname.startsWith(s.pathname)&&o.pathname!==s.pathname)return!1;if(s.pathname!=="/"&&s.pathname!=="/dashboard"&&o.pathname.startsWith(s.pathname)){const m=o.pathname.charAt(s.pathname.length);if(!m||m==="/")return!0}return!1}catch{return n+t===e}}function $i({children:e}){var d;const[n,t]=c.useState(()=>{const p=localStorage.getItem(on);return p?parseInt(p,10):Go}),{loading:a,user:s,signOut:o}=Dt(),{selectedClientId:i}=vt(),{appName:l}=bn();return((d=s==null?void 0:s.user_metadata)==null?void 0:d.role)==="auditor"&&i?r.jsx(Vr,{to:`/clients/${i}/audit-hub`}):(c.useEffect(()=>{localStorage.setItem(on,n.toString())},[n]),a?r.jsx(Ur,{}):s?r.jsx(wn,{defaultOpen:!0,style:{"--sidebar-width":`${n}px`},children:r.jsx(Wa,{children:r.jsx(Yo,{setSidebarWidth:t,children:e})})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"flex flex-col items-center gap-8 p-8 max-w-md w-full",children:[r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx(de,{className:"h-16 w-16 text-primary"}),r.jsxs("h1",{className:"text-2xl font-semibold tracking-tight text-center",children:["Sign in to ",l]}),r.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"Access to this dashboard requires authentication. Sign in to manage your compliance controls and policies."})]}),r.jsx(Q,{onClick:()=>{window.location.href=xn()},size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:"Sign in"})]})}))}function Yo({children:e,setSidebarWidth:n}){var Ft,Ht,zt,Wt,Vt,Ut,Gt;const{user:t,signOut:a}=Dt(),[s,o]=$t(),{state:i,toggleSidebar:l}=Gr(),d=i==="collapsed",[p,m]=c.useState(!1),h=c.useRef(null),u=Kr(),[f,g]=c.useState(""),{appName:x,logoUrl:b,primaryColor:w,updateBranding:M,resetBranding:$,logoSize:E}=bn(),[D,j]=c.useState(!1),T=c.useRef(null),[Z,A]=c.useState(!1),B=R=>{var W;const I=(W=R.target.files)==null?void 0:W[0];if(!I)return;if(!I.type.startsWith("image/")){Ke.error("Please select an image file");return}if(I.size>2*1024*1024){Ke.error("Image must be less than 2MB");return}A(!0);const K=new FileReader;K.onload=z=>{var ue;const me=(ue=z.target)==null?void 0:ue.result;M({logoUrl:me}),A(!1),Ke.success("Logo uploaded successfully")},K.onerror=()=>{Ke.error("Failed to read file"),A(!1)},K.readAsDataURL(I)},N=s.match(/\/clients\/(\d+)/),U=N?parseInt(N[1],10):null,{selectedClientId:G,clearSelectedClient:X}=vt(),_=G||U;console.log("[DEBUG DashboardLayout] selectedClientId:",G,"activeClientId:",U,"persistentClientId:",_),console.log("[DEBUG DashboardLayout] location:",s);const q=s.includes("/clients/")||s.includes("/client-"),te=!!_&&typeof _=="number"&&_>0&&q;console.log("[DEBUG DashboardLayout] isClientSpecificPage:",q,"shouldFetchClient:",te);const{data:S,error:ie}=oe.clients.get.useQuery({id:_},{enabled:te,retry:!1});console.log("[DEBUG DashboardLayout] clients.get result - data:",!!S,"error:",ie),c.useEffect(()=>{var R;console.log("[DEBUG DashboardLayout] clientError:",ie,"persistentClientId:",_),ie&&((R=ie.data)==null?void 0:R.code)==="FORBIDDEN"&&q&&(console.warn("Access denied for client ID",_,"Clearing context."),X(),s!=="/dashboard"&&o("/dashboard"))},[ie,_,o,q,s,X]);const{setPlanTier:Re}=vt();c.useEffect(()=>{S&&q&&Re(S.planTier)},[S,Re,q]);const He={"--sidebar-background":(S==null?void 0:S.brandPrimaryColor)||"#0f172a","--sidebar-foreground":"#ffffff","--sidebar-primary":(S==null?void 0:S.brandSecondaryColor)||"#0ea5e9","--sidebar-primary-foreground":"#ffffff","--sidebar-accent":"rgba(255, 255, 255, 0.1)","--sidebar-accent-foreground":"#ffffff","--sidebar-border":"rgba(255, 255, 255, 0.1)","--sidebar-ring":(S==null?void 0:S.brandSecondaryColor)||"#0ea5e9"},v=(R,I)=>{if(!I)return R;const K=R.split(new RegExp(`(${I})`,"gi"));return r.jsx(r.Fragment,{children:K.map((W,z)=>W.toLowerCase()===I.toLowerCase()?r.jsx("mark",{className:"bg-blue-500/30 text-white rounded-sm px-0.5 border-b border-blue-400",children:W},z):W)})},{data:P,isLoading:L,refetch:k}=oe.users.me.useQuery(void 0,{enabled:!!t,retry:3,retryDelay:R=>Math.min(R*1e3,5e3)}),O=oe.billing.syncSubscriptionStatus.useMutation();c.useEffect(()=>{if(new URLSearchParams(window.location.search).get("payment_success")==="true"){const W=Date.now()+3e5;try{localStorage.setItem("payment_grace_period",W.toString());const z=new URL(window.location.href);z.searchParams.delete("payment_success"),window.history.replaceState({},"",z.toString())}catch{}}let I=!1;try{const W=localStorage.getItem("payment_grace_period");W&&parseInt(W)>Date.now()?I=!0:localStorage.removeItem("payment_grace_period")}catch{}(async()=>{if(s.includes("/complete-subscription")||window.location.pathname.includes("/complete-subscription")||L)return;if(!P){console.warn("[Subscription] No dbUser found after loading. User object:",t==null?void 0:t.id),setTimeout(()=>k(),2e3);return}if(I)return;const W=P.planTier||"free";if(W==="free"||W==="enterprise")return;const z=P.subscriptionStatus;if(!z||z==="none"||z==="past_due")console.log("[Subscription] No subscription status, attempting sync...");else if(["active","trialing"].includes(z))return;if(sessionStorage.getItem("has_synced_subscription")){console.log("Subscription sync already attempted this session."),!window.location.pathname.includes("/complete-subscription")&&z&&!["active","trialing"].includes(z)&&(window.location.href="/complete-subscription");return}console.log("Subscription status potentially invalid ('"+z+"'). Attempting to sync with Stripe...");try{sessionStorage.setItem("has_synced_subscription","true");const ue=await O.mutateAsync();if(console.log("Sync result:",ue),["active","trialing"].includes(ue.status||"")){console.log("Sync successful, subscription is active. Refreshing page..."),window.location.reload();return}}catch(ue){console.error("Failed to sync subscription:",ue)}z&&!["active","trialing"].includes(z)&&(console.warn("Redirecting to complete-subscription due to invalid status:",z),window.location.pathname.includes("/complete-subscription")||(window.location.href="/complete-subscription"))})()},[P,s,L,t,O,k]);const F=(P==null?void 0:P.role)||((Ft=t==null?void 0:t.user_metadata)==null?void 0:Ft.role)||((Ht=t==null?void 0:t.app_metadata)==null?void 0:Ht.role),J=F==="admin"||F==="owner",H=[{label:"Platform & Overview",items:[{icon:Ps,label:"Start Here",path:"/start-here"},{icon:Ce,label:"Dashboard",path:"/dashboard"},{icon:_e,label:"Clients",path:"/clients"},{icon:tt,label:"Settings",path:"/settings"},{icon:Ct,label:"Employee Onboarding",path:"/onboarding"}]},{label:"Libraries & Knowledge",items:[{icon:de,label:"Global Control Library",path:"/controls"},..._?[{icon:As,label:"Compliance Obligations",path:`/clients/${_}/compliance-obligations`},{icon:Os,label:"Marketplace",path:"/marketplace"}]:[],{icon:Ye,label:"Frameworks Library",path:"/frameworks"},zo]}];if(_){const R=H.find(W=>W.label==="Platform & Overview");R&&R.items.push({icon:ct,label:"Workflows",path:"/workflows"}),H.push({label:"Compliance Journey",items:[{icon:yt,label:"Overview",path:`/clients/${_}/compliance-journey`},{icon:Rs,label:"Discovery & Scoping",path:`/clients/${_}/readiness/wizard`,submenu:[{label:"ISO 27001",path:`/clients/${_}/readiness/wizard/ISO27001`},{label:"SOC 2",path:`/clients/${_}/readiness/wizard/SOC2`},{label:"NIST CSF",path:`/clients/${_}/readiness/wizard/NISTCSF`},{label:"HIPAA",path:`/clients/${_}/readiness/wizard/HIPAA`},{label:"GDPR",path:`/clients/${_}/readiness/wizard/GDPR`}]},{icon:De,label:"Evidence Collection",path:"/evidence"},{icon:Ms,label:"Audit Preparation",path:"/audit-hub"}]}),H.push({label:"Governance",items:[{icon:Ce,label:"Dashboard",path:"/governance",isPremium:!0},{icon:de,label:"Controls",path:"/client-controls"},{icon:Se,label:"Workbench",path:"/governance/workbench",isPremium:!0},{icon:$s,label:"Strategic Roadmaps",path:"/roadmap",submenu:[{label:"Roadmap Dashboard",path:"/roadmap/dashboard"},{label:"Implementation Plans",path:"/implementation/dashboard"},{label:"Roadmap Templates",path:"/roadmap/templates"}]},{icon:ce,label:"Policies",path:"/client-policies",submenu:[{label:"View All Policies",path:"/client-policies"},{label:"Policy Templates",path:"/policy-templates"}]},{icon:_e,label:"People & Org",path:"/people"},{icon:Le,label:"RACI Matrix",path:"/raci-matrix"}]},{label:"Risk Management",items:[{icon:Ce,label:"Dashboard",path:"/risks"},{icon:Se,label:"Risk Register",path:"/risks/register"},{icon:ce,label:"Risk Reports",path:"/risks/report"},{icon:Ye,label:"Risk Framework",path:"/risks/framework"},{icon:dt,label:"Assets",path:"/risks/assets"},{icon:gt,label:"Threats",path:"/risks/threats"},{icon:qr,label:"Vulnerabilities",path:"/risks/vulnerabilities"},{icon:De,label:"Assessments",path:"/risks/assessments"},{icon:Ze,label:"Gap Analysis",path:"/gap-analysis"},{icon:yt,label:"Guided Assessment",path:"/risks/guided"},{icon:$e,label:"Treatment Plan",path:"/risks/treatment-plan"},{icon:nt,label:"Alignment Guide",path:"/risks/alignment-guide"}]}),((S==null?void 0:S.planTier)==="pro"||(S==null?void 0:S.planTier)==="enterprise")&&!0&&H.push({label:"Threat Intelligence",items:[{icon:Qt,label:"Adversary Intelligence",path:`/clients/${_}/risks/adversary-intel`,isPremium:!0},{icon:ut,label:"Vulnerability Workbench",path:`/clients/${_}/risks/vulnerability-workbench`,isPremium:!0}]});const K=!0;(S==null?void 0:S.planTier)==="pro"||(S==null||S.planTier),H.push({label:"AI & App Security",items:[{icon:de,label:"Security Projects",path:"/projects"},{icon:jn,label:"AI Governance",path:"/ai-governance",isPremium:!0},{icon:wt,label:"Threat Modeling",path:"/dev/projects",isPremium:!0},{icon:$e,label:"SAMM V2",path:"/samm"},{icon:ut,label:"ASVS Assessment",path:"/asvs"}]}),_&&H.push({label:"Vendor Management",items:[{icon:Ce,label:"Dashboard",path:"/vendors/overview"},{icon:et,label:"All Vendors",path:"/vendors/all"},{icon:$e,label:"Assessments",path:"/vendors/reviews"},{icon:Te,label:"Discovery",path:"/vendors/discovery"},{icon:ce,label:"Contract Templates",path:"/vendors/contracts"}]}),H.push({label:"Control Frameworks",items:[{icon:Ce,label:"Dashboard",path:"/compliance"},{icon:nt,label:"Knowledge Base",path:"/knowledge-base"},{icon:Ie,label:"AI Questionnaires",path:"/questionnaires",isPremium:!0},{icon:kn,label:"Mappings",path:"/mappings"}]},{label:"Federal Compliance",items:[{icon:et,label:"Overview",path:"/federal"},{icon:xt,label:"FIPS 199 Categorization",path:"/federal/fips-199"},{icon:ce,label:"SSP (NIST 800-171)",path:"/federal/ssp-171"},{icon:de,label:"SSP (NIST 800-172)",path:"/federal/ssp-172"},{icon:Xt,label:"SAR Report",path:"/federal/sar"},{icon:ct,label:"POA&M (NIST 171)",path:"/federal/poam"}]},{label:"Business Continuity",items:[{icon:Ze,label:"Overview",path:"/business-continuity"},{icon:dt,label:"Business Processes",path:"/business-continuity/processes"},{icon:ce,label:"Impact Analysis",path:"/business-continuity/bia"},{icon:de,label:"Strategies",path:"/business-continuity/strategies"},{icon:Xt,label:"Plans",path:"/business-continuity/plans"},{icon:gt,label:"Scenarios",path:"/business-continuity/scenarios"},{icon:_e,label:"Call Tree",path:"/business-continuity/call-tree"},{icon:Se,label:"Tasks",path:"/business-continuity/tasks"}]},{label:"Privacy",items:[{icon:xt,label:"Overview",path:"/privacy"},{icon:dt,label:"Data Inventory",path:"/privacy/inventory"},{icon:ce,label:"ROPA",path:"/privacy/ropa"},{icon:ut,label:"Data Breaches",path:"/privacy/breaches"},{icon:De,label:"DPI Assessment",path:"/privacy/dpia"},{icon:Es,label:"International Transfers",path:"/privacy/transfers"},{icon:_e,label:"DSAR Manager",path:"/privacy/dsar"},{icon:ce,label:"DPA Templates",path:"/vendors/dpa-templates"}]},{label:"Cyber Resilience",items:[{icon:$e,label:"Overview",path:"/cyber"},{icon:Se,label:"NIS2 Assessment",path:"/cyber/assessment"},{icon:Ze,label:"Incidents",path:"/cyber/incidents"},{icon:ce,label:"Documents",path:"/cyber/documents"}]},{label:"Assurance",items:[...(S==null?void 0:S.serviceModel)==="managed"&&K?[{icon:An,label:"Evidence Intake Box",path:"/intake"}]:[],{icon:Ce,label:"Board Summary",path:"/board-summary"},{icon:de,label:"SAMM Maturity",path:"/samm"},{icon:ct,label:"Supply Chain (SCVS)",path:"/assurance/scvs"},{icon:wt,label:"App Security (ASVS)",path:"/asvs"},{icon:$e,label:"OpenSSF Hygiene",path:"/assurance/openssf"},{icon:Qt,label:"Mobile App Sec",path:"/assurance/masvs"}]},{label:"Management",items:[{icon:Le,label:"Metrics",path:"/metrics"},{icon:Le,label:"Reports",path:"/reports"},{icon:Nn,label:"Calendar",path:"/calendar"},{icon:Se,label:"Tasks",path:"/tasks"},{icon:Pn,label:"Communication",path:"/communication"},{icon:tt,label:"Client Settings",path:"/settings"},...J?[{icon:Ct,label:"Personnel Compliance",path:"/personnel-compliance"}]:[]]},{label:"Marketing",items:[{icon:Bs,label:"CRM Dashboard",path:"/sales",isPremium:!0}]})}J&&H.push({label:"Administration",items:[Vo,{icon:Ie,label:"Advisor Workbench",path:"/advisor/workbench",isPremium:!0},{icon:yn,label:"Activity Log",path:"/activity"}]});const ye=H.map(R=>{if(!f)return R;const I=R.items.map(K=>{var me;const W=K.label.toLowerCase().includes(f.toLowerCase()),z=(me=K.submenu)==null?void 0:me.filter(ue=>ue.label.toLowerCase().includes(f.toLowerCase()));return W?K:z&&z.length>0?{...K,submenu:z}:null}).filter(Boolean);return I.length>0?{...R,items:I}:null}).filter(Boolean),Nr=typeof window<"u"?window.location.search:"",Bt=H.flatMap(R=>R.items.flatMap(I=>I.submenu?[I,...I.submenu]:[I])).filter(R=>{const I=xe(R.path,_);return Mt(I,s,Nr)});Bt.sort((R,I)=>{const K=xe(R.path,_),W=xe(I.path,_);if(W.length===K.length){if(!R.submenu&&I.submenu)return-1;if(R.submenu&&!I.submenu)return 1}return W.length-K.length});const Ot=Bt[0],lt=Ot;return c.useEffect(()=>{d&&m(!1)},[d]),c.useEffect(()=>{const R=K=>{var me;if(!p)return;const W=((me=h.current)==null?void 0:me.getBoundingClientRect().left)??0,z=K.clientX-W;z>=Ko&&z<=qo&&n(z)},I=()=>{m(!1)};return p&&(document.addEventListener("mousemove",R),document.addEventListener("mouseup",I),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",I),document.body.style.cursor="",document.body.style.userSelect=""}},[p,n]),r.jsxs(wn,{style:He,children:[r.jsxs("div",{className:"relative",ref:h,children:[r.jsxs(Yr,{collapsible:"icon",className:"border-r-0",disableTransition:p,children:[r.jsx(Xr,{className:"p-4 border-b border-white/5 bg-[var(--sidebar-background)] h-20 flex flex-col justify-center",children:r.jsxs(ln,{open:D,onOpenChange:j,children:[r.jsx(Qr,{asChild:!0,children:r.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity w-full h-full flex items-center",children:r.jsx(Zr,{className:"text-white scale-110 origin-left",showText:!d})})}),r.jsxs(cn,{children:[r.jsx(Jr,{children:r.jsx(es,{children:"Branding Settings"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ge,{children:"Application Name"}),r.jsx(Me,{value:x,onChange:R=>M({appName:R.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ge,{children:"Logo"}),r.jsxs("div",{className:"flex gap-4 items-start",children:[r.jsx("div",{className:"w-24 h-24 border rounded-md flex items-center justify-center bg-muted/20 overflow-hidden relative group",children:b?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:b,alt:"Logo",className:"w-full h-full object-contain p-2"}),r.jsx("button",{onClick:()=>M({logoUrl:null}),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Et,{className:"w-3 h-3"})})]}):r.jsx(de,{className:"w-10 h-10 text-muted-foreground/30"})}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("input",{ref:T,type:"file",accept:"image/*",onChange:B,className:"hidden"}),r.jsxs(Q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{var R;return(R=T.current)==null?void 0:R.click()},disabled:Z,children:[Z?r.jsx(dn,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(_s,{className:"w-4 h-4 mr-2"}),"Upload Image"]}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("p",{children:"Supported: PNG, JPG, SVG"}),r.jsx("p",{children:"Max size: 2MB"}),r.jsx("p",{children:"Recommended: 512x512px transparent PNG"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground pt-1 border-t border-muted/50 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Or use URL:"}),r.jsx(Me,{value:b||"",onChange:R=>M({logoUrl:R.target.value||null}),placeholder:"https://...",className:"mt-1 h-8 text-xs"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ge,{children:"Logo Size"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xs text-muted-foreground w-8",children:"50%"}),r.jsx(mr,{defaultValue:[E],max:200,min:50,step:5,onValueChange:R=>M({logoSize:R[0]}),className:"flex-1"}),r.jsxs("span",{className:"text-xs font-medium w-8 text-right",children:[E,"%"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ge,{children:"Primary Color"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Me,{type:"color",value:w,onChange:R=>M({primaryColor:R.target.value}),className:"w-12 h-10 p-1"}),r.jsx(Me,{value:w,onChange:R=>M({primaryColor:R.target.value}),className:"flex-1"})]})]}),r.jsxs("div",{className:"pt-4 flex justify-end gap-2",children:[r.jsx(Q,{variant:"outline",onClick:$,children:"Reset to Default"}),r.jsx(Q,{onClick:()=>j(!1),children:"Done"})]})]})]})]})}),r.jsxs(ts,{className:"gap-2",children:[_&&(d?r.jsxs("div",{className:"flex flex-col items-center gap-2 py-6 border-b border-white/5 bg-[var(--sidebar-background)]",children:[r.jsx("div",{className:"h-8 w-8 rounded-md bg-white/10 text-white flex items-center justify-center font-bold text-xs",title:(S==null?void 0:S.portalTitle)||(S==null?void 0:S.name)||`Client #${_}`,children:(zt=(S==null?void 0:S.portalTitle)||(S==null?void 0:S.name)||"C")==null?void 0:zt.substring(0,2).toUpperCase()}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>o("/clients"),className:"h-8 w-8 text-slate-400 hover:text-white",children:r.jsx(Ye,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"px-5 py-6 border-b border-white/10 bg-[var(--sidebar-background)]",children:[r.jsx("p",{className:"text-[10px] font-bold text-[var(--sidebar-primary)] uppercase tracking-[0.15em] mb-2 opacity-80",children:"Client Context"}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("p",{className:"text-xl font-bold text-white truncate leading-none",children:(S==null?void 0:S.portalTitle)||(S==null?void 0:S.name)||`Client #${_}`}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>o("/clients"),className:"w-full h-9 text-xs bg-white/5 border-white/10 text-white hover:bg-white/10 hover:text-white transition-all justify-start px-3 font-medium rounded-md",children:[r.jsx(Ye,{className:"w-4 h-4 mr-3 opacity-60"}),"Switch Organization"]})]})]})),!d&&r.jsx("div",{className:"px-3 py-2",children:r.jsxs("div",{className:"relative",children:[r.jsx(Te,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none"}),r.jsx(Me,{placeholder:"Search menu...",className:"pl-8 h-9 text-xs bg-sidebar-accent/5",value:f,onChange:R=>g(R.target.value)})]})}),ye.map((R,I)=>r.jsx(Xo,{group:R,location:s,setLocation:o,persistentClientId:_,isCollapsed:d,bestMatchItem:Ot,forceOpen:f.length>0,menuSearch:f,highlightMatch:v},R.label||I))]}),r.jsx(ns,{className:"p-3",children:r.jsxs(rs,{children:[r.jsx(ss,{asChild:!0,children:r.jsxs("button",{className:"flex items-center gap-3 rounded-lg px-1 py-1 hover:bg-accent/50 transition-colors w-full text-left group-data-[collapsible=icon]:justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-ring","data-tour":"user-menu",children:[r.jsx(as,{className:"h-9 w-9 border shrink-0",children:r.jsx(os,{className:"text-xs font-medium",children:((Vt=(Wt=t==null?void 0:t.user_metadata)==null?void 0:Wt.full_name)==null?void 0:Vt.charAt(0).toUpperCase())||((Ut=t==null?void 0:t.email)==null?void 0:Ut.charAt(0).toUpperCase())||"-"})}),r.jsxs("div",{className:"flex-1 min-w-0 group-data-[collapsible=icon]:hidden",children:[r.jsx("p",{className:"text-sm font-medium truncate leading-none",children:((Gt=t==null?void 0:t.user_metadata)==null?void 0:Gt.full_name)||(t==null?void 0:t.email)||"-"}),r.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1.5",children:(t==null?void 0:t.email)||"-"})]})]})}),r.jsxs(is,{align:"end",className:"w-48",children:[r.jsxs(Kt,{onClick:()=>o("/profile"),className:"cursor-pointer",children:[r.jsx(Ds,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Profile"})]}),r.jsxs(Kt,{onClick:async()=>{await a(),window.location.href=xn()},className:"cursor-pointer text-destructive focus:text-destructive",children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Sign out"})]})]})]})})]}),r.jsx("div",{className:`absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-primary/20 transition-colors ${d?"hidden":""}`,onMouseDown:()=>{d||m(!0)},style:{zIndex:50}})]}),r.jsxs(cs,{children:[r.jsxs("div",{className:"flex border-b h-14 items-center justify-between bg-white/80 px-4 md:px-6 backdrop-blur-md sticky top-0 z-40 shadow-[0_1px_2px_rgba(0,0,0,0,03)]",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[u&&r.jsx(ds,{className:"h-9 w-9 rounded-lg bg-background shadow-sm border"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-6 w-1 bg-primary rounded-full hidden md:block"}),r.jsx("span",{className:"tracking-tight text-slate-900 font-bold text-sm md:text-base",children:(lt==null?void 0:lt.label)??"Dashboard"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(va,{}),r.jsx("div",{className:"h-8 w-px bg-slate-200 mx-1 hidden sm:block"}),r.jsx(xa,{}),r.jsx(Ho,{})]})]}),r.jsx("div",{className:"flex-1 p-4 md:p-6",children:e}),r.jsx(ga,{clientId:_||void 0}),r.jsx(ba,{})]})]})}function Xo({group:e,location:n,setLocation:t,persistentClientId:a,isCollapsed:s,bestMatchItem:o,forceOpen:i,menuSearch:l,highlightMatch:d}){const p=e.items.some(u=>u===o?!0:u.submenu?u.submenu.some(f=>f===o):!1),[m,h]=c.useState(i||p);return c.useEffect(()=>{(i||p)&&h(!0)},[i,p]),r.jsx(Fs,{open:m,onOpenChange:h,className:"group/collapsible",children:r.jsxs(us,{className:"py-1",children:[r.jsx(ps,{asChild:!0,children:r.jsxs(Hs,{className:"flex w-full items-center text-xs font-semibold uppercase tracking-wider text-slate-500 hover:text-slate-300 transition-colors px-4 py-2 mt-4",children:[d(e.label,l),r.jsx(Cn,{className:"ml-auto h-3 w-3 transition-transform group-data-[state=open]/collapsible:rotate-90 opacity-40"})]})}),r.jsx(zs,{className:"mt-1",children:r.jsx(ms,{children:r.jsx(hs,{children:e.items.map(u=>{const f=xe(u.path,a),g=u===o;return r.jsx(fs,{children:u.submenu?r.jsx(Qo,{item:u,location:n,setLocation:t,isCollapsed:s,currentSearch:l,cid:a,bestMatchItem:o,highlightMatch:d}):r.jsxs(bt,{isActive:g,onClick:()=>t(f),tooltip:u.label,className:`h-11 px-3 transition-all font-medium rounded-lg mb-1 mx-2 w-[calc(100%-16px)] ${g?"bg-[var(--sidebar-primary)] text-white hover:bg-[var(--sidebar-primary)] hover:text-white shadow-[0_4px_12px_rgba(0,163,255,0.3)]":"text-slate-300 hover:text-white hover:bg-white/5"}`,children:[r.jsx(u.icon,{className:`h-4.5 w-4.5 min-w-[1.125rem] ${g?"text-white":"text-slate-400 group-hover:text-white"}`}),r.jsx("span",{className:"ml-2 uppercase text-[11px] tracking-wide flex-1",children:d(u.label,l)}),u.isPremium&&r.jsx(gn,{className:"ml-auto bg-indigo-500/20 text-indigo-400 border-none px-1.5 py-0 text-[8px] font-bold uppercase tracking-tight",children:"Pro"})]})},u.path)})})})})]})})}function Qo({item:e,location:n,setLocation:t,isCollapsed:a,currentSearch:s,cid:o,bestMatchItem:i,highlightMatch:l}){var g;const d=xe(e.path,o),p=e===i,m=(g=e.submenu)==null?void 0:g.some(x=>{const b=xe(x.path,o);return Mt(b,n,s)}),h=Mt(d,n,s)||m,[u,f]=c.useState(h);return c.useEffect(()=>{h&&f(!0)},[h]),r.jsxs("div",{className:"space-y-1",children:[r.jsxs(bt,{onClick:()=>f(!u),tooltip:e.label,isActive:p,className:`h-11 px-3 transition-all font-medium rounded-lg mb-1 mx-2 w-[calc(100%-16px)] ${p?"bg-[var(--sidebar-primary)] text-white shadow-[0_4px_12px_rgba(0,163,255,0.3)]":"text-slate-300 hover:text-white hover:bg-white/5"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(e.icon,{className:`h-4.5 w-4.5 min-w-[1.125rem] ${p?"text-white":"text-slate-400"}`}),r.jsx("span",{className:"ml-2",children:l(e.label,s)})]}),!a&&r.jsx("div",{className:"ml-auto opacity-60",children:u?r.jsx(vs,{className:"h-3 w-3"}):r.jsx(Cn,{className:"h-3 w-3"})})]}),u&&!a&&r.jsx("div",{className:"pl-4 space-y-1 mt-1 border-l ml-4",children:e.submenu.map(x=>{const b=xe(x.path,o),w=x===i;return r.jsx(bt,{isActive:w,onClick:()=>t(b),className:`h-9 px-3 transition-all font-medium rounded-lg mx-2 mb-0.5 w-[calc(100%-16px)] ${w?"bg-[var(--sidebar-primary)] text-white hover:bg-[var(--sidebar-primary)] hover:text-white":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:r.jsx("span",{className:"ml-1",children:l(x.label,s)})},x.path)})})]})}export{Ts as C,$i as D,Le as F,Ct as G,An as I,Se as L,Ao as P,Qt as R,mr as S,In as a,Bn as b,On as c,kt as d,Fn as e,Hn as f,Ro as g,kr as h,Mo as i,Lo as j,Fo as k,Xt as l,Is as m,$o as n,Fs as o,Hs as p,zs as q,fa as u};
