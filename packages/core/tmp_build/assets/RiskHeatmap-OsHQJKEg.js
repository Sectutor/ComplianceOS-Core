import{r as h,j as o,c as g}from"./index-DOc7Nwb7.js";import{c as p}from"./utils-BC5CVi_C.js";const m=i=>{if(!i)return 0;const s=i.toString().toLowerCase().trim();let e=parseInt(s.charAt(0));return isNaN(e)&&(s.includes("critical")||s.includes("extreme")||s.includes("catastrophic")?e=5:s.includes("very high")||s.includes("almost certain")?e=4:s.includes("high")||s.includes("likely")||s.includes("major")?e=3:s.includes("medium")||s.includes("moderate")||s.includes("possible")?e=2:(s.includes("low")||s.includes("unlikely")||s.includes("minor")||s.includes("rare")||s.includes("insignificant"))&&(e=1)),e>=1&&e<=5?e:0};function N({assessments:i=[],onFilterChange:s,activeFilter:e,type:c="inherent",title:u}){const a=h.useMemo(()=>{const n={};return!i||!Array.isArray(i)||i.forEach(t=>{let r=0,l=0;if(c==="residual"){const d=m(t.residualRisk);d>0&&(r=d,l=d)}else r=m(t.likelihood),l=m(t.impact);if(r>0&&l>0){const d=`${r}-${l}`;n[d]=(n[d]||0)+1}}),n},[i,c]),x=(n,t)=>{const r=n*t;return r>=15?"bg-red-500 hover:bg-red-600 text-white":r>=8?"bg-orange-500 hover:bg-orange-600 text-white":r>=4?"bg-yellow-400 hover:bg-yellow-500 text-black":"bg-green-400 hover:bg-green-500 text-black"},f=(n,t)=>{const r=n.toString(),l=t.toString();(e==null?void 0:e.likelihood)===r&&(e==null?void 0:e.impact)===l&&(e==null?void 0:e.type)===c?s(null):s({likelihood:r,impact:l,type:c})};return o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-sm",children:u||(c==="residual"?"Residual Risk":"Inherent Risk")}),(e==null?void 0:e.type)===c&&o.jsx(g,{variant:"ghost",size:"sm",onClick:()=>s(null),className:"h-6 text-xs text-muted-foreground hover:text-foreground",children:"Clear Filter"})]}),o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex items-center justify-center mr-2",children:o.jsx("span",{className:"text-xs font-medium text-muted-foreground -rotate-90 whitespace-nowrap",children:"Likelihood"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex flex-col gap-1",children:[5,4,3,2,1].map(n=>o.jsxs("div",{className:"flex gap-1 h-10 md:h-12",children:[o.jsx("div",{className:"w-6 flex items-center justify-center text-xs text-muted-foreground font-medium",children:n}),[1,2,3,4,5].map(t=>{const r=`${n}-${t}`,l=a[r]||0,d=(e==null?void 0:e.likelihood)===n.toString()&&(e==null?void 0:e.impact)===t.toString()&&(e==null?void 0:e.type)===c;return o.jsx("div",{onClick:()=>f(n,t),className:p("flex-1 rounded-md flex items-center justify-center text-xs font-bold cursor-pointer transition-all duration-200 shadow-sm",x(n,t),d?"ring-2 ring-offset-2 ring-primary scale-105 z-10":"opacity-90 hover:opacity-100"),title:`Likelihood: ${n}, Impact: ${t} (${l} risks)`,children:l>0&&o.jsx("span",{className:"drop-shadow-md",children:l})},r)})]},n))}),o.jsx("div",{className:"flex gap-1 mt-1 pl-6",children:[1,2,3,4,5].map(n=>o.jsx("div",{className:"flex-1 flex items-center justify-center text-xs text-muted-foreground font-medium",children:n},n))}),o.jsx("div",{className:"flex items-center justify-center mt-2 pl-6",children:o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Impact"})})]})]})]})}export{N as R};
