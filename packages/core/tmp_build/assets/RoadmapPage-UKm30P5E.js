import{ab as V,ac as M,b as A,r as c,R as g,t as m,i as v,j as e,x as L,C as y,d as C,e as S,f as T,m as P,c as f}from"./index-DOc7Nwb7.js";import{C as B}from"./calendar-CRg26W4I.js";import{D as R,m as k,P as G,g as U,h as O}from"./DashboardLayout-aHnUqq57.js";import{c as j}from"./utils-BC5CVi_C.js";import{T as K,a as Y,b as D,c as I}from"./tabs-CBDTXbEn.js";import H from"./RoadmapDashboard-BZWxgAuE.js";import{K as Q,E as W}from"./ExecutionDashboard-DtUWsRqn.js";import{P as $}from"./PageGuide-CPKKXXS6.js";import{T as F}from"./trending-up-eUiO956o.js";import{C as E}from"./clock-osbacZli.js";import{C as q}from"./calendar-BlLJlGbj.js";import{A as J}from"./arrow-right-M96iV-v9.js";import{f as X}from"./format-H2tx8_vS.js";import"./differenceInCalendarDays-nctqlg7V.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./endOfWeek-tX_WdcBG.js";import"./en-US-Bfz1jvxT.js";import"./startOfMonth-BTb_IeTV.js";import"./isSameDay-CGHMiO64.js";import"./chevron-left-DZH-lUm7.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./progress-B-1k4ZZX.js";import"./download-ByfWg1Mi.js";import"./panels-top-left-DItCQeAG.js";import"./plus-BaQ35Jcx.js";import"./bar-chart-3-BCngNY6H.js";import"./ellipsis-vertical-DBvk9Y0C.js";import"./eachDayOfInterval-N9Sq06pl.js";import"./ellipsis-BXWwt8ER.js";import"./list-BZOuFwEg.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";function rt(){const l=V(),p=l.id?parseInt(l.id,10):null,{selectedClientId:i,setSelectedClientId:b}=M(),a=p||i,[r]=A(),n=()=>r.includes("/roadmap/create")?"create":r.includes("/roadmap/templates")?"templates":"list",[s,d]=c.useState("strategic"),[o,t]=c.useState(n());g.useEffect(()=>{r.includes("/roadmap/create")?t("create"):r.includes("/roadmap/templates")?t("templates"):r.includes("/roadmap/dashboard")&&t("list")},[r]);const u=m.useContext(),{data:x,isLoading:z}=m.roadmap.list.useQuery({clientId:a},{enabled:!!a}),{data:h,isLoading:_}=m.roadmap.listStrategic.useQuery({clientId:a},{enabled:!!a}),w=h==null?void 0:h[0];if(g.useEffect(()=>{w&&o==="create"&&(v.info("Roadmap already exists. Switching to view mode."),t("list"))},[w,o]),z)return e.jsx(R,{children:e.jsx("div",{className:"flex h-[calc(100vh-64px)] items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(L,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Loading roadmap data..."})]})})});const N=x==null?void 0:x[0];return e.jsx(R,{children:e.jsx("div",{className:"p-8",children:a?e.jsxs(K,{value:s,onValueChange:d,className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Roadmap & Implementation"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Strategic planning and execution oversight."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{...g.useMemo(()=>s==="execution"?{title:"Execution Dashboard",description:"Track task completion and team velocity.",rationale:"Operational view for getting things done.",howToUse:[{step:"Kanban Board",description:"Drag and drop tasks to update status."},{step:"My Tasks",description:"Filter to see only your assigned items."}]}:o==="create"?{title:"Create Roadmap",description:"Wizard to initialize a new strategic plan.",rationale:"Sets the baseline timeline and goals.",howToUse:[{step:"General Info",description:"Name your roadmap (e.g., 'FY24 Compliance')."},{step:"Timeline",description:"Set start and end dates."},{step:"Drivers",description:"Select business objectives."}]}:o==="templates"?{title:"Roadmap Templates",description:"Pre-configured plans for standard frameworks.",rationale:"Save time by starting with industry best practices.",howToUse:[{step:"Browse",description:"Filter templates by framework (ISO, SOC2, etc.)."},{step:"Preview",description:"View the Gantt chart preview."},{step:"Apply",description:"Clone the template to your client."}]}:{title:"Roadmap Strategy",description:"High-level overview of compliance initiatives.",rationale:"Aligns compliance activities with business milestones.",howToUse:[{step:"Timeline View",description:"Visualize dependencies and critical path."},{step:"Milestones",description:"Track major audit dates and deliverables."},{step:"Scenario Planning",description:"Create alternative roadmaps."}],integrations:[{name:"Executive Reporting",description:"Feeds into board reports."}]},[s,o])}),e.jsxs(Y,{children:[e.jsxs(D,{value:"strategic",className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"})," Strategic"]}),e.jsxs(D,{value:"execution",className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"})," Execution"]})]})]})]}),e.jsx(I,{value:"strategic",className:"border-none p-0 outline-none",children:e.jsx(H,{clientId:a,initialView:o})}),e.jsx(I,{value:"execution",className:"border-none p-0 outline-none",children:N?e.jsx(W,{planId:N.id}):e.jsx(Z,{clientId:a,onCreated:()=>u.roadmap.list.invalidate()})})]}):e.jsx("div",{className:"flex h-[calc(100vh-200px)] items-center justify-center border-2 border-dashed rounded-lg",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"No Client Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Please select a client from the sidebar to view their roadmap."})]})})})})}function Z({clientId:l,onCreated:p}){const[i,b]=c.useState(void 0),[a,r]=c.useState(6),[n,s]=c.useState("duration"),d=m.roadmap.generate.useMutation({onSuccess:()=>{v.success("Roadmap generated successfully!"),p()},onError:t=>{v.error("Failed to generate roadmap: "+t.message)}}),o=()=>{l&&d.mutate({clientId:l,title:`Remediation Roadmap ${new Date().getFullYear()}`,targetDate:n==="date"&&i?i.toISOString():void 0,monthsDuration:n==="duration"?a:void 0})};return e.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center bg-gray-50/50 p-8",children:e.jsxs("div",{className:"max-w-3xl w-full",children:[e.jsxs("div",{className:"text-center mb-10 space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary/10 mb-4",children:e.jsx(F,{className:"h-8 w-8 text-primary"})}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900",children:"Build Your Remediation Roadmap"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-xl mx-auto",children:"Transform compliance gaps into an actionable project plan. Select your target date or duration below."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(y,{className:j("cursor-pointer transition-all border-2 hover:border-primary hover:shadow-lg relative overflow-hidden",n==="duration"?"border-primary ring-1 ring-primary/20":"border-transparent shadow-sm"),onClick:()=>s("duration"),children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(E,{className:"w-24 h-24"})}),e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-primary"}),"Fixed Duration"]}),e.jsx(T,{children:"Best for sprints or quartely goals"})]}),e.jsx(P,{children:e.jsx("div",{className:"flex gap-2 relative z-10",children:[3,6,12].map(t=>e.jsxs(f,{size:"sm",variant:a===t?"default":"outline",onClick:u=>{u.stopPropagation(),r(t),s("duration")},className:"flex-1",children:[t," Months"]},t))})})]}),e.jsxs(y,{className:j("cursor-pointer transition-all border-2 hover:border-primary hover:shadow-lg relative overflow-hidden",n==="date"?"border-primary ring-1 ring-primary/20":"border-transparent shadow-sm"),onClick:()=>s("date"),children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(k,{className:"w-24 h-24"})}),e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),"Target Date"]}),e.jsx(T,{children:"Best for audit deadlines"})]}),e.jsx(P,{children:e.jsx("div",{className:"relative z-10",children:e.jsxs(G,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:j("w-full justify-start text-left font-normal",!i&&"text-muted-foreground"),onClick:t=>{t.stopPropagation(),s("date")},children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),i?X(i,"PPP"):e.jsx("span",{children:"Pick a deadline"})]})}),e.jsx(O,{className:"w-auto p-0",children:e.jsx(B,{mode:"single",selected:i,onSelect:t=>{b(t),s("date")},initialFocus:!0})})]})})})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsxs(f,{onClick:o,disabled:d.isLoading,size:"lg",className:"px-8 h-12 text-lg shadow-xl shadow-primary/20",children:[d.isLoading?e.jsx(L,{className:"mr-2 h-5 w-5 animate-spin"}):e.jsx(J,{className:"mr-2 h-5 w-5"}),"Generate Action Plan"]})})]})})}export{rt as default};
