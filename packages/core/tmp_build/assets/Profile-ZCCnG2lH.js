import{M as F,u as z,av as Y,r as l,t as q,j as e,C as i,d,X as B,aw as H,Y as Z,e as n,f as c,k as G,S as J,m as o,L as j,I as f,c as x,x as I,T,ax as _,i as h}from"./index-DOc7Nwb7.js";import{D as Q}from"./DashboardLayout-aHnUqq57.js";import{S as R}from"./separator-BWuYil37.js";import{A as X,h as K,a as V,b as W,c as ee,d as se,e as ae,f as re}from"./alert-dialog-V7xGXdVc.js";import{M as te}from"./mail-xRDvl6QK.js";import{U as le}from"./user-CqRnJLgW.js";import{S as ie}from"./save-CvVmWchr.js";import{L as de}from"./lock-czWF3qbC.js";import{L as U}from"./laptop-CVZplMDc.js";import{T as ne}from"./trash-2-CFEfisbM.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function Xe(){var S,L,M;const{user:s,session:p}=z(),{theme:t,setTheme:u}=Y(),[m,N]=l.useState(""),[b,y]=l.useState(!1),[O,v]=l.useState(!1),[w,k]=l.useState(""),[C,A]=l.useState(!1),{data:g}=q.clients.list.useQuery(),D=((S=g==null?void 0:g[0])==null?void 0:S.name)||"your organization";l.useEffect(()=>{var a;(a=s==null?void 0:s.user_metadata)!=null&&a.full_name&&N(s.user_metadata.full_name)},[s]);const P=async a=>{a.preventDefault(),y(!0);try{const{error:r}=await _.auth.updateUser({data:{full_name:m}});if(r)throw r;h.success("Profile updated successfully")}catch(r){h.error("Failed to update profile: "+r.message)}finally{y(!1)}},E=a=>{var r;return a?a.split(" ").map($=>$[0]).join("").substring(0,2).toUpperCase():((r=s==null?void 0:s.email)==null?void 0:r.charAt(0).toUpperCase())||"U"};return e.jsx(Q,{children:e.jsxs("div",{className:"w-full mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Profile & Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your account settings and preferences."})]})}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[e.jsxs(i,{className:"md:col-span-1 shadow-md border-muted/40",children:[e.jsxs(d,{className:"text-center pb-2",children:[e.jsxs("div",{className:"mx-auto mb-4 relative",children:[e.jsxs(B,{className:"h-24 w-24 border-4 border-background shadow-xl",children:[e.jsx(H,{src:(L=s==null?void 0:s.user_metadata)==null?void 0:L.avatar_url}),e.jsx(Z,{className:"text-2xl font-bold bg-primary/10 text-primary",children:E(m||(s==null?void 0:s.email)||"")})]}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 w-4 h-4 rounded-full border-2 border-background"})]}),e.jsx(n,{className:"text-xl",children:m||"User"}),e.jsxs(c,{className:"flex items-center justify-center gap-1.5 mt-1",children:[e.jsx(te,{className:"h-3.5 w-3.5"})," ",s==null?void 0:s.email]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(G,{variant:"secondary",className:"px-3 py-1 bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),((M=p==null?void 0:p.user)==null?void 0:M.role)==="authenticated"?"Member":"Guest"]})})]}),e.jsxs(o,{className:"space-y-4 pt-4",children:[e.jsx(R,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium uppercase tracking-wider",children:"Joined"}),e.jsx("p",{className:"font-medium",children:new Date((s==null?void 0:s.created_at)||"").toLocaleDateString()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium uppercase tracking-wider",children:"Last Sign In"}),e.jsx("p",{className:"font-medium",children:new Date((s==null?void 0:s.last_sign_in_at)||"").toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(i,{className:"shadow-sm border-muted/40",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"text-lg flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"Personal Information"]}),e.jsx(c,{children:"Update your personal details visible to other team members."})]}),e.jsx(o,{children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"email",children:"Email Address"}),e.jsx(f,{id:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:"bg-muted/50"}),e.jsx("p",{className:"text-[0.8rem] text-muted-foreground",children:"Email address cannot be changed."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"fullName",children:"Full Name"}),e.jsx(f,{id:"fullName",value:m,onChange:a=>N(a.target.value),placeholder:"Enter your full name",className:"bg-background"})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs(x,{type:"submit",disabled:b,className:"gap-2",children:[b?e.jsx(I,{className:"h-4 w-4 animate-spin"}):e.jsx(ie,{className:"h-4 w-4"}),"Save Changes"]})})]})})]}),e.jsxs(i,{className:"shadow-sm border-muted/40",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"text-lg flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Security"]}),e.jsx(c,{children:"Manage your password and account security."})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Password"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Update your password associated with this account."})]}),e.jsx(x,{variant:"outline",onClick:()=>window.location.href="/update-password",children:"Change Password"})]})})})]}),e.jsxs(i,{className:"shadow-sm border-muted/40",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"text-lg flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),"Appearance"]}),e.jsx(c,{children:"Customize how Compliance OS looks comfortably for you."})]}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all hover:bg-accent ${t==="light"?"border-primary bg-primary/5":"border-transparent bg-muted/30"}`,onClick:()=>u("light"),children:[e.jsx(oe,{className:`h-6 w-6 ${t==="light"?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium",children:"Light"})]}),e.jsxs("div",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all hover:bg-accent ${t==="dark"?"border-primary bg-primary/5":"border-transparent bg-muted/30"}`,onClick:()=>u("dark"),children:[e.jsx(ce,{className:`h-6 w-6 ${t==="dark"?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium",children:"Dark"})]}),e.jsxs("div",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all hover:bg-accent ${t==="system"?"border-primary bg-primary/5":"border-transparent bg-muted/30"}`,onClick:()=>u("system"),children:[e.jsx(U,{className:`h-6 w-6 ${t==="system"?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium",children:"System"})]})]})})]}),e.jsxs(i,{className:"shadow-sm border-red-200 dark:border-red-900/50",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"text-lg flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(T,{className:"h-5 w-5"}),"Danger Zone"]}),e.jsx(c,{children:"Irreversible and destructive actions."})]}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 dark:border-red-900/50 rounded-lg bg-red-50/50 dark:bg-red-950/20",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"Close Account"}),e.jsx("div",{className:"text-sm text-red-600/80 dark:text-red-400/80",children:"Permanently delete your account and all associated data."})]}),e.jsxs(X,{open:O,onOpenChange:v,children:[e.jsx(K,{asChild:!0,children:e.jsxs(x,{variant:"destructive",className:"gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Close Account"]})}),e.jsxs(V,{className:"max-w-md",children:[e.jsxs(W,{children:[e.jsxs(ee,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(T,{className:"h-5 w-5"}),"Close Your Account?"]}),e.jsx(se,{asChild:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-950/50 border border-red-200 dark:border-red-800 rounded-lg text-red-800 dark:text-red-200 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"⚠️ This action is permanent and cannot be undone."}),e.jsx("p",{children:"All of the following will be permanently deleted:"}),e.jsxs("ul",{className:"list-disc ml-5 mt-2 space-y-1",children:[e.jsx("li",{children:"Your user account and profile"}),e.jsx("li",{children:"All policies, controls, and evidence"}),e.jsx("li",{children:"All risk assessments and audit history"}),e.jsx("li",{children:"All vendor data and integrations"}),e.jsx("li",{children:"All team members and their access"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"confirm-org",className:"text-foreground",children:["To confirm, type ",e.jsxs("span",{className:"font-mono font-bold",children:['"',D,'"']})," below:"]}),e.jsx(f,{id:"confirm-org",value:w,onChange:a=>k(a.target.value),placeholder:"Type organization name to confirm",className:"border-red-200 focus:border-red-400"})]})]})})]}),e.jsxs(ae,{children:[e.jsx(re,{onClick:()=>k(""),children:"Cancel"}),e.jsxs(x,{variant:"destructive",disabled:w!==D||C,onClick:async()=>{A(!0);try{await _.auth.signOut(),h.success("Your account closure request has been submitted."),window.location.href="/login"}catch(a){h.error("Failed to close account: "+a.message)}finally{A(!1),v(!1)}},children:[C?e.jsx(I,{className:"h-4 w-4 animate-spin mr-2"}):null,"I understand, close my account"]})]})]})]})]})})]})]})]})]})})}export{Xe as default};
