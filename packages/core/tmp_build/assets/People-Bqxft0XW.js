import{M as ze,r as m,j as e,C as G,m as W,k as H,t as N,i as x,D as is,o as ls,p as rs,q as ns,L as i,E as O,G as E,H as k,J as M,K as b,S as os,I as h,F as ds,w as cs,c as n,au as hs,U as be,d as ie,e as le,f as re,N as ye,O as Ce,P as Q,Q as p,V as we,W as g}from"./index-DOc7Nwb7.js";import{P as ms}from"./PageGuide-CPKKXXS6.js";import{D as xs,C as Re,G as ps}from"./DashboardLayout-aHnUqq57.js";import{B as gs}from"./Breadcrumb-CRi3LAxS.js";import{E as q}from"./enhanced-dialog-CeRPsI16.js";import{T as us,a as js,b as ne,c as oe}from"./tabs-CBDTXbEn.js";import{T as ce}from"./textarea-BtxBxzdY.js";import{c as de}from"./utils-BC5CVi_C.js";import{L as Ve}from"./laptop-CVZplMDc.js";import{A as fs,a as vs,b as Ns}from"./alert-BudCfM-X.js";import{P as bs}from"./progress-B-1k4ZZX.js";import{A as Se,a as Ie,b as Ae,c as De,d as Te,e as Oe,f as Ee,g as ke}from"./alert-dialog-V7xGXdVc.js";import{S as ys}from"./search-CwuIBBPE.js";import{N as Me}from"./network-CgrL7DP_.js";import{G as Cs}from"./git-graph-BZPB1uXv.js";import{P as Pe}from"./plus-BaQ35Jcx.js";import{F as ws}from"./file-check-De1wUTh7.js";import{C as Rs}from"./clock-osbacZli.js";import{C as Ss}from"./circle-check-C5kiwRoG.js";import{P as Fe}from"./pen-BlTNmlLB.js";import{T as Le}from"./trash-2-CFEfisbM.js";import{R as Is}from"./rotate-cw-asiX3B-o.js";import"./scroll-area-DPaNxEJD.js";import"./separator-BWuYil37.js";import"./book-open-BffBrdze.js";import"./link-FmUqdGRG.js";import"./info-By5wLOUH.js";import"./index--2vFva6Y.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./settings-CIu9FFiX.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ze("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Ts=({employee:a})=>{var y,u;const r=`${((y=a.firstName)==null?void 0:y[0])||""}${((u=a.lastName)==null?void 0:u[0])||""}`,d=a.orgRoleTitle||a.jobTitle||"No Title",c=(R=>{if(!R)return"bg-slate-100 border-slate-200 text-slate-700";const w=["bg-blue-100 border-blue-200 text-blue-700","bg-emerald-100 border-emerald-200 text-emerald-700","bg-violet-100 border-violet-200 text-violet-700","bg-amber-100 border-amber-200 text-amber-700","bg-rose-100 border-rose-200 text-rose-700","bg-cyan-100 border-cyan-200 text-cyan-700"];let j=0;for(let S=0;S<R.length;S++)j=R.charCodeAt(S)+((j<<5)-j);return w[Math.abs(j)%w.length]})(a.department);return e.jsx(G,{className:de("w-[180px] shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer mx-auto relative z-10 border-l-4","border-t border-r border-b border-slate-200",a.department?c.replace("bg-","border-").replace("text-",""):"border-slate-300"),children:e.jsxs(W,{className:"p-3 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:de("h-12 w-12 rounded-full flex items-center justify-center text-base font-bold border-4 border-white shadow-sm -mt-8",c),children:r}),e.jsxs("div",{className:"w-full",children:[e.jsxs("h3",{className:"font-bold text-slate-900 truncate w-full text-sm",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-[10px] font-medium text-slate-600 truncate mb-1",children:d}),a.department&&e.jsx(H,{variant:"secondary",className:de("text-[9px] px-1.5 h-4 font-semibold",c),children:a.department})]})]})})},He=({node:a})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"pt-6",children:[" ",e.jsx(Ts,{employee:a})]}),a.children.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-6 bg-slate-300"}),e.jsx("div",{className:"flex relative",children:a.children.map((r,d)=>{const C=d===0,c=d===a.children.length-1,y=a.children.length===1;return e.jsxs("div",{className:"flex flex-col items-center px-2 relative",children:[e.jsx("div",{className:"w-px h-6 bg-slate-300 absolute top-0 left-1/2 -translate-x-1/2"}),!y&&e.jsxs(e.Fragment,{children:[!C&&e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-px bg-slate-300"}),!c&&e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-px bg-slate-300"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(He,{node:r})})]},r.id)})})]})]});function Os({employees:a}){const r=m.useMemo(()=>{const d=new Map,C=[];return a.forEach(c=>{d.set(c.id,{...c,children:[]})}),a.forEach(c=>{const y=d.get(c.id),u=c.managerId?Number(c.managerId):null;u&&d.has(u)?d.get(u).children.push(y):C.push(y)}),C},[a]);return a.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No employees found to generate chart."}):e.jsx("div",{className:"w-full overflow-x-auto p-8 bg-slate-50/50 rounded-xl min-h-[500px] flex justify-center items-start",children:e.jsx("div",{className:"flex gap-8",children:r.map(d=>e.jsx(He,{node:d},d.id))})})}function Es({open:a,onOpenChange:r,employeeId:d,clientId:C,onSuccess:c,employeeName:y}){const[u,R]=m.useState("laptop"),[w,j]=m.useState(""),[S,t]=m.useState(""),o=N.useContext(),z=N.onboarding.assignAsset.useMutation({onSuccess:()=>{x.success("Asset assigned successfully"),o.onboarding.getCompanyOnboardingStatus.invalidate(),r(!1),R("laptop"),j(""),t(""),c==null||c()},onError:I=>{x.error(`Failed to assign asset: ${I.message}`)}}),F=I=>{I.preventDefault(),z.mutate({clientId:C,employeeId:d,assetType:u,serialNumber:w||void 0,notes:S||void 0})};return e.jsx(is,{open:a,onOpenChange:r,children:e.jsxs(ls,{className:"sm:max-w-[425px]",children:[e.jsxs(rs,{children:[e.jsx(ns,{children:"Assign Asset"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assigning equipment or access to ",e.jsx("span",{className:"font-medium text-foreground",children:y})]})]}),e.jsxs("form",{onSubmit:F,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"assetType",children:"Asset Type"}),e.jsxs(O,{value:u,onValueChange:R,children:[e.jsx(E,{id:"assetType",children:e.jsx(k,{placeholder:"Select asset type"})}),e.jsxs(M,{children:[e.jsx(b,{value:"laptop",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Laptop / Workstation"})]})}),e.jsx(b,{value:"badge",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{children:"access Badge / Key card"})]})}),e.jsx(b,{value:"software_access",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx("span",{children:"Software Access / VPN"})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"serialNumber",children:"Serial Number / ID (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(h,{id:"serialNumber",placeholder:"e.g. SN-12345678",className:"pl-9",value:w,onChange:I=>j(I.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ds,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{id:"notes",placeholder:"Additional details about this assignment...",className:"pl-9 min-h-[80px]",value:S,onChange:I=>t(I.target.value)})]})]}),e.jsxs(cs,{className:"pt-4",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(n,{type:"submit",disabled:z.isLoading,children:z.isLoading?"Assigning...":"Assign Asset"})]})]})]})})}function Et(){var Ne;const[,a]=hs("/clients/:clientId/people"),r=a!=null&&a.clientId?parseInt(a.clientId):0,{data:d}=N.clients.get.useQuery({id:r},{enabled:r>0}),[C,c]=m.useState(""),[y,u]=m.useState(!1),[R,w]=m.useState(!1),[j,S]=m.useState(null),[t,o]=m.useState({firstName:"",lastName:"",email:"",department:"",jobTitle:"",phone:"",orgRoleId:"",managerId:"",employmentStatus:"active"}),[z,F]=m.useState(!1),[I,$]=m.useState(!1),[V,he]=m.useState(null),[l,v]=m.useState({title:"",description:"",responsibilities:"",department:"",reportingRoleId:""}),[A,K]=m.useState(null),[L,J]=m.useState(null),[$e,me]=m.useState(!1),[U,xe]=m.useState(null),{data:B=[],isLoading:pe,refetch:P}=N.employees.list.useQuery({clientId:r}),ge=C.toLowerCase().trim(),_=B.filter(s=>ge?`${s.firstName} ${s.lastName} ${s.email} ${s.jobTitle||""} ${s.orgRoleTitle||""} ${s.department||""}`.toLowerCase().includes(ge):!0),{data:T=[],refetch:X}=N.orgRoles.list.useQuery({clientId:r}),{data:Ue=[]}=((Ne=N.onboarding.getCompanyOnboardingStatus)==null?void 0:Ne.useQuery({clientId:r},{enabled:r>0}))||{data:[]},Y=new Map(Ue.map(s=>[s.employeeId,s])),Z=N.employees.create.useMutation({onSuccess:()=>{x.success("Employee added successfully"),u(!1),ue(),P()},onError:s=>x.error(s.message)}),ee=N.employees.update.useMutation({onSuccess:()=>{x.success("Employee updated successfully"),w(!1),S(null),P()},onError:s=>x.error(s.message)}),Be=N.employees.delete.useMutation({onSuccess:()=>{x.success("Employee deleted successfully"),P()},onError:s=>x.error(s.message)}),se=N.orgRoles.create.useMutation({onSuccess:()=>{x.success("Role created successfully"),F(!1),fe(),X(),P()},onError:s=>x.error(s.message)}),te=N.orgRoles.update.useMutation({onSuccess:()=>{x.success("Role updated successfully"),$(!1),he(null),X(),P()},onError:s=>x.error(s.message)}),Qe=N.orgRoles.delete.useMutation({onSuccess:()=>{x.success("Role deleted successfully"),X(),P()},onError:s=>x.error(s.message)}),ue=()=>{o({firstName:"",lastName:"",email:"",department:"",jobTitle:"",phone:"",orgRoleId:"",managerId:"",employmentStatus:"active"})},qe=async()=>{if(!t.firstName||!t.lastName||!t.email){x.error("Please fill in all required fields");return}await Z.mutateAsync({clientId:r,...t,orgRoleId:t.orgRoleId?parseInt(t.orgRoleId):void 0,managerId:t.managerId?parseInt(t.managerId):void 0})},Ge=async()=>{j&&await ee.mutateAsync({id:j.id,...t,orgRoleId:t.orgRoleId?parseInt(t.orgRoleId):void 0,managerId:t.managerId?parseInt(t.managerId):void 0})},We=s=>{K(s)},Ke=async()=>{A&&(await Be.mutateAsync({id:A.id}),K(null))},Je=s=>{S(s),o({firstName:s.firstName,lastName:s.lastName,email:s.email,department:s.department||"",jobTitle:s.jobTitle||"",phone:s.phone||"",orgRoleId:s.orgRoleId?s.orgRoleId.toString():"",managerId:s.managerId?s.managerId.toString():"",employmentStatus:s.employmentStatus||"active"}),w(!0)},je=()=>{ue(),u(!0)},_e=s=>{xe(s),me(!0)},fe=()=>{v({title:"",description:"",responsibilities:"",department:"",reportingRoleId:""})},Xe=async()=>{if(!l.title){x.error("Role title is required");return}await se.mutateAsync({clientId:r,...l,reportingRoleId:l.reportingRoleId?parseInt(l.reportingRoleId):void 0})},Ye=async()=>{V&&await te.mutateAsync({id:V.id,...l,reportingRoleId:l.reportingRoleId?parseInt(l.reportingRoleId):void 0})},Ze=s=>{J(s)},es=async()=>{L&&(await Qe.mutateAsync({id:L.id}),J(null))},ss=s=>{he(s),v({title:s.title,description:s.description||"",responsibilities:s.responsibilities||"",department:s.department||"",reportingRoleId:s.reportingRoleId?s.reportingRoleId.toString():""}),$(!0)},ve=()=>{fe(),F(!0)},[ae,ts]=m.useState(!1);return e.jsxs(xs,{children:[U&&e.jsx(Es,{open:$e,onOpenChange:s=>{me(s),s||xe(null)},employeeId:U.id,clientId:r,employeeName:`${U.firstName} ${U.lastName}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(gs,{items:[{label:"Clients",href:"/clients"},{label:(d==null?void 0:d.name)||"Client",href:`/clients/${r}`},{label:"People & Org"}]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"People & Organization"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage team members, roles, and responsibilities"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(ys,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search people...",value:C,onChange:s=>c(s.target.value),className:"pl-8"})]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>ts(!ae),className:"gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),ae?"Hide Help":"What's the difference?"]}),e.jsx(ms,{title:"People & Organization Management",description:"Manage your team structure, roles, and employee records.",rationale:"Compliance requires clear lines of authority and responsibility. This module separates 'Who works here' (Employees) from 'What they do' (Roles) to ensure continuity even when staff changes.",howToUse:[{step:"Define Structure",description:"Use the 'Org Structure' tab to create standard roles (e.g. 'CISO') and reporting lines."},{step:"Add Team",description:"Add employees in the 'Team Members' tab and assign them to the roles you defined."},{step:"Visualize",description:"View the 'Visual Chart' to audit your reporting hierarchy and identify gaps."},{step:"Assign Assets",description:"Use the laptop icon to assign devices to employees."}],integrations:[{name:"Access Control",description:"Roles defined here determine access levels in connected systems."},{name:"Training",description:"Training assignments are linked to specific job roles."},{name:"Offboarding",description:"Terminating an employee here triggers the offboarding workflow."}]})]})]}),ae&&e.jsxs(fs,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Re,{className:"h-4 w-4 text-blue-600"}),e.jsx(vs,{className:"text-blue-800 font-semibold mb-2",children:"Understanding Org Structure vs. Team Members"}),e.jsx(Ns,{className:"text-blue-700",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-1",children:[e.jsx(Me,{className:"w-4 h-4"}),"Org Structure (The Blueprint)"]}),e.jsxs("p",{className:"text-sm mb-2",children:["This defines the ",e.jsx("strong",{children:"Roles"}),' available in your organization (e.g., "CISO", "Security Analyst"), regardless of who fills them.']}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1 ml-1 opacity-90",children:[e.jsx("li",{children:"Defines standardized job titles & responsibilities"}),e.jsx("li",{children:"Sets reporting lines (who reports to whom)"}),e.jsx("li",{children:"Required for compliance governance (ISO 27001/SOC 2)"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-1",children:[e.jsx(be,{className:"w-4 h-4"}),"Team Members (The People)"]}),e.jsxs("p",{className:"text-sm mb-2",children:["This is the roster of actual ",e.jsx("strong",{children:"Individuals"})," working at the company right now."]}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1 ml-1 opacity-90",children:[e.jsx("li",{children:"Real employees with contact info & status"}),e.jsx("li",{children:'Assigned to "Org Roles" to give them responsibilities'}),e.jsx("li",{children:"Used for tracking training, tasks, and evidence ownership"})]})]})]})})]}),e.jsxs(us,{defaultValue:"roles",className:"w-full",children:[e.jsxs(js,{className:"grid w-full max-w-[600px] grid-cols-3",children:[e.jsxs(ne,{value:"roles",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Org Structure"]}),e.jsxs(ne,{value:"employees",className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Team Members"]}),e.jsxs(ne,{value:"chart",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Visual Chart"]})]}),e.jsxs(oe,{value:"employees",className:"mt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(n,{onClick:je,className:"gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Add Employee"]})}),e.jsxs(G,{children:[e.jsxs(ie,{children:[e.jsxs(le,{children:["Team Members (",_.length,")"]}),e.jsx(re,{children:"View and manage employees, assign structured roles and reporting lines."})]}),e.jsx(W,{children:pe?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading employees..."}):B.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No employees added yet"}),e.jsx(n,{variant:"outline",onClick:je,className:"mt-4",children:"Add First Employee"})]}):e.jsx("div",{className:"rounded-xl border border-slate-200 shadow-lg overflow-hidden bg-white",children:e.jsxs(ye,{children:[e.jsx(Ce,{children:e.jsxs(Q,{className:"bg-[#1C4D8D] hover:bg-[#1C4D8D] border-none",children:[e.jsx(p,{className:"text-white font-semibold py-4",children:"Name"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Email"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Role / Title"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Department"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Manager"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Status"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Training"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Policies"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Compliance"}),e.jsx(p,{className:"w-20 text-white font-semibold py-4",children:"Actions"})]})}),e.jsx(we,{children:_.map(s=>e.jsxs(Q,{className:"bg-white border-b border-slate-200 transition-all duration-200 hover:bg-slate-50 hover:shadow-sm group",children:[e.jsxs(g,{className:"font-medium text-black py-4",children:[s.firstName," ",s.lastName]}),e.jsx(g,{className:"text-gray-600 py-4",children:s.email}),e.jsx(g,{className:"py-4",children:s.orgRoleTitle?e.jsx(H,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:s.orgRoleTitle}):e.jsx("span",{className:"text-gray-500",children:s.jobTitle||s.role||"-"})}),e.jsx(g,{className:"text-gray-600 py-4",children:s.department||"-"}),e.jsx(g,{className:"text-gray-600 py-4",children:s.managerName||"-"}),e.jsx(g,{className:"py-4",children:e.jsx(H,{variant:s.employmentStatus==="active"?"default":"secondary",children:s.employmentStatus||"Active"})}),e.jsx(g,{className:"py-4",children:(()=>{const f=Y.get(s.id);if(!f)return e.jsx("span",{className:"text-gray-400 text-sm",children:"-"});const D=f.trainingCompletion||0;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[D,"%"]})]})})()}),e.jsx(g,{className:"py-4",children:(()=>{const f=Y.get(s.id);if(!f)return e.jsx("span",{className:"text-gray-400 text-sm",children:"-"});const D=f.policiesAttested||0,as=f.totalPolicies||0;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[D,"/",as]})]})})()}),e.jsx(g,{className:"py-4",children:(()=>{const f=Y.get(s.id);if(!f)return e.jsxs(H,{variant:"secondary",className:"gap-1",children:[e.jsx(Rs,{className:"h-3 w-3"}),"Not Started"]});const D=f.percentage||0;return e.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[D,"%"]}),D>=100&&e.jsx(Ss,{className:"h-3 w-3 text-green-600"})]}),e.jsx(bs,{value:D,className:"h-2"})]})})()}),e.jsx(g,{className:"py-4",children:e.jsxs("div",{className:"flex gap-2 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Je(s),className:"h-8 w-8 p-0 hover:bg-[#1C4D8D]/10 hover:text-[#1C4D8D] transition-colors duration-200",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>_e(s),className:"h-8 w-8 p-0 hover:bg-[#1C4D8D]/10 hover:text-[#1C4D8D] transition-colors duration-200",title:"Assign Assets",children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>We(s.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50 transition-colors duration-200",children:e.jsx(Le,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]}),e.jsxs(oe,{value:"roles",className:"mt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(n,{onClick:ve,className:"gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Create Role"]})}),e.jsxs(G,{children:[e.jsxs(ie,{children:[e.jsxs(le,{children:["Organizational Roles (",T.length,")"]}),e.jsx(re,{children:"Define standard roles and associated responsibilities for the organization."})]}),e.jsx(W,{children:T.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No roles defined yet"}),e.jsx(n,{variant:"outline",onClick:ve,className:"mt-4",children:"Create First Role"})]}):e.jsx("div",{className:"rounded-xl border border-slate-200 shadow-lg overflow-hidden bg-white",children:e.jsxs(ye,{children:[e.jsx(Ce,{children:e.jsxs(Q,{className:"bg-[#1C4D8D] hover:bg-[#1C4D8D] border-none",children:[e.jsx(p,{className:"text-white font-semibold py-4",children:"Role Title"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Department"}),e.jsx(p,{className:"text-white font-semibold py-4",children:"Reporting To"}),e.jsx(p,{className:"w-[40%] text-white font-semibold py-4",children:"Responsibilities"}),e.jsx(p,{className:"w-20 text-white font-semibold py-4",children:"Actions"})]})}),e.jsx(we,{children:T.map(s=>{const f=T.find(D=>D.id===s.reportingRoleId);return e.jsxs(Q,{className:"bg-white border-b border-slate-200 transition-all duration-200 hover:bg-slate-50 hover:shadow-sm group",children:[e.jsx(g,{className:"font-medium text-black py-4",children:s.title}),e.jsx(g,{className:"text-gray-600 py-4",children:s.department||"-"}),e.jsx(g,{className:"py-4",children:f?e.jsx(H,{variant:"secondary",children:f.title}):"-"}),e.jsx(g,{className:"truncate max-w-[300px] text-gray-600 py-4",title:s.responsibilities,children:s.responsibilities?s.responsibilities.substring(0,100)+(s.responsibilities.length>100?"...":""):"-"}),e.jsx(g,{className:"py-4",children:e.jsxs("div",{className:"flex gap-2 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ss(s),className:"h-8 w-8 p-0 hover:bg-[#1C4D8D]/10 hover:text-[#1C4D8D] transition-colors duration-200",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Ze(s),className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50 transition-colors duration-200",children:e.jsx(Le,{className:"w-4 h-4"})})]})})]},s.id)})})]})})})]})]}),e.jsxs(oe,{value:"chart",className:"mt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(n,{variant:"outline",onClick:()=>P(),className:"gap-2",children:[e.jsx(Is,{className:"w-4 h-4"}),"Refresh Chart"]})}),e.jsxs(G,{children:[e.jsxs(ie,{children:[e.jsx(le,{children:"Organization Chart"}),e.jsx(re,{children:"Visual hierarchy of the organization based on reporting lines."})]}),e.jsx(W,{className:"overflow-x-auto min-h-[600px] flex items-start justify-center bg-slate-50/50 p-6",children:pe?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading chart..."}):e.jsx(Os,{employees:_})})]})]})]}),e.jsx(q,{open:y,onOpenChange:u,title:"Add Employee",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(n,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(n,{onClick:qe,disabled:Z.isPending,children:Z.isPending?"Adding...":"Add Employee"})]}),children:e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"First Name *"}),e.jsx(h,{value:t.firstName,onChange:s=>o({...t,firstName:s.target.value}),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Last Name *"}),e.jsx(h,{value:t.lastName,onChange:s=>o({...t,lastName:s.target.value}),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Email *"}),e.jsx(h,{type:"email",value:t.email,onChange:s=>o({...t,email:s.target.value}),placeholder:"john@example.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Department"}),e.jsx(h,{value:t.department,onChange:s=>o({...t,department:s.target.value}),placeholder:"IT"})]}),e.jsx("div",{})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Org Role"}),e.jsxs(O,{value:t.orgRoleId,onValueChange:s=>o({...t,orgRoleId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Role"})}),e.jsx(M,{children:T.map(s=>e.jsx(b,{value:s.id.toString(),children:s.title},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Reporting Manager"}),e.jsxs(O,{value:t.managerId,onValueChange:s=>o({...t,managerId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Manager"})}),e.jsx(M,{children:B.map(s=>e.jsxs(b,{value:s.id.toString(),children:[s.firstName," ",s.lastName]},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Phone"}),e.jsx(h,{value:t.phone,onChange:s=>o({...t,phone:s.target.value})})]})]})}),e.jsx(q,{open:R,onOpenChange:w,title:"Edit Employee",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(n,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(n,{onClick:Ge,disabled:ee.isPending,children:ee.isPending?"Updating...":"Update Employee"})]}),children:e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"First Name *"}),e.jsx(h,{value:t.firstName,onChange:s=>o({...t,firstName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Last Name *"}),e.jsx(h,{value:t.lastName,onChange:s=>o({...t,lastName:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Email *"}),e.jsx(h,{type:"email",value:t.email,onChange:s=>o({...t,email:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Department"}),e.jsx(h,{value:t.department||"",onChange:s=>o({...t,department:s.target.value})})]}),e.jsx("div",{})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Org Role"}),e.jsxs(O,{value:t.orgRoleId||"",onValueChange:s=>o({...t,orgRoleId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Role"})}),e.jsx(M,{children:T.map(s=>e.jsx(b,{value:s.id.toString(),children:s.title},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Reporting Manager"}),e.jsxs(O,{value:t.managerId||"",onValueChange:s=>o({...t,managerId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Manager"})}),e.jsx(M,{children:B.filter(s=>s.id!==(j==null?void 0:j.id)).map(s=>e.jsxs(b,{value:s.id.toString(),children:[s.firstName," ",s.lastName]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Phone"}),e.jsx(h,{value:t.phone||"",onChange:s=>o({...t,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Status"}),e.jsxs(O,{value:t.employmentStatus||"active",onValueChange:s=>o({...t,employmentStatus:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Status"})}),e.jsxs(M,{children:[e.jsx(b,{value:"active",children:"Active"}),e.jsx(b,{value:"inactive",children:"Inactive"}),e.jsx(b,{value:"contractor",children:"Contractor"})]})]})]})]})]})}),e.jsx(q,{open:z,onOpenChange:F,title:"Create Organizational Role",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(n,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(n,{onClick:Xe,disabled:se.isPending,children:se.isPending?"Creating...":"Create Role"})]}),children:e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Role Title *"}),e.jsx(h,{value:l.title,onChange:s=>v({...l,title:s.target.value}),placeholder:"e.g. Senior Security Analyst"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Department"}),e.jsx(h,{value:l.department,onChange:s=>v({...l,department:s.target.value}),placeholder:"e.g. Information Security"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Description"}),e.jsx(h,{value:l.description,onChange:s=>v({...l,description:s.target.value}),placeholder:"Brief summary of the role"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Responsibilities (Detailed)"}),e.jsx(ce,{value:l.responsibilities,onChange:s=>v({...l,responsibilities:s.target.value}),placeholder:"List key responsibilities...",className:"min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Reports To (Role)"}),e.jsxs(O,{value:l.reportingRoleId,onValueChange:s=>v({...l,reportingRoleId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Reporting Role"})}),e.jsx(M,{children:T.map(s=>e.jsx(b,{value:s.id.toString(),children:s.title},s.id))})]})]})]})}),e.jsx(q,{open:I,onOpenChange:$,title:"Edit Organizational Role",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(n,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(n,{onClick:Ye,disabled:te.isPending,children:te.isPending?"Updating...":"Update Role"})]}),children:e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Role Title *"}),e.jsx(h,{value:l.title,onChange:s=>v({...l,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Department"}),e.jsx(h,{value:l.department,onChange:s=>v({...l,department:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Description"}),e.jsx(h,{value:l.description,onChange:s=>v({...l,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Responsibilities (Detailed)"}),e.jsx(ce,{value:l.responsibilities,onChange:s=>v({...l,responsibilities:s.target.value}),className:"min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Reports To (Role)"}),e.jsxs(O,{value:l.reportingRoleId||"",onValueChange:s=>v({...l,reportingRoleId:s}),children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select Reporting Role"})}),e.jsx(M,{children:T.filter(s=>s.id!==(V==null?void 0:V.id)).map(s=>e.jsx(b,{value:s.id.toString(),children:s.title},s.id))})]})]})]})}),e.jsx(Se,{open:!!A,onOpenChange:s=>!s&&K(null),children:e.jsxs(Ie,{children:[e.jsxs(Ae,{children:[e.jsx(De,{children:"Delete Employee?"}),e.jsxs(Te,{children:["Are you sure you want to delete ",e.jsxs("b",{children:[A==null?void 0:A.firstName," ",A==null?void 0:A.lastName]}),"? This action cannot be undone."]})]}),e.jsxs(Oe,{children:[e.jsx(Ee,{children:"Cancel"}),e.jsx(ke,{className:"bg-red-600 hover:bg-red-700",onClick:s=>{s.preventDefault(),Ke()},children:"Delete Member"})]})]})}),e.jsx(Se,{open:!!L,onOpenChange:s=>!s&&J(null),children:e.jsxs(Ie,{children:[e.jsxs(Ae,{children:[e.jsx(De,{children:"Delete Role?"}),e.jsxs(Te,{children:["Are you sure you want to delete the ",e.jsx("b",{children:L==null?void 0:L.title})," role? This may affect employees assigned to this role."]})]}),e.jsxs(Oe,{children:[e.jsx(Ee,{children:"Cancel"}),e.jsx(ke,{className:"bg-red-600 hover:bg-red-700",onClick:s=>{s.preventDefault(),es()},children:"Delete Role"})]})]})})]})]})}export{Et as PeoplePage};
