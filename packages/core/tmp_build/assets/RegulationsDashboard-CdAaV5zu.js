import{b as u,ab as h,t as c,ac as f,j as e,c as g,i as j,C as o,S as b,k as N}from"./index-DOc7Nwb7.js";import{D as v}from"./DashboardLayout-aHnUqq57.js";import{B as y}from"./Breadcrumb-CRi3LAxS.js";import{r as w}from"./index-CuHtgnXp.js";import{C}from"./circular-progress-DYaMZs5I.js";import{R as k}from"./rocket-C2MuHhsn.js";import{T as R}from"./target-cfAj3L6j.js";import{A as S}from"./activity-B1F2IRm3.js";import{S as $}from"./scale-BCebIfgE.js";import{A}from"./arrow-right-M96iV-v9.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./database-Bjtecw5f.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function ue(){const[D,i]=u(),n=h(),m=c.regulations.generateReport.useMutation(),{selectedClientId:d}=f(),a=n.id?parseInt(n.id):d||1,{data:l}=c.compliance.frameworkStats.list.useQuery({clientId:a},{enabled:!!a}),p=t=>{if(!l||!Array.isArray(l))return{percentage:0};const r=l.find(s=>s.framework===t);return r||l.find(s=>t.includes(s.framework)||s.framework.includes(t))||{percentage:0}},x=t=>t===0?"text-slate-200":t<30?"text-red-500":t<70?"text-amber-500":"text-emerald-500";return e.jsx(v,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{items:[{label:"Compliance Obligations"}]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Compliance Obligations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your mandatory regulatory requirements distinct from voluntary frameworks."})]}),e.jsx(g,{onClick:async t=>{t.stopPropagation(),j.promise(m.mutateAsync({clientId:a}),{loading:"Generating Report...",success:r=>{const s=document.createElement("a");return s.href=`data:application/pdf;base64,${r.pdfBase64}`,s.download=r.filename,document.body.appendChild(s),s.click(),document.body.removeChild(s),"Report downloaded successfully"},error:"Failed to generate report"})},children:"Download Gap Analysis"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-2",children:[e.jsxs(o,{className:"p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-50 border-blue-100 bg-blue-50/20",onClick:()=>i(`/clients/${a}/roadmap`),children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Compliance Roadmap"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Strategic milestones"})]})]}),e.jsxs(o,{className:"p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-50 border-red-100 bg-red-50/20",onClick:()=>i(`/clients/${a}/risks`),children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-600",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Risk Register"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"High-impact threats"})]})]}),e.jsxs(o,{className:"p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-50 border-emerald-100 bg-emerald-50/20",onClick:()=>i(`/clients/${a}/controls`),children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:e.jsx(b,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Internal Controls"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Satisfying obligations"})]})]}),e.jsxs(o,{className:"p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-50 border-amber-100 bg-amber-50/20",onClick:()=>i(`/clients/${a}/implementation`),children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center text-amber-600",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:"Implementation"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Remediation progress"})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.map(t=>{const r=p(t.name),s=x(r.percentage);return e.jsx(o,{className:"group hover:border-primary/50 transition-all duration-300 cursor-pointer shadow-sm hover:shadow-md overflow-hidden",onClick:()=>i(`/clients/${a}/compliance-obligations/${t.id}`),children:e.jsxs("div",{className:"p-6 flex h-full gap-5",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.logo?e.jsx("div",{className:"h-10 w-14 rounded p-0.5 bg-white border flex items-center justify-center",children:e.jsx("img",{src:t.logo,alt:t.name,className:"w-full h-full object-contain"})}):e.jsx("div",{className:"h-10 w-10 rounded bg-primary/10 flex items-center justify-center text-primary",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx(N,{variant:"secondary",className:"bg-slate-100 text-slate-600 font-normal hover:bg-slate-200 text-[10px] px-2 py-0.5 h-5",children:t.type})]}),e.jsxs("div",{className:"mb-auto",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 group-hover:text-primary transition-colors leading-tight mb-2",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"mt-4 pt-2 flex items-center text-sm font-medium text-primary group-hover:translate-x-1 transition-transform",children:["View Details ",e.jsx(A,{className:"ml-1 h-4 w-4"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-l dashed border-slate-100 pl-4 min-w-[120px]",children:[e.jsx(C,{value:r.percentage,size:100,strokeWidth:10,color:s}),e.jsx("span",{className:`mt-3 text-xs font-bold uppercase tracking-wide ${r.percentage>0?"text-slate-700":"text-slate-400"}`,children:r.percentage>0?`${r.percentage}% Done`:"Not Started"})]})]})},t.id)})})]})})}export{ue as default};
