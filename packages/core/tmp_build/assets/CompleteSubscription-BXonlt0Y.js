import{u as p,b,t as i,j as e,x as n,S as g,C as w,d as j,e as f,f as N,m as v,bx as y,c as o,ba as C,i as r}from"./index-DOc7Nwb7.js";import{A as k}from"./arrow-right-M96iV-v9.js";function F(){const{user:P,signOut:c}=p(),[,d]=b(),{data:s,isLoading:m}=i.users.me.useQuery(),t=i.billing.createUserCheckout.useMutation(),u=async()=>{if(s)try{const a="month",x=s.planTier==="enterprise"?"enterprise":s.planTier==="pro"?"pro":"startup";r.loading("Preparing checkout...");const{url:l}=await t.mutateAsync({tier:x,interval:a,successUrl:`${window.location.origin}/dashboard?onboarding=true`,cancelUrl:`${window.location.origin}/complete-subscription`});l?window.location.href=l:r.error("Failed to generate payment link")}catch(a){r.error(a.message||"Something went wrong")}},h=async()=>{await c(),d("/login")};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0F172A]",children:e.jsx(n,{className:"h-8 w-8 text-blue-500 animate-spin"})}):e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-[#0F172A] text-slate-50 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-900/20 rounded-full blur-[100px]"})]}),e.jsxs("div",{className:"z-10 w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl",children:e.jsx(g,{className:"h-12 w-12 text-blue-400"})})}),e.jsxs(w,{className:"border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl",children:[e.jsxs(j,{className:"text-center pb-2",children:[e.jsx(f,{className:"text-2xl font-bold text-white",children:"Complete Your Subscription"}),e.jsx(N,{className:"text-slate-400 text-base",children:"Your account is created, but your subscription is pending."})]}),e.jsxs(v,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-blue-400 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-100 text-sm",children:"Payment Required"}),e.jsxs("p",{className:"text-xs text-blue-200/80 mt-1",children:["You selected the ",e.jsx("span",{className:"font-bold text-white uppercase",children:s==null?void 0:s.planTier})," plan. Please complete payment to access your dashboard."]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold h-11 shadow-lg shadow-blue-900/20",onClick:u,disabled:t.isPending,children:t.isPending?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Complete Payment ",e.jsx(k,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(o,{variant:"ghost",className:"w-full text-slate-400 hover:text-white hover:bg-white/5",onClick:h,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})]}),e.jsx("p",{className:"text-center text-xs text-slate-500 mt-8",children:"Need help? Contact support@complianceos.com"})]})]})}export{F as default};
