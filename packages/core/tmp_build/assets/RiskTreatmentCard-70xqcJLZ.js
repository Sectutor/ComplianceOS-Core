import{M as fe,t as N,r as h,R as Z,i as j,j as e,S as q,c,a4 as U,L as i,T as ae,l as ee,E as z,G as E,H as O,J as B,K as m,I as C,x as H,k as $}from"./index-DOc7Nwb7.js";import{T as se}from"./textarea-BtxBxzdY.js";import{C as re}from"./circle-check-big-BSqJVrgh.js";import{B as le}from"./ban-TJUJ_p7U.js";import{L as te}from"./PageGuide-CPKKXXS6.js";import{S as ve}from"./sparkles-CoQ80pK2.js";import{G as ye}from"./globe-BMGZmoaJ.js";import{P as I}from"./plus-BaQ35Jcx.js";import{U as Ne}from"./user-CqRnJLgW.js";import{C as Ce}from"./calendar-BlLJlGbj.js";import{D as we}from"./dollar-sign-M9UCfTjq.js";import{C as ke}from"./clock-osbacZli.js";import{S as Se}from"./square-pen-ClRv15cM.js";import{T as Te}from"./trash-2-CFEfisbM.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);function Ve({clientId:a,riskAssessmentId:A,onSuccess:M,onCancel:F,initialData:o,riskContext:u}){const L=N.useUtils(),[D,w]=h.useState(!1),[d,ne]=h.useState([]),[oe,J]=h.useState(!1),[G,_]=h.useState(!1),[l,g]=h.useState({treatmentType:"mitigate",strategy:"",justification:"",owner:"",dueDate:"",priority:"medium",estimatedCost:"",selectedControls:{}}),[Q,V]=h.useState(!1),[f,P]=h.useState({name:"",description:"",code:""}),{data:p}=N.clientControls.list.useQuery({clientId:a}),[k,ie]=h.useState("client"),[W,ce]=h.useState("ISO 27001"),[R,de]=h.useState("all"),{data:v}=N.controls.list.useQuery({framework:W},{enabled:k==="standard"}),me=Z.useMemo(()=>{if(!v)return[];const s=new Set(v.map(t=>t.category).filter(Boolean));return Array.from(s)},[v]),K=Z.useMemo(()=>v?R==="all"?v:v.filter(s=>s.category===R):[],[v,R]),xe=N.risks.createRiskTreatment.useMutation(),ue=N.risks.updateRiskTreatment.useMutation(),he=N.risks.linkTreatmentControl.useMutation();h.useEffect(()=>{if(o){const s={};o.linkedControls&&o.linkedControls.forEach(t=>{s[t.controlId]={effectiveness:t.effectiveness||"effective",implementationNotes:t.implementationNotes||""}}),g({treatmentType:o.treatmentType||"mitigate",strategy:o.strategy||"",justification:o.justification||"",owner:o.owner||"",dueDate:o.dueDate?new Date(o.dueDate).toISOString().split("T")[0]:"",priority:o.priority||"medium",estimatedCost:o.estimatedCost||"",selectedControls:s})}},[o]);const ge=async s=>{s.preventDefault(),_(!0);try{let t;o!=null&&o.id?(await ue.mutateAsync({id:o.id,strategy:l.strategy||void 0,justification:l.justification||void 0,owner:l.owner||void 0,dueDate:l.dueDate||void 0,priority:l.priority||void 0,estimatedCost:l.estimatedCost||void 0}),t=o.id,j.success("Treatment plan updated successfully")):(t=(await xe.mutateAsync({clientId:a,riskAssessmentId:A,treatmentType:l.treatmentType,strategy:l.strategy||void 0,justification:l.justification||void 0,owner:l.owner||void 0,dueDate:l.dueDate||void 0,priority:l.priority||void 0,estimatedCost:l.estimatedCost||void 0})).id,j.success("Treatment plan created successfully"));const r=Object.keys(l.selectedControls).map(Number);r.length>0&&t&&await Promise.all(r.map(n=>{const x=l.selectedControls[n];return he.mutateAsync({treatmentId:t,controlId:n,effectiveness:x.effectiveness,implementationNotes:x.implementationNotes})})),M()}catch(t){j.error(t.message||"Failed to save treatment plan")}finally{_(!1)}},pe=async()=>{if(!(u!=null&&u.threat)||!(u!=null&&u.vulnerability)){j.error("Risk Threat and Vulnerability descriptions are required for AI suggestions.");return}w(!0),J(!0);try{const s=await L.risks.getSuggestedControls.fetch({threat:u.threat,vulnerability:u.vulnerability,riskDetails:u.riskDetails});ne(s),s.length===0&&j.info("No specific controls suggested by AI.")}catch(s){console.error("Failed to get suggestions",s),j.error("Failed to get AI suggestions")}finally{w(!1)}},je=[{value:"mitigate",label:"Mitigate",icon:q,color:"text-blue-600",desc:"Apply controls to reduce risk"},{value:"transfer",label:"Transfer",icon:ae,color:"text-orange-600",desc:"Transfer risk"},{value:"accept",label:"Accept",icon:re,color:"text-green-600",desc:"Formally accept the risk"},{value:"avoid",label:"Avoid",icon:le,color:"text-red-600",desc:"Eliminate the activity"}],S=s=>{g(t=>{const r={...t.selectedControls};return r[s]?delete r[s]:r[s]={effectiveness:"effective",implementationNotes:""},{...t,selectedControls:r}})},y=N.clientControls.createCustom.useMutation({onSuccess:s=>{j.success("Custom control created and applied"),L.clientControls.list.invalidate(),S(s.clientControl.id),V(!1),P({name:"",description:"",code:""})},onError:s=>{j.error(`Failed to create control: ${s.message}`)}}),be=()=>{if(!f.name){j.error("Control name is required");return}y.mutate({clientId:a,name:f.name,description:f.description,code:f.code||void 0})},X=(s,t,r)=>{g(n=>({...n,selectedControls:{...n.selectedControls,[s]:{...n.selectedControls[s],[t]:r}}}))};return e.jsxs("form",{onSubmit:ge,className:"space-y-6 border rounded-lg p-6 bg-card shadow-sm animate-in fade-in slide-in-from-top-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600"}),o?"Edit Risk Treatment Plan":"Create Risk Treatment Plan"]}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:F,children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:"Treatment Type *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:je.map(s=>{const t=s.icon,r=l.treatmentType===s.value;return e.jsx("button",{type:"button",onClick:()=>g(n=>({...n,treatmentType:s.value})),className:`p-4 rounded-lg border-2 transition-all text-left ${r?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-border hover:border-blue-300 dark:hover:border-blue-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(t,{className:`w-5 h-5 mt-0.5 ${s.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.desc})]}),r&&e.jsx(ee,{className:"w-5 h-5 text-blue-600"})]})},s.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"strategy",children:"Treatment Strategy *"}),e.jsx(se,{id:"strategy",value:l.strategy,onChange:s=>g(t=>({...t,strategy:s.target.value})),placeholder:"Describe the specific actions to be taken...",rows:3,required:!0})]}),l.treatmentType==="accept"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"justification",children:"Justification (Required for Accept) *"}),e.jsx(se,{id:"justification",value:l.justification,onChange:s=>g(t=>({...t,justification:s.target.value})),placeholder:"Provide business justification for accepting this risk...",rows:2,required:l.treatmentType==="accept"})]}),l.treatmentType==="mitigate"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 flex gap-3 text-sm text-amber-900 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-amber-600 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold block mb-1",children:"Planning Future Controls"}),"Controls selected here are ",e.jsx("strong",{children:"NOT yet active"}),'. They will be added to your roadmap as "Planned" tasks to reduce risk in the future.']})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Select Controls to Apply"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:pe,className:"h-8 gap-2 text-violet-600 border-violet-200 hover:bg-violet-50 dark:border-violet-800 dark:text-violet-400 dark:hover:bg-violet-900/20",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),D?"Thinking...":"AI Suggestions"]}),e.jsxs(c,{type:"button",variant:k==="standard"?"default":"outline",size:"sm",onClick:()=>ie(k==="client"?"standard":"client"),className:"h-8 gap-2",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),k==="standard"?"Browsing Library":"Browse Library"]}),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:()=>V(!Q),className:"h-8 gap-2 text-blue-600 border-blue-200 hover:bg-blue-50 dark:border-blue-800 dark:text-blue-400 dark:hover:bg-blue-900/20",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),"New Custom"]})]})]}),k==="standard"&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 border rounded-lg p-3 mb-3 space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{className:"text-xs mb-1 block",children:"Framework"}),e.jsxs(z,{value:W,onValueChange:ce,children:[e.jsx(E,{className:"h-8 text-xs bg-background",children:e.jsx(O,{})}),e.jsxs(B,{children:[e.jsx(m,{value:"ISO 27001",children:"ISO 27001"}),e.jsx(m,{value:"SOC 2",children:"SOC 2"}),e.jsx(m,{value:"NIST CSF",children:"NIST CSF"}),e.jsx(m,{value:"GDPR",children:"GDPR"}),e.jsx(m,{value:"HIPAA",children:"HIPAA"})]})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{className:"text-xs mb-1 block",children:"Category / Domain"}),e.jsxs(z,{value:R,onValueChange:de,children:[e.jsx(E,{className:"h-8 text-xs bg-background",children:e.jsx(O,{placeholder:"All Categories"})}),e.jsxs(B,{children:[e.jsx(m,{value:"all",children:"All Categories"}),me.map(s=>e.jsx(m,{value:s,children:s},s))]})]})]})]}),e.jsx("div",{className:"border rounded bg-background max-h-60 overflow-y-auto",children:K.length>0?e.jsx("div",{className:"divide-y",children:K.map(s=>{var x;const t=p==null?void 0:p.find(b=>{var T;return((T=b.control)==null?void 0:T.controlId)===s.controlId}),r=(x=t==null?void 0:t.clientControl)==null?void 0:x.id,n=r&&l.selectedControls[r];return e.jsxs("div",{className:"p-2 hover:bg-slate-50 flex items-center justify-between group",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs font-semibold text-slate-500",children:s.controlId}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]}),r?e.jsxs(c,{type:"button",size:"sm",variant:n?"secondary":"outline",className:"h-6 text-xs",onClick:()=>S(r),children:[n?e.jsx(ee,{className:"w-3 h-3 mr-1"}):e.jsx(I,{className:"w-3 h-3 mr-1"}),n?"Selected":"Select"]}):e.jsxs(c,{type:"button",size:"sm",variant:"ghost",className:"h-6 text-xs text-blue-600 hover:bg-blue-50",disabled:y.isLoading,onClick:()=>{y.mutate({clientId:a,name:s.name,description:s.description,framework:s.framework,code:s.controlId})},children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Add to Library"]})]},s.id)})}):e.jsx("div",{className:"p-4 text-center text-xs text-muted-foreground",children:"No controls found matching filters"})})]}),Q&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2 text-blue-800 dark:text-blue-300",children:[e.jsx(I,{className:"w-4 h-4"}),"Create Custom Control"]}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>V(!1),children:e.jsx(U,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Control Name *"}),e.jsx(C,{className:"h-8 text-sm bg-background",placeholder:"e.g. Weekly Access Review",value:f.name,onChange:s=>P(t=>({...t,name:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Description"}),e.jsx(C,{className:"h-8 text-sm bg-background",placeholder:"What does this control do?",value:f.description,onChange:s=>P(t=>({...t,description:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Control Code (Optional)"}),e.jsx(C,{className:"h-8 text-sm bg-background",placeholder:"e.g. AC-1-CUSTOM",value:f.code,onChange:s=>P(t=>({...t,code:s.target.value}))})]}),e.jsx("div",{className:"flex justify-end pt-1",children:e.jsxs(c,{type:"button",size:"sm",onClick:be,disabled:y.isLoading,children:[y.isLoading?e.jsx(H,{className:"w-3 h-3 animate-spin mr-2"}):null,"Create & Apply"]})})]})]}),oe&&e.jsxs("div",{className:"bg-violet-50 dark:bg-violet-900/10 border border-violet-200 dark:border-violet-800 rounded-lg p-3 mb-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2 text-violet-800 dark:text-violet-300",children:[e.jsx(te,{className:"w-4 h-4"}),"Recommended Controls"]}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>J(!1),children:e.jsx(U,{className:"w-3 h-3"})})]}),D?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(H,{className:"w-5 h-5 animate-spin text-violet-600"})}):d.length>0?e.jsx("div",{className:"space-y-2",children:d.map(s=>{var x;const t=p==null?void 0:p.find(b=>{var T,Y;return((T=b.control)==null?void 0:T.controlId)===s.controlId||((Y=b.clientControl)==null?void 0:Y.controlId)===s.controlId}),r=(x=t==null?void 0:t.clientControl)==null?void 0:x.id,n=r&&l.selectedControls[r];return e.jsx("div",{className:"bg-background rounded border p-2 text-sm",children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.controlId," ",s.framework?`(${s.framework})`:"",e.jsxs($,{variant:"outline",className:"text-[10px] h-4 px-1",children:[s.relevanceScore,"% match"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.controlName}),e.jsxs("p",{className:"text-xs text-violet-600 dark:text-violet-400 mt-1 italic",children:['"',s.rationale,'"']})]}),r?e.jsx(c,{type:"button",size:"sm",variant:n?"secondary":"default",className:"h-7 text-xs",onClick:()=>{n||S(r)},disabled:n,children:n?"Applied":"Apply"}):e.jsxs(c,{type:"button",size:"sm",variant:"outline",className:"h-7 text-xs border-dashed border-blue-300 text-blue-600 hover:bg-blue-50",onClick:()=>{y.mutate({clientId:a,name:s.controlName,description:s.rationale,code:s.controlId})},disabled:y.isLoading,children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Add"]})]})},s.controlId)})}):e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"No specific recommendations found."})]}),e.jsx("div",{className:"border rounded-lg p-3 max-h-96 overflow-y-auto bg-secondary/30",children:p&&p.length>0?e.jsx("div",{className:"space-y-2",children:p.map(s=>{const{clientControl:t,control:r}=s,n=!!l.selectedControls[t.id],x=l.selectedControls[t.id];return e.jsxs("div",{className:`rounded border transition-colors ${n?"bg-background border-blue-200":"hover:bg-accent border-transparent"}`,children:[e.jsxs("label",{className:"flex items-start gap-2 p-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:()=>S(t.id),className:"rounded mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:(r==null?void 0:r.controlId)||t.controlId}),e.jsx("span",{className:"text-sm font-medium",children:(r==null?void 0:r.name)||t.customDescription})]})})]}),n&&x&&e.jsx("div",{className:"px-3 pb-3 pt-0 pl-7 space-y-3 animate-in fade-in slide-in-from-top-1",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Effectiveness"}),e.jsxs(z,{value:x.effectiveness,onValueChange:b=>X(t.id,"effectiveness",b),children:[e.jsx(E,{className:"h-8 text-sm",children:e.jsx(O,{})}),e.jsxs(B,{children:[e.jsx(m,{value:"effective",children:"Effective (100%)"}),e.jsx(m,{value:"partially_effective",children:"Partially Effective (50%)"}),e.jsx(m,{value:"ineffective",children:"Ineffective (0%)"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Notes"}),e.jsx(C,{className:"h-8 text-sm",placeholder:"Implementation details...",value:x.implementationNotes,onChange:b=>X(t.id,"implementationNotes",b.target.value)})]})]})})]},t.id)})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No controls available"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"owner",children:"Treatment Owner"}),e.jsx(C,{id:"owner",value:l.owner,onChange:s=>g(t=>({...t,owner:s.target.value})),placeholder:"Person responsible"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"dueDate",children:"Due Date"}),e.jsx(C,{id:"dueDate",type:"date",value:l.dueDate,onChange:s=>g(t=>({...t,dueDate:s.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"priority",children:"Priority"}),e.jsxs(z,{value:l.priority,onValueChange:s=>g(t=>({...t,priority:s})),children:[e.jsx(E,{children:e.jsx(O,{})}),e.jsxs(B,{children:[e.jsx(m,{value:"critical",children:"Critical"}),e.jsx(m,{value:"high",children:"High"}),e.jsx(m,{value:"medium",children:"Medium"}),e.jsx(m,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"estimatedCost",children:"Estimated Cost"}),e.jsx(C,{id:"estimatedCost",value:l.estimatedCost,onChange:s=>g(t=>({...t,estimatedCost:s.target.value})),placeholder:"e.g., $5,000 or 40 hours"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:F,disabled:G,children:"Cancel"}),e.jsxs(c,{type:"submit",disabled:G,children:[G&&e.jsx(H,{className:"w-4 h-4 mr-2 animate-spin"}),o?"Update Treatment":"Create Treatment"]})]})]})}function Ue({treatment:a,onEdit:A,onDelete:M}){var w;const F=d=>{switch(d){case"mitigate":return q;case"transfer":return ae;case"accept":return re;case"avoid":return le;default:return q}},o=d=>{switch(d){case"mitigate":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30";case" transfer":return"text-orange-600 bg-orange-100 dark:bg-orange-900/30";case"accept":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"avoid":return"text-red-600 bg-red-100 dark:bg-red-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},u=d=>{switch(d){case"verified":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"implemented":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"planned":return"bg-secondary";default:return"bg-secondary"}},L=d=>{switch(d){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";default:return"bg-secondary"}},D=F(a.treatmentType);return e.jsx("div",{className:"bg-card border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${o(a.treatmentType)}`,children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-medium capitalize",children:a.treatmentType}),e.jsx($,{variant:"outline",className:u(a.status),children:(w=a.status)==null?void 0:w.replace("_"," ")}),a.priority&&e.jsx($,{variant:"outline",className:L(a.priority),children:a.priority})]}),a.strategy&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.strategy}),a.justification&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded p-2",children:[e.jsx("p",{className:"text-xs font-medium text-yellow-800 dark:text-yellow-400",children:"Justification:"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:a.justification})]}),a.linkedControls&&a.linkedControls.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Linked Controls:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.linkedControls.map(d=>e.jsxs($,{variant:"outline",className:"text-xs",children:[d.controlCode,": ",d.controlTitle]},d.id))})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[a.owner&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{children:a.owner})]}),a.dueDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(a.dueDate).toLocaleDateString()})]}),a.estimatedCost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),e.jsx("span",{children:a.estimatedCost})]}),a.implementationDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),e.jsxs("span",{children:["Implemented: ",new Date(a.implementationDate).toLocaleDateString()]})]})]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[A&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>A(a),className:"h-8 w-8 p-0",children:e.jsx(Se,{className:"w-4 h-4"})}),M&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>M(a.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30",children:e.jsx(Te,{className:"w-4 h-4"})})]})]})})}export{Ge as C,Ve as R,Ue as a};
