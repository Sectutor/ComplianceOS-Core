import{ab as L,r as h,b as $,t as p,i as u,j as e,c as a,C as j,d as f,e as b,S as F,f as g,m as N,aq as o,z as M,F as D,D as E,ap as z,o as H,p as Q,q as V,L as T,I as q,E as G,G as K,H as J,J as U,K as W,w as Y,N as _,O as X,P as y,Q as c,V as Z,W as l,k as ee}from"./index-DOc7Nwb7.js";import{T as se,a as te,b as A,c as B}from"./tabs-CBDTXbEn.js";import{B as ae}from"./Breadcrumb-CRi3LAxS.js";import{D as ie}from"./DashboardLayout-aHnUqq57.js";import{A as re}from"./arrow-left-CpuUojG-.js";import{A as v}from"./arrow-right-M96iV-v9.js";import{B as le}from"./book-open-BffBrdze.js";import{P as S}from"./plus-BaQ35Jcx.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function Ke(){const P=L(),t=parseInt(P.id||"0"),[O,n]=h.useState(!1),[d,w]=h.useState(""),[m,C]=h.useState(""),[ne,I]=$(),{data:i,refetch:k}=p.businessContinuity.bia.list.useQuery({clientId:t}),{data:r}=p.businessContinuity.processes.list.useQuery({clientId:t}),x=p.businessContinuity.bia.create.useMutation({onSuccess:s=>{u.success("BIA created successfully"),n(!1),w(""),C(""),s&&s.id?I(`/clients/${t}/business-continuity/bia/${s.id}`):k()},onError:s=>{u.error("Failed to create BIA: "+s.message)}}),R=()=>{if(!d||!m){u.error("Please fill in all required fields");return}x.mutate({clientId:t,processId:parseInt(m),title:d})};return e.jsx(ie,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(ae,{items:[{label:"Clients",href:"/clients"},{label:"Business Continuity",href:`/clients/${t}/business-continuity`},{label:"Impact Analysis",href:`/clients/${t}/business-continuity/bia`}]}),e.jsxs(a,{variant:"ghost",size:"sm",className:"mt-2 -ml-3 text-muted-foreground hover:text-foreground",onClick:()=>I(`/clients/${t}/business-continuity`),children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Back to BC Dashboard"]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Business Impact Analysis"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Identify critical business functions and the potential impact of their disruption."})]})}),e.jsxs(j,{className:"bg-slate-50 border-slate-200",children:[e.jsxs(f,{className:"pb-3",children:[e.jsxs(b,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-[#1C4D8D]"}),"Getting Started with Business Impact Analysis"]}),e.jsx(g,{children:"Follow these steps to conduct a professional BIA that aligns with ISO 22301 standards."})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 p-3 rounded-lg bg-white border border-slate-100 shadow-sm",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground bg-slate-100 px-2 py-0.5 rounded w-fit mb-1",children:"Step 1"}),e.jsx("span",{className:"font-semibold text-sm",children:"Define Processes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Create an inventory of your critical business functions first."}),e.jsx(o,{href:`/clients/${t}/business-continuity/processes`,children:e.jsxs(a,{variant:"link",className:"p-0 h-auto text-xs text-[#1C4D8D] font-semibold justify-start hover:no-underline",children:["Open Process Registry ",e.jsx(v,{className:"ml-1 h-3 w-3"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-3 rounded-lg bg-white border border-slate-100 shadow-sm",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground bg-slate-100 px-2 py-0.5 rounded w-fit mb-1",children:"Step 2"}),e.jsx("span",{className:"font-semibold text-sm",children:"Start New BIA"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:'Click \\"New BIA\\" below and select a process to analyze.'}),e.jsxs(a,{variant:"link",className:"p-0 h-auto text-xs text-[#1C4D8D] font-semibold justify-start hover:no-underline",onClick:()=>n(!0),children:["Create BIA Now ",e.jsx(v,{className:"ml-1 h-3 w-3"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-3 rounded-lg bg-white border border-slate-100 shadow-sm opacity-60",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground bg-slate-100 px-2 py-0.5 rounded w-fit mb-1",children:"Step 3"}),e.jsx("span",{className:"font-semibold text-sm",children:"Assess Impacts"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Evaluate operational and financial impacts over time."})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-3 rounded-lg bg-white border border-slate-100 shadow-sm opacity-60",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground bg-slate-100 px-2 py-0.5 rounded w-fit mb-1",children:"Step 4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Set Objectives"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Determine RTO, RPO, and MTPD for the process."})]})]})})]}),e.jsxs(se,{defaultValue:"assessments",className:"space-y-4",children:[e.jsxs(te,{children:[e.jsx(A,{value:"methodology",children:"Methodology"}),e.jsx(A,{value:"assessments",children:"Assessments"})]}),e.jsx(B,{value:"methodology",children:e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(b,{children:"BIA Methodology"}),e.jsx(g,{children:"Our approach to Business Impact Analysis aligns with ISO 22301 standards."})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-blue-500"}),"1. Identification"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify critical business activities, processes, and the resources they depend on (people, technology, facilities)."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-orange-500"}),"2. Impact Assessment"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Evaluate the potential operational and financial impacts of a disruption over time (e.g., 4 hours, 24 hours)."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-green-500"}),"3. Recovery Objectives"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define Recovery Time Objectives (RTO) and Recovery Point Objectives (RPO) for each critical activity."})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Key Definitions"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"RTO (Recovery Time Objective):"})," The targeted duration of time and a service level within which a business process must be restored after a disaster."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"RPO (Recovery Point Objective):"})," The maximum targeted period in which data might be lost from an IT service due to a major incident."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"MTPD (Max Tolerable Period of Disruption):"})," The maximum amount of time that a process can be down before the organization suffers irreparable harm."]})]})]})]})]})}),e.jsx(B,{value:"assessments",children:e.jsxs(j,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"BIA Assessments"}),e.jsx(g,{children:"Manage your Business Impact Analyses."})]}),e.jsxs(E,{open:O,onOpenChange:n,children:[e.jsx(z,{asChild:!0,children:e.jsxs(a,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"})," New BIA"]})}),e.jsxs(H,{children:[e.jsx(Q,{children:e.jsx(V,{children:"Create New Business Impact Analysis"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"title",children:"Title / Name"}),e.jsx(q,{id:"title",placeholder:"e.g., Q1 2025 Payroll BIA",value:d,onChange:s=>w(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"process",children:"Business Process"}),e.jsxs(G,{value:m,onValueChange:C,children:[e.jsx(K,{children:e.jsx(J,{placeholder:"Select a process..."})}),e.jsxs(U,{children:[r==null?void 0:r.map(s=>e.jsx(W,{value:s.id.toString(),children:s.name},s.id)),(r==null?void 0:r.length)===0&&e.jsxs("div",{className:"p-2 text-sm text-muted-foreground text-center",children:["No processes found. ",e.jsx(o,{href:`/clients/${t}/business-continuity/processes`,className:"text-blue-500 underline",children:"Create one first."})]})]})]})]})]}),e.jsxs(Y,{children:[e.jsx(a,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(a,{onClick:R,disabled:x.isPending,children:x.isPending?"Creating...":"Create BIA"})]})]})]})]}),e.jsx(N,{children:e.jsx("div",{className:"rounded-xl border border-slate-200 shadow-lg overflow-hidden bg-white",children:e.jsxs(_,{children:[e.jsx(X,{children:e.jsxs(y,{className:"bg-[#1C4D8D] hover:bg-[#1C4D8D] border-none",children:[e.jsx(c,{className:"text-white font-semibold py-4",children:"Title"}),e.jsx(c,{className:"text-white font-semibold py-4",children:"Process"}),e.jsx(c,{className:"text-white font-semibold py-4",children:"Status"}),e.jsx(c,{className:"text-white font-semibold py-4",children:"Last Updated"}),e.jsx(c,{className:"text-right text-white font-semibold py-4",children:"Actions"})]})}),e.jsxs(Z,{children:[(i==null?void 0:i.length)===0&&e.jsx(y,{children:e.jsx(l,{colSpan:5,className:"text-center py-12 bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"p-3 bg-slate-50 rounded-full",children:e.jsx(D,{className:"h-8 w-8 text-slate-400"})}),e.jsxs("div",{className:"max-w-[300px] mx-auto",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"No BIAs Found"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["You haven't created any Business Impact Analyses yet. The first step is to ensure you have ",e.jsx(o,{href:`/clients/${t}/business-continuity/processes`,className:"text-[#1C4D8D] hover:underline font-medium",children:"Business Processes"})," defined."]})]}),e.jsxs(a,{onClick:()=>n(!0),className:"mt-4 bg-[#1C4D8D]",children:[e.jsx(S,{className:"mr-2 h-4 w-4"})," Create First BIA"]})]})})}),i==null?void 0:i.map(s=>e.jsxs(y,{className:"bg-white border-b border-slate-200 transition-all duration-200 hover:bg-slate-50 hover:shadow-sm group",children:[e.jsx(l,{className:"font-medium text-black py-4",children:s.title}),e.jsx(l,{className:"text-gray-600 py-4",children:s.processName||"-"}),e.jsx(l,{className:"py-4",children:e.jsx(ee,{variant:s.status==="approved"?"default":"secondary",children:s.status})}),e.jsx(l,{className:"text-gray-500 py-4",children:new Date(s.updatedAt||new Date).toLocaleDateString()}),e.jsx(l,{className:"text-right py-4",children:e.jsx(o,{href:`/clients/${t}/business-continuity/bia/${s.id}`,children:e.jsxs(a,{variant:"ghost",size:"sm",className:"hover:bg-[#1C4D8D]/10 hover:text-[#1C4D8D] transition-colors duration-200",children:["Open ",e.jsx(v,{className:"ml-2 h-4 w-4"})]})})})]},s.id))]})]})})})]})})]})]})})}export{Ke as default};
