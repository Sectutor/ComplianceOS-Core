import{r as n,j as e,z as f,c as o,x as w}from"./index-DOc7Nwb7.js";import{E as y}from"./enhanced-dialog-CeRPsI16.js";import{P as C}from"./progress-B-1k4ZZX.js";import{c as h}from"./utils-BC5CVi_C.js";import{C as k}from"./circle-check-C5kiwRoG.js";import{D as S}from"./database-Bjtecw5f.js";const x=["Initializing workspace...","Assigning compliance frameworks (ISO 27001, SOC 2)...","Generating policy documents...","Creating risk register and assessments...","Seeding evidence files...","Finalizing setup..."];function z({open:u,onOpenChange:c,onImport:b}){const[s,l]=n.useState("idle"),[g,d]=n.useState(0),[j,m]=n.useState(0),[v,p]=n.useState(null);n.useEffect(()=>{u&&s==="completed"&&(l("idle"),d(0),m(0),p(null))},[u]);const N=async()=>{l("importing"),d(0),m(0),p(null);const t=setInterval(()=>{d(r=>{if(r>=99.5)return 99.5;const I=Math.max(.1,(100-r)/100);return Math.min(99.5,r+I)})},300),a=setInterval(()=>{m(r=>r<x.length-1?r+1:r)},2e3),i=setTimeout(()=>{clearInterval(t),clearInterval(a),l("error"),p("Import is taking longer than expected (90 seconds). The operation may still be running in the background. Large imports can take several minutes.")},9e4);try{await b(),clearTimeout(i),clearInterval(t),clearInterval(a),d(100),m(x.length-1),l("completed")}catch(r){clearTimeout(i),clearInterval(t),clearInterval(a),l("error"),p(r.message||"An error occurred during import.")}};return e.jsx(y,{open:u,onOpenChange:t=>{s==="importing"&&!t||c(t)},title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-amber-600"}),"Import Demo Data"]}),description:"Populate this workspace with sample data for demonstration purposes.",size:"md",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[s==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(o,{onClick:N,className:"bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white border-0",children:"Start Import"})]}),s==="importing"&&e.jsxs(o,{disabled:!0,children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}),s==="completed"&&e.jsx(o,{onClick:()=>c(!1),className:"bg-emerald-600 hover:bg-emerald-700",children:"Done"}),s==="error"&&e.jsx(o,{variant:"outline",onClick:()=>c(!1),children:"Close"})]}),children:e.jsxs("div",{className:"space-y-6 py-2",children:[s==="idle"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-lg p-4 text-amber-900 text-sm",children:[e.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"Warning"]}),"This action will generate a comprehensive set of demo data including:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 ml-1 opacity-90",children:[e.jsx("li",{children:"ISO 27001 & SOC 2 Frameworks with all controls"}),e.jsx("li",{children:"20+ Policy Documents with full content"}),e.jsx("li",{children:"Complete Risk Register & Assessments"}),e.jsx("li",{children:"Sample Evidence & Governance Tasks"}),e.jsx("li",{children:"Fake Employee & Department Data"}),e.jsx("li",{children:"Third-Party Vendor Records"}),e.jsx("li",{children:"Business Continuity Plans"}),e.jsx("li",{children:"CRM & Sales Pipeline Data"})]}),e.jsx("div",{className:"mt-3 font-medium",children:"This comprehensive import can take 1-2 minutes to complete. Please do not close this dialog during the process."})]})}),(s==="importing"||s==="completed"||s==="error")&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{className:s==="error"?"text-red-600":"text-blue-900",children:s==="error"?"Import Failed":s==="completed"?"Import Complete":x[j]}),e.jsxs("span",{className:"text-slate-500",children:[Math.round(g),"%"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{value:g,className:h("h-2",s==="error"&&"bg-red-100",s==="importing"&&"animate-pulse"),indicatorClassName:h(s==="completed"&&"bg-emerald-500",s==="error"&&"bg-red-500")}),s==="importing"&&g>80&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})]})]}),e.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-100 p-4 space-y-3",children:x.map((t,a)=>{const i=a<j||s==="completed",r=a===j&&s==="importing";return e.jsxs("div",{className:h("flex items-center gap-3 text-sm transition-colors duration-300",i?"text-emerald-700":r?"text-blue-700 font-medium":"text-slate-400"),children:[e.jsx("div",{className:h("h-5 w-5 rounded-full flex items-center justify-center border",i?"bg-emerald-100 border-emerald-200":r?"bg-blue-100 border-blue-200":"bg-slate-50 border-slate-200"),children:i?e.jsx(k,{className:"h-3.5 w-3.5 text-emerald-600"}):r?e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse"}):e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-slate-300"})}),t]},a)})}),s==="error"&&e.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-700 p-4 rounded-lg text-sm flex items-start gap-3",children:[e.jsx(f,{className:"h-5 w-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Import Status"}),v,e.jsxs("div",{className:"mt-2 text-red-600/80 text-xs",children:[e.jsx("strong",{children:"Note:"})," The import may have partially completed. Refresh the page to see what data was created."]})]})]})]})]})})}export{z as D};
