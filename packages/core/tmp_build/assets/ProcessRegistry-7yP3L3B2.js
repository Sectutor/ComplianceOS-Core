import{ac as y,b as g,au as N,r as i,t as u,j as e,c as h,I as f,C,d as w,e as v,f as D,m as T,x as R,N as S,O as L,P as x,Q as n,V as B,W as r,k as P}from"./index-DOc7Nwb7.js";import{D as k}from"./DashboardLayout-aHnUqq57.js";import{B as I}from"./Breadcrumb-CRi3LAxS.js";import{A as $}from"./arrow-left-CpuUojG-.js";import{S as O}from"./search-CwuIBBPE.js";import{P as E}from"./plus-BaQ35Jcx.js";import"./index--2vFva6Y.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function ke(){const{selectedClientId:l}=y(),[z,c]=g(),[A,o]=N("/clients/:id/business-continuity/processes"),a=o!=null&&o.id?parseInt(o.id):l,[H,M]=i.useState(!1),[d,b]=i.useState(""),[Q,U]=i.useState(""),[V,W]=i.useState(""),[q,F]=i.useState("Tier 2"),[G,J]=i.useState(""),{data:m,isLoading:j,refetch:K}=u.businessContinuity.processes.list.useQuery({clientId:a},{enabled:!!a});u.businessContinuity.processes.create.useMutation();const t=m==null?void 0:m.filter(s=>{var p;return s.name.toLowerCase().includes(d.toLowerCase())||((p=s.department)==null?void 0:p.toLowerCase().includes(d.toLowerCase()))});return e.jsx(k,{children:e.jsxs("div",{className:"p-8 w-full max-w-full space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(I,{items:[{label:"Clients",href:"/clients"},{label:"Business Continuity",href:`/clients/${a}/business-continuity`},{label:"Process Registry",href:`/clients/${a}/business-continuity/processes`}]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"mt-2 -ml-3 text-muted-foreground hover:text-foreground",onClick:()=>c(`/clients/${a}/business-continuity`),children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Back to BC Dashboard"]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Process Registry"}),e.jsx("p",{className:"text-muted-foreground",children:"Catalog of critical business functions and their dependencies."})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(O,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(f,{placeholder:"Search processes...",className:"pl-8",value:d,onChange:s=>b(s.target.value)})]}),e.jsxs(h,{onClick:()=>c(`/clients/${l}/business-continuity/processes/new`),children:[e.jsx(E,{className:"w-4 h-4 mr-2"})," Register Process"]})]}),e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(v,{children:"Registered Processes"}),e.jsx(D,{children:"Manage your organization's business processes."})]}),e.jsx(T,{children:j?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(R,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"rounded-xl border border-slate-200 shadow-lg overflow-hidden bg-white",children:e.jsxs(S,{children:[e.jsx(L,{children:e.jsxs(x,{className:"bg-[#1C4D8D] hover:bg-[#1C4D8D] border-none",children:[e.jsx(n,{className:"text-white font-semibold py-4",children:"Process Name"}),e.jsx(n,{className:"text-white font-semibold py-4",children:"Department"}),e.jsx(n,{className:"text-white font-semibold py-4",children:"Criticality"}),e.jsx(n,{className:"text-white font-semibold py-4",children:"RTO / RPO"}),e.jsx(n,{className:"text-right text-white font-semibold py-4",children:"Edit"})]})}),e.jsxs(B,{children:[(t==null?void 0:t.length)===0&&e.jsx(x,{children:e.jsx(r,{colSpan:5,className:"text-center text-gray-500 py-8 bg-white",children:"No processes registered yet."})}),t==null?void 0:t.map(s=>e.jsxs(x,{className:"bg-white border-b border-slate-200 transition-all duration-200 hover:bg-slate-50 hover:shadow-sm group",children:[e.jsx(r,{className:"font-medium text-black py-4",children:s.name}),e.jsx(r,{className:"text-gray-600 py-4",children:s.department||"-"}),e.jsx(r,{className:"py-4",children:e.jsx(P,{variant:s.criticalityTier==="Tier 1"?"destructive":s.criticalityTier==="Tier 2"?"default":"secondary",children:s.criticalityTier||"Unassessed"})}),e.jsx(r,{className:"text-sm text-gray-500 py-4",children:s.rto?`RTO: ${s.rto}`:"Pending BIA"}),e.jsx(r,{className:"text-right py-4",children:e.jsx(h,{variant:"outline",size:"sm",className:"hover:bg-[#1C4D8D]/10 hover:text-[#1C4D8D] transition-colors duration-200",onClick:()=>c(`/clients/${l}/business-continuity/processes/${s.id}`),children:"Edit"})})]},s.id))]})]})})})]})]})})}export{ke as default};
