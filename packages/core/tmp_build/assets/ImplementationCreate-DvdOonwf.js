import{M as S,r as g,ab as L,b as R,ac as $,t as u,i as c,j as e,C as v,d as N,m as D,c as d,e as F,f as z,k as w}from"./index-DOc7Nwb7.js";import{D as E}from"./DashboardLayout-aHnUqq57.js";import{P as B}from"./PageGuide-CPKKXXS6.js";import{L as C}from"./layout-template-CfpBjxAB.js";import{S as G}from"./settings-CIu9FFiX.js";import{A as k}from"./arrow-right-M96iV-v9.js";import{C as A}from"./circle-check-C5kiwRoG.js";import{M as H}from"./map-BanbvCdZ.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=S("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);function Me(){const[a,l]=g.useState("details"),m=L(),[,i]=R(),x=m.id?parseInt(m.id,10):null,{selectedClientId:T}=$(),s=x||T,[h,b]=g.useState({title:"",description:"",plannedStartDate:"",plannedEndDate:"",estimatedHours:0,priority:"medium",riskMitigationFocus:[]}),[o,I]=g.useState(null),{data:j}=u.roadmap.list.useQuery({clientId:s},{enabled:!!s&&a==="roadmap"}),{data:n}=u.implementation.listTemplates.useQuery({clientId:s},{enabled:!!s&&a==="template"}),p=u.implementation.createFromRoadmap.useMutation({onSuccess:t=>{c.success("Plan generated from Roadmap!"),i(`/clients/${s}/implementation/kanban/${t.planId}`)},onError:t=>{c.error(`Failed to generate: ${t.message}`)}}),y=u.implementation.createFromTemplate.useMutation({onSuccess:t=>{c.success("Plan created from template!"),i(`/clients/${s}/implementation/kanban/${t.planId}`)},onError:t=>c.error(`Failed to create: ${t.message}`)}),M=t=>{s&&y.mutate({templateId:t.id,clientId:s,title:t.title})},P=()=>{!o||!s||p.mutate({roadmapId:o,clientId:s})};return e.jsx(E,{children:e.jsxs("div",{className:"max-w-5xl mx-auto p-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Implementation Plan"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Choose how you want to start your execution journey."})]}),e.jsx(B,{title:"Plan Creation Wizard",description:"Three ways to start your implementation journey.",rationale:"Flexible creation options allow you to match the plan to the source of the requirement.",howToUse:[{step:"Manual Setup",description:"Best for ad-hoc projects or quick tasks."},{step:"Use Template",description:"Best for recurring audits or standard procedures."},{step:"Import from Roadmap",description:"Best for executing long-term strategic initiatives."}],integrations:[{name:"Template Library",description:"Access strict standardized templates."},{name:"Roadmap Engine",description:"Pull data from strategic roadmaps."}]})]}),e.jsxs(v,{className:"border-slate-200 shadow-sm",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex space-x-2 border-b border-slate-100 pb-0",children:[e.jsx(f,{active:a==="details",onClick:()=>l("details"),icon:e.jsx(Q,{className:"w-4 h-4 mr-2"}),label:"Manual Setup"}),e.jsx(f,{active:a==="template",onClick:()=>l("template"),icon:e.jsx(C,{className:"w-4 h-4 mr-2"}),label:"Use Template"}),e.jsx(f,{active:a==="roadmap",onClick:()=>l("roadmap"),icon:e.jsx(q,{className:"w-4 h-4 mr-2"}),label:"Import from Roadmap",highlight:!0})]})}),e.jsxs(D,{className:"pt-6",children:[a==="details"&&e.jsxs("div",{className:"space-y-6 max-w-3xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700",children:"Plan Title *"}),e.jsx("input",{type:"text",value:h.title,onChange:t=>b(r=>({...r,title:t.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., Q1 Security Hardening"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:t=>b(r=>({...r,description:t.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md h-24 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Objectives and scope..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700",children:"Dates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm"}),e.jsx("span",{className:"self-center text-slate-400",children:"-"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700",children:"Priority"}),e.jsxs("select",{value:h.priority,onChange:t=>b(r=>({...r,priority:t.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx(d,{variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(d,{onClick:()=>c.info("Manual creation not connected in prototype yet."),children:"Create Plan"})]})]}),a==="template"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Standardized templates ensure consistency across your compliance projects."}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>i(`/clients/${s}/implementation/templates`),className:"bg-white",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Manage Templates"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(!n||n.length===0)&&e.jsxs("div",{className:"col-span-2 text-center py-12 text-slate-500 border-2 border-dashed border-slate-100 rounded-xl",children:[e.jsx(C,{className:"w-12 h-12 mx-auto text-slate-300 mb-2"}),e.jsx("p",{children:"No templates found."}),e.jsx(d,{variant:"link",onClick:()=>i(`/clients/${s}/implementation/templates`),children:"Create your first template"})]}),n==null?void 0:n.map((t,r)=>e.jsx(v,{className:"cursor-pointer hover:border-blue-300 hover:shadow-md transition-all group border-slate-200 relative",onClick:()=>M(t),children:e.jsxs(N,{children:[e.jsxs(F,{className:"group-hover:text-blue-600 transition-colors flex items-center justify-between text-lg",children:[t.title,y.isPending?e.jsx("span",{className:"text-xs text-slate-400",children:"Creating..."}):e.jsx(k,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx(z,{className:"mt-2 text-sm line-clamp-2",children:t.description||"No description provided."}),t.isSystem&&e.jsx(w,{variant:"secondary",className:"absolute top-4 right-4 bg-slate-100 text-slate-500 text-[10px] pointer-events-none",children:"System"})]})},r))]})]}),a==="roadmap"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-lg text-blue-800 text-sm",children:[e.jsx("strong",{children:"Strategy to Execution:"})," Select a roadmap below. We will automatically generate implementation tasks for every initiative, carrying over priorities and dates."]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j==null?void 0:j.map(t=>e.jsxs("div",{onClick:()=>I(t.id),className:`
                                    cursor-pointer p-4 rounded-xl border-2 transition-all relative
                                    ${o===t.id?"border-blue-500 bg-blue-50/50 ring-2 ring-blue-200":"border-slate-200 hover:border-blue-300 hover:bg-slate-50"}
                                `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx(w,{variant:"outline",className:"bg-white",children:t.status}),o===t.id&&e.jsx(A,{className:"w-5 h-5 text-blue-600 absolute top-4 right-4"})]}),e.jsx("h3",{className:"font-semibold text-slate-900 pr-8",children:t.title}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:t.description||"No description provided."}),e.jsxs("div",{className:"mt-4 flex items-center text-xs text-slate-400",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{children:["Roadmap #",t.id]})]})]},t.id))}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:e.jsxs(d,{size:"lg",className:"bg-blue-600 hover:bg-blue-700",disabled:!o||p.isLoading,onClick:P,children:[p.isLoading?"Generating...":"Generate Implementation Plan",!p.isLoading&&e.jsx(k,{className:"ml-2 w-4 h-4"})]})})]})]})]})]})})}function f({active:a,onClick:l,label:m,icon:i,highlight:x}){return e.jsxs("button",{onClick:l,className:`
                flex items-center px-6 py-3 font-medium text-sm transition-all border-b-2
                ${a?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-slate-500 hover:text-slate-800 hover:bg-slate-50"}
                ${x&&!a?"text-blue-600":""}
            `,children:[i,m]})}export{Me as default};
