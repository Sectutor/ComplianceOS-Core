import{ab as w,r as N,t as y,j as e,x as C,aq as r,c as i,C as c,m as x,k as p,z as A}from"./index-DOc7Nwb7.js";import{c as D}from"./utils-BC5CVi_C.js";import{D as h}from"./DashboardLayout-aHnUqq57.js";import{B as L,a as k,b as a,c as u,d as f,e as B}from"./breadcrumb-BTf0geTn.js";import{P as O}from"./PageGuide-CPKKXXS6.js";import{C as R}from"./circle-check-C5kiwRoG.js";import{d as j}from"./differenceInDays-Cx1Pp66P.js";import{A as M}from"./arrow-right-M96iV-v9.js";import{f as I}from"./format-H2tx8_vS.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";import"./differenceInCalendarDays-nctqlg7V.js";function Ae(){const{id:v}=w(),t=parseInt(v||"0"),[S,$]=N.useState(""),{data:n,isLoading:g}=y.vendorAssessments.listAll.useQuery({clientId:t},{enabled:!!t}),o=n?n.filter(s=>{var m;if(((m=s.status)==null?void 0:m.toLowerCase())==="completed")return!1;const l=s.dueDate?j(new Date(s.dueDate),new Date):null;return l!==null&&l<0}):[],b=s=>{switch(s){case"High":return"text-rose-600 bg-rose-50 border-rose-200";case"Medium":return"text-amber-600 bg-amber-50 border-amber-200";default:return"text-emerald-600 bg-emerald-50 border-emerald-200"}};return g?e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(C,{className:"h-10 w-10 animate-spin text-indigo-600"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading overdue assessments..."})]})})}):e.jsx(h,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsx(L,{children:e.jsxs(k,{children:[e.jsx(a,{children:e.jsx(u,{asChild:!0,children:e.jsx(r,{href:`/clients/${t}`,children:"Home"})})}),e.jsx(f,{}),e.jsx(a,{children:e.jsx(u,{asChild:!0,children:e.jsx(r,{href:`/clients/${t}/vendors`,children:"Vendor Management"})})}),e.jsx(f,{}),e.jsx(a,{children:e.jsx(B,{children:"Overdue Assessments"})})]})}),e.jsxs("div",{className:"flex items-start justify-between animate-slide-down",children:[e.jsx(O,{title:"Overdue Vendor Assessments",description:"Track and resolve assessments that have missed their due dates.",rationale:"Timely assessment completion is critical for continuous monitoring compliance (ISO 27001 / SOC 2).",howToUse:[{step:"Review",description:"Identify vendors with overdue assessments and their risk level."},{step:"Contact",description:"Follow up with vendors to expedite response submission."},{step:"Resolve",description:"Review late submissions or escalate non-responsive vendors."}]}),e.jsx(r,{href:`/clients/${t}/vendors`,children:e.jsx(i,{variant:"outline",children:"View All Vendors"})})]}),o.length===0?e.jsx(c,{className:"bg-green-50 border-green-200 mt-8",children:e.jsxs(x,{className:"flex flex-col items-center justify-center p-12 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-green-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"No Overdue Assessments"}),e.jsx("p",{className:"text-green-700 mt-2 max-w-md",children:"Excellent! All vendor assessments are on track or completed."}),e.jsx(r,{href:`/clients/${t}/vendors`,children:e.jsx(i,{className:"mt-6 bg-green-700 hover:bg-green-800 text-white",children:"Return to Vendor Management"})})]})}):e.jsx("div",{className:"grid gap-4 mt-6",children:o.map(s=>{const d=s.dueDate?j(new Date(s.dueDate),new Date):0;return e.jsx(c,{className:"border-l-4 shadow-sm hover:shadow-md transition-shadow",style:{borderLeftColor:s.vendorCriticality==="High"?"#e11d48":s.vendorCriticality==="Medium"?"#d97706":"#ef4444"},children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:s.vendorName}),e.jsxs(p,{variant:"outline",className:D("text-xs",b(s.vendorCriticality)),children:[s.vendorCriticality," Risk"]})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700",children:s.type}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 font-semibold bg-red-50 w-fit px-2 py-1 rounded",children:[e.jsx(A,{className:"w-4 h-4"}),"Overdue by ",Math.abs(d)," days (Due: ",I(new Date(s.dueDate),"MMM d, yyyy"),")"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3 min-w-[150px]",children:[e.jsxs(p,{variant:"secondary",className:"bg-slate-100 text-slate-600",children:["Status: ",s.status]}),e.jsx(r,{href:`/clients/${t}/vendors/${s.vendorId}?tab=assessments`,children:e.jsxs(i,{className:"w-full gap-2",children:["Resolve ",e.jsx(M,{className:"w-4 h-4"})]})})]})]})})},s.id)})})]})})}export{Ae as default};
