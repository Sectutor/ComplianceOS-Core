import{ab as D,b as y,r as u,t as x,j as e,c,I as v,N as A,O as C,P as m,Q as r,V as M,W as t,Z as S,_ as T,$ as k,a1 as h}from"./index-DOc7Nwb7.js";import{D as Q}from"./DashboardLayout-aHnUqq57.js";import{P as E}from"./PageGuide-CPKKXXS6.js";import{A as I,a as P,b as $,c as F,d as U,e as L,f as B,g as V}from"./alert-dialog-V7xGXdVc.js";import{F as _}from"./filter-Ceo--4mb.js";import{P as H}from"./plus-BaQ35Jcx.js";import{S as O}from"./search-CwuIBBPE.js";import{E as R}from"./ellipsis-vertical-DBvk9Y0C.js";import{E as K}from"./external-link-C3PXjBR9.js";import{T as G}from"./trash-2-CFEfisbM.js";import{f as j}from"./format-H2tx8_vS.js";import"./index--2vFva6Y.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";import"./differenceInCalendarDays-nctqlg7V.js";function Be(){const{id:g}=D(),[W,o]=y(),n=parseInt(g||"0"),[Z,z]=u.useState(null),[a,l]=u.useState(null),{data:i,refetch:f}=x.questionnaire.list.useQuery({clientId:n}),b=x.questionnaire.delete.useMutation({onSuccess:()=>f()}),w=s=>{l(s)},N=async()=>{a&&(await b.mutateAsync({id:a.id}),l(null))};return e.jsxs(Q,{children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Questionnaires"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage all security questionnaires and assessments."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{title:"Questionnaires",description:"Manage incoming and outgoing security assessments.",rationale:"Streamlines the vendor risk assessment process using AI automation.",howToUse:[{step:"Upload Assessment",description:"Import Excel or CSV questionnaires."},{step:"Auto-Fill",description:"Use AI to answer questions from your Knowledge Base."},{step:"Review & Export",description:"Validate answers and export back to original format."}],integrations:[{name:"Knowledge Base",description:"Source for AI answers."},{name:"Evidence Library",description:"Attach proofs."}]}),e.jsxs(c,{variant:"outline",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Filter"]}),e.jsxs(c,{onClick:()=>o(`/clients/${n}/questionnaire-workspace`),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Upload Questionnaire"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b flex gap-2",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(O,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search questionnaires...",className:"pl-9"})]})}),e.jsxs(A,{children:[e.jsx(C,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Questionnaire"}),e.jsx(r,{children:"Progress"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Account / Sender"}),e.jsx(r,{children:"Product"}),e.jsx(r,{children:"Date Added"}),e.jsx(r,{children:"Due Date"}),e.jsx(r,{className:"w-[50px]"})]})}),e.jsxs(M,{children:[i==null?void 0:i.map(s=>{var p;return e.jsxs(m,{onClick:()=>o(`/clients/${n}/questionnaires/${s.id}`),className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsx(t,{className:"font-medium",children:e.jsx("div",{className:"font-semibold",children:s.name})}),e.jsx(t,{children:e.jsx("div",{className:"w-full max-w-[100px] bg-slate-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-emerald-500 h-2.5 rounded-full",style:{width:`${s.progress}%`}})})}),e.jsx(t,{children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-700":s.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[s.status==="completed"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),s.status==="in_progress"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mr-2"}),s.status==="open"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 mr-2"}),(p=s.status)==null?void 0:p.replace("_"," ").replace(/\b\w/g,d=>d.toUpperCase())]})}),e.jsx(t,{children:s.senderName||"-"}),e.jsx(t,{children:s.productName||"Default"}),e.jsx(t,{children:j(new Date(s.createdAt),"MM/dd/yyyy")}),e.jsx(t,{children:s.dueDate?j(new Date(s.dueDate),"MM/dd/yyyy"):"-"}),e.jsx(t,{children:e.jsxs(S,{children:[e.jsx(T,{asChild:!0,onClick:d=>d.stopPropagation(),children:e.jsx(c,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(k,{align:"end",children:[e.jsxs(h,{onClick:()=>o(`/clients/${n}/questionnaires/${s.id}`),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Open"]}),e.jsxs(h,{className:"text-red-600",onClick:()=>w(s),children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id)}),(i==null?void 0:i.length)===0&&e.jsx(m,{children:e.jsx(t,{colSpan:8,className:"text-center h-24 text-muted-foreground",children:"No questionnaires found. Upload one to get started."})})]})]})]})]}),e.jsx(I,{open:!!a,onOpenChange:s=>!s&&l(null),children:e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(F,{children:"Delete Questionnaire?"}),e.jsxs(U,{children:["Are you sure you want to delete ",e.jsx("b",{children:a==null?void 0:a.name}),"? This action cannot be undone."]})]}),e.jsxs(L,{children:[e.jsx(B,{children:"Cancel"}),e.jsx(V,{className:"bg-red-600 hover:bg-red-700",onClick:s=>{s.preventDefault(),N()},children:"Delete Questionnaire"})]})]})})]})}export{Be as default};
