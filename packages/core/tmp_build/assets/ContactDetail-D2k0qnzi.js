import{M as ge,ab as We,b as Xe,t as o,r as u,j as e,c as a,k as P,h as xe,Z as Ye,_ as es,$ as ss,a1 as ts,C as M,m as L,D as F,ap as as,o as z,p as E,q as O,s as I,L as r,E as B,G as _,H as Q,J as Z,K as m,I as x,d as ls,e as is,f as rs,i as l}from"./index-DOc7Nwb7.js";import{T as G}from"./textarea-BtxBxzdY.js";import{T as ns,a as cs,b as V,c as q}from"./tabs-CBDTXbEn.js";import{A as ds,a as os,b as ms,c as xs,d as hs,e as us,f as js,g as ps}from"./alert-dialog-V7xGXdVc.js";import{A as he}from"./arrow-left-CpuUojG-.js";import{M as J}from"./mail-xRDvl6QK.js";import{P as ue}from"./phone-BFakwHvb.js";import{T as w}from"./trash-2-CFEfisbM.js";import{P as D}from"./plus-BaQ35Jcx.js";import{T as gs}from"./tag-CaMuQCYj.js";import{S as je}from"./square-pen-ClRv15cM.js";import{U as vs}from"./user-CqRnJLgW.js";import{C as pe}from"./clock-osbacZli.js";import{M as Ns}from"./message-square-5hBo7zY3.js";import{C as fs}from"./circle-check-C5kiwRoG.js";import{V as ys}from"./video-D4zuDHk0.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ge("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ge("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);function Us(){var Y,ee,se,te,ae,le,ie,re,ne,ce,de,oe;const ve=We(),[,K]=Xe(),p=parseInt(ve.id||"0"),{data:t,isLoading:Ne,refetch:h}=o.globalCrm.get.useQuery({id:p},{enabled:p>0}),fe=o.globalCrm.update.useMutation(),ye=o.globalCrm.addActivity.useMutation(),U=o.globalCrm.deleteActivity.useMutation(),Ce=o.globalCrm.completeActivity.useMutation(),be=o.globalCrm.addNote.useMutation(),we=o.globalCrm.updateNote.useMutation(),R=o.globalCrm.deleteNote.useMutation(),De=o.globalCrm.addDeal.useMutation(),Ae=o.globalCrm.updateDeal.useMutation(),$=o.globalCrm.deleteDeal.useMutation(),ke=o.globalCrm.addTagToContact.useMutation(),Se=o.globalCrm.removeTagFromContact.useMutation(),{data:N}=o.globalCrm.listAllTags.useQuery(),[Te,A]=u.useState(!1),[Pe,y]=u.useState(!1),[Me,k]=u.useState(!1),[Le,f]=u.useState(!1),[c,g]=u.useState({name:"",value:0,stage:"discovery",probability:50,expectedCloseDate:"",description:""}),[S,H]=u.useState(null),[i,C]=u.useState(null),[n,v]=u.useState({firstName:"",lastName:"",email:"",company:"",role:"",phone:"",status:"lead"}),[j,b]=u.useState({type:"call",subject:"",description:"",outcome:""}),[T,W]=u.useState(""),Fe=()=>{t&&(v({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",company:t.company||"",role:t.role||"",phone:t.phone||"",status:t.status||"lead"}),A(!0))},ze=async()=>{try{await fe.mutateAsync({id:p,...n}),l.success("Contact updated"),A(!1),h()}catch(s){l.error("Failed to update: "+s.message)}},Ee=async()=>{try{await ye.mutateAsync({contactId:p,...j}),l.success("Activity logged"),y(!1),b({type:"call",subject:"",description:"",outcome:""}),h()}catch(s){l.error("Failed to add activity: "+s.message)}},X=s=>{C({type:"activity",id:s})},Oe=async s=>{try{console.log("Sending delete activity request for id:",s),await U.mutateAsync({id:s}),l.success("Activity deleted"),h()}catch(d){console.error("Delete activity error:",d),l.error("Failed to delete: "+d.message)}},Ie=async s=>{try{await Ce.mutateAsync({id:s}),l.success("Task completed"),h()}catch{l.error("Failed to complete task")}},Ve=async()=>{if(T.trim())try{await be.mutateAsync({contactId:p,content:T}),l.success("Note added"),k(!1),W(""),h()}catch(s){l.error("Failed to add note: "+s.message)}},qe=async(s,d)=>{try{await we.mutateAsync({id:s,isPinned:!d}),h()}catch{l.error("Failed to update note")}},Ue=s=>{C({type:"note",id:s})},Re=async s=>{try{console.log("Sending delete note request for id:",s),await R.mutateAsync({id:s}),l.success("Note deleted"),h()}catch(d){console.error("Delete note error:",d),l.error("Failed to delete: "+d.message)}},$e=async()=>{try{S?(await Ae.mutateAsync({id:S.id,...c}),l.success("Deal updated")):(await De.mutateAsync({contactId:p,...c}),l.success("Deal created")),f(!1),H(null),g({name:"",value:0,stage:"discovery",probability:50,expectedCloseDate:"",description:""}),h()}catch{l.error("Failed to save deal")}},He=s=>{C({type:"deal",id:s})},Be=async s=>{try{console.log("Sending delete deal request for id:",s),await $.mutateAsync({id:s}),l.success("Deal deleted"),h()}catch(d){console.error("Delete deal error:",d),l.error("Failed to delete deal")}},_e=async s=>{try{await ke.mutateAsync({contactId:p,tagId:s}),h()}catch{l.error("Failed to add tag")}},Qe=async s=>{try{await Se.mutateAsync({contactId:p,tagId:s}),h()}catch{l.error("Failed to remove tag")}},Ze=s=>{switch(s){case"call":return e.jsx(Cs,{className:"h-4 w-4 text-green-500"});case"email":return e.jsx(J,{className:"h-4 w-4 text-blue-500"});case"meeting":return e.jsx(ys,{className:"h-4 w-4 text-purple-500"});case"task":return e.jsx(fs,{className:"h-4 w-4 text-orange-500"});default:return e.jsx(Ns,{className:"h-4 w-4 text-gray-500"})}},Ge=s=>{switch(s){case"lead":return"bg-primary/20 text-primary border-primary/30";case"prospect":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"customer":return"bg-green-500/20 text-green-400 border-green-500/30";case"churned":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400"}};if(Ne)return e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading contact..."})});if(!t)return e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Contact not found"}),e.jsxs(a,{variant:"outline",onClick:()=>K("/admin/crm"),className:"mt-4",children:[e.jsx(he,{className:"mr-2 h-4 w-4"})," Back to CRM"]})]});const Je=`${t.firstName||""} ${t.lastName||""}`.trim()||"Unnamed Contact",Ke=()=>{i&&(i.type==="activity"?Oe(i.id):i.type==="note"?Re(i.id):i.type==="deal"&&Be(i.id),C(null))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"ghost",size:"icon",onClick:()=>K("/admin/crm"),children:e.jsx(he,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold truncate",children:Je}),e.jsx(P,{className:`${Ge(t.status)} uppercase text-xs`,children:t.status||"lead"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:t.company||"Private"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:t.phone})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[(Y=t.tags)==null?void 0:Y.map(s=>e.jsxs(P,{variant:"secondary",className:"bg-primary/5 text-primary border-primary/20 flex items-center gap-1 px-2 py-0.5",children:[s.name,e.jsx("button",{onClick:()=>Qe(s.id),className:"ml-1 hover:text-destructive transition-colors",children:e.jsx(w,{className:"h-3 w-3"})})]},s.id)),e.jsxs(Ye,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(a,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1 py-0 px-2 rounded-full border-dashed",children:[e.jsx(D,{className:"h-3 w-3"})," Add Tag"]})}),e.jsxs(ss,{align:"start",className:"w-48",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsx("p",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider",children:"Available Tags"})}),N==null?void 0:N.filter(s=>{var d;return!((d=t.tags)!=null&&d.some(me=>me.id===s.id))}).map(s=>e.jsxs(ts,{onClick:()=>_e(s.id),children:[e.jsx(gs,{className:"mr-2 h-3.5 w-3.5"}),s.name]},s.id)),(N==null?void 0:N.length)===0&&e.jsx("p",{className:"p-4 text-center text-xs text-muted-foreground italic",children:"No tags defined"})]})]})]})]}),e.jsxs(a,{variant:"outline",onClick:Fe,children:[e.jsx(je,{className:"mr-2 h-4 w-4"})," Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:t.email})]})]})})}),e.jsx(M,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:t.phone||"â€”"})]})]})})}),e.jsx(M,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Role"}),e.jsx("p",{className:"font-medium",children:t.role||"â€”"})]})]})})})]}),e.jsxs(ns,{defaultValue:"activities",className:"space-y-4",children:[e.jsxs(cs,{children:[e.jsxs(V,{value:"activities",children:["Timeline (",((ee=t.activities)==null?void 0:ee.filter(s=>!s.scheduledAt||s.completedAt).length)||0,")"]}),e.jsxs(V,{value:"tasks",children:["Tasks (",((se=t.activities)==null?void 0:se.filter(s=>s.scheduledAt&&!s.completedAt).length)||0,")"]}),e.jsxs(V,{value:"deals",children:["Deals (",((te=t.deals)==null?void 0:te.length)||0,")"]}),e.jsxs(V,{value:"notes",children:["Notes (",((ae=t.notes)==null?void 0:ae.length)||0,")"]})]}),e.jsxs(q,{value:"activities",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Activity History"}),e.jsxs(F,{open:Pe,onOpenChange:y,children:[e.jsx(as,{asChild:!0,children:e.jsxs(a,{size:"sm",children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Log Activity"]})}),e.jsxs(z,{children:[e.jsxs(E,{children:[e.jsx(O,{children:"Log Activity"}),e.jsx(I,{children:"Record an interaction with this contact."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Type"}),e.jsxs(B,{value:j.type,onValueChange:s=>b({...j,type:s}),children:[e.jsx(_,{children:e.jsx(Q,{})}),e.jsxs(Z,{children:[e.jsx(m,{value:"call",children:"ðŸ“ž Call"}),e.jsx(m,{value:"email",children:"âœ‰ï¸ Email"}),e.jsx(m,{value:"meeting",children:"ðŸŽ¥ Meeting"}),e.jsx(m,{value:"task",children:"âœ… Task"}),e.jsx(m,{value:"other",children:"ðŸ’¬ Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Subject"}),e.jsx(x,{value:j.subject,onChange:s=>b({...j,subject:s.target.value}),placeholder:"e.g. Follow-up call"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(G,{value:j.description,onChange:s=>b({...j,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Outcome"}),e.jsx(x,{value:j.outcome,onChange:s=>b({...j,outcome:s.target.value}),placeholder:"e.g. Left voicemail, Scheduled demo"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(a,{onClick:Ee,children:"Log Activity"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[(le=t.activities)==null?void 0:le.filter(s=>!s.scheduledAt||s.completedAt).map(s=>e.jsxs("div",{className:"flex gap-4 p-4 border rounded-lg bg-card/50",children:[e.jsx("div",{className:"mt-1",children:Ze(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-medium",children:s.subject||s.type.toUpperCase()}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(a,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>X(s.id),children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description}),s.outcome&&e.jsxs(P,{variant:"outline",className:"mt-2 font-normal text-muted-foreground",children:["Outcome: ",s.outcome]})]})]},s.id)),((ie=t.activities)==null?void 0:ie.filter(s=>!s.scheduledAt||s.completedAt).length)===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground italic",children:"No activity history yet."})]})]}),e.jsxs(q,{value:"tasks",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Upcoming Tasks & Reminders"}),e.jsxs(a,{size:"sm",onClick:()=>y(!0),children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Add Task"]})]}),e.jsxs("div",{className:"space-y-4",children:[(re=t.activities)==null?void 0:re.filter(s=>s.scheduledAt&&!s.completedAt).map(s=>e.jsxs("div",{className:"flex gap-4 p-4 border border-primary/20 bg-primary/5 rounded-lg",children:[e.jsx(pe,{className:"h-5 w-5 text-primary mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.subject||"Scheduled Task"}),e.jsxs("p",{className:"text-xs text-primary font-medium mt-1",children:["Due: ",new Date(s.scheduledAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",className:"h-8",onClick:()=>Ie(s.id),children:"Mark Complete"}),e.jsx(a,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground",onClick:()=>X(s.id),children:e.jsx(w,{className:"h-4 w-4"})})]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s.description})]})]},s.id)),((ne=t.activities)==null?void 0:ne.filter(s=>s.scheduledAt&&!s.completedAt).length)===0&&e.jsxs("div",{className:"text-center py-12 border rounded-lg border-dashed",children:[e.jsx(pe,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming tasks for this contact."}),e.jsx(a,{variant:"link",onClick:()=>y(!0),children:"Schedule follow-up"})]})]})]}),e.jsxs(q,{value:"deals",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Pipeline Deals"}),e.jsxs(a,{size:"sm",onClick:()=>{H(null),f(!0)},children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," New Deal"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(ce=t.deals)==null?void 0:ce.map(s=>e.jsxs(M,{className:"overflow-hidden border-l-4 border-l-primary",children:[e.jsx(ls,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(is,{className:"text-base",children:s.name}),e.jsxs(rs,{children:["$",(s.value/100).toLocaleString()]})]}),e.jsx(P,{variant:"outline",className:"capitalize",children:s.stage.replace("_"," ")})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground mb-4",children:[e.jsxs("span",{children:["Probability: ",s.probability,"%"]}),e.jsxs("span",{children:["Close: ",s.expectedCloseDate?new Date(s.expectedCloseDate).toLocaleDateString():"TBD"]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>{H(s),g(s),f(!0)},children:e.jsx(je,{className:"h-3.5 w-3.5"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>He(s.id),className:"text-destructive",children:e.jsx(w,{className:"h-3.5 w-3.5"})})]})]})]},s.id)),(!t.deals||t.deals.length===0)&&e.jsxs("div",{className:"col-span-full text-center py-12 border rounded-lg border-dashed",children:[e.jsx(xe,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No active deals found."}),e.jsx(a,{variant:"link",onClick:()=>f(!0),children:"Create your first deal"})]})]})]}),e.jsxs(q,{value:"notes",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Internal Notes"}),e.jsxs(a,{size:"sm",onClick:()=>k(!0),children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Add Note"]})]}),e.jsxs("div",{className:"space-y-4",children:[(de=t.notes)==null?void 0:de.map(s=>e.jsxs("div",{className:`p-4 border rounded-lg bg-card/50 ${s.isPinned?"border-primary/50 bg-primary/5":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsx("p",{className:"flex-1 whitespace-pre-wrap text-sm",children:s.content}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx(a,{variant:"ghost",size:"icon",className:`h-8 w-8 ${s.isPinned?"text-primary":"text-muted-foreground"}`,onClick:()=>qe(s.id,s.isPinned),children:e.jsx(bs,{className:"h-4 w-4"})}),e.jsx(a,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>Ue(s.id),children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-2",children:new Date(s.createdAt).toLocaleString()})]},s.id)),((oe=t.notes)==null?void 0:oe.length)===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground italic",children:"No notes for this contact."})]})]})]}),e.jsx(F,{open:Le,onOpenChange:f,children:e.jsxs(z,{children:[e.jsxs(E,{children:[e.jsx(O,{children:S?"Edit Deal":"New Deal"}),e.jsx(I,{children:"Track a revenue opportunity with this contact."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Deal Name *"}),e.jsx(x,{value:c.name,onChange:s=>g({...c,name:s.target.value}),placeholder:"e.g. Q1 Compliance License"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Value (USD)"}),e.jsx(x,{type:"number",value:c.value/100,onChange:s=>g({...c,value:parseFloat(s.target.value)*100})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Probability (%)"}),e.jsx(x,{type:"number",min:"0",max:"100",value:c.probability,onChange:s=>g({...c,probability:parseInt(s.target.value)})})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Stage"}),e.jsxs(B,{value:c.stage,onValueChange:s=>g({...c,stage:s}),children:[e.jsx(_,{children:e.jsx(Q,{})}),e.jsxs(Z,{children:[e.jsx(m,{value:"discovery",children:"Discovery"}),e.jsx(m,{value:"proposal",children:"Proposal"}),e.jsx(m,{value:"negotiation",children:"Negotiation"}),e.jsx(m,{value:"closed_won",children:"Closed Won"}),e.jsx(m,{value:"closed_lost",children:"Closed Lost"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Expected Close Date"}),e.jsx(x,{type:"date",value:c.expectedCloseDate,onChange:s=>g({...c,expectedCloseDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(G,{value:c.description,onChange:s=>g({...c,description:s.target.value}),rows:2})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(a,{onClick:$e,disabled:!c.name,children:S?"Update Deal":"Create Deal"})]})]})}),e.jsx(F,{open:Me,onOpenChange:k,children:e.jsxs(z,{children:[e.jsxs(E,{children:[e.jsx(O,{children:"Add Note"}),e.jsx(I,{children:"Internal notes for the team."})]}),e.jsx("div",{className:"py-4",children:e.jsx(G,{value:T,onChange:s=>W(s.target.value),placeholder:"Type your note here...",rows:5})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(a,{onClick:Ve,disabled:!T.trim(),children:"Save Note"})]})]})}),e.jsx(F,{open:Te,onOpenChange:A,children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsxs(E,{children:[e.jsx(O,{children:"Edit Contact"}),e.jsx(I,{children:"Update contact information."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"First Name"}),e.jsx(x,{value:n.firstName,onChange:s=>v({...n,firstName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Last Name"}),e.jsx(x,{value:n.lastName,onChange:s=>v({...n,lastName:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Email"}),e.jsx(x,{type:"email",value:n.email,onChange:s=>v({...n,email:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Company"}),e.jsx(x,{value:n.company,onChange:s=>v({...n,company:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Role"}),e.jsx(x,{value:n.role,onChange:s=>v({...n,role:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Phone"}),e.jsx(x,{value:n.phone,onChange:s=>v({...n,phone:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(B,{value:n.status,onValueChange:s=>v({...n,status:s}),children:[e.jsx(_,{children:e.jsx(Q,{})}),e.jsxs(Z,{children:[e.jsx(m,{value:"lead",children:"Lead"}),e.jsx(m,{value:"prospect",children:"Prospect"}),e.jsx(m,{value:"customer",children:"Customer"}),e.jsx(m,{value:"churned",children:"Churned"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(a,{onClick:ze,disabled:!n.email,children:"Save Changes"})]})]})}),e.jsx(ds,{open:!!i,onOpenChange:s=>!s&&C(null),children:e.jsxs(os,{children:[e.jsxs(ms,{children:[e.jsxs(xs,{children:["Delete ",(i==null?void 0:i.type)==="activity"?"Activity":(i==null?void 0:i.type)==="note"?"Note":"Deal","?"]}),e.jsxs(hs,{children:["Are you sure you want to delete this ",i==null?void 0:i.type,"? This action cannot be undone."]})]}),e.jsxs(us,{children:[e.jsx(js,{children:"Cancel"}),e.jsx(ps,{className:"bg-red-600 hover:bg-red-700",onClick:Ke,disabled:U.isPending||R.isPending||$.isPending,children:U.isPending||R.isPending||$.isPending?"Deleting...":"Delete"})]})]})})]})}export{Us as default};
