import{ab as f,b as N,r,t as g,j as e,c as o,C as I,d as v,e as A,f as w,m as b,L as c,I as k,E as D,G as F,H as T,J as L,K as a,ay as P,x as G,i as m}from"./index-DOc7Nwb7.js";import{D as R}from"./DashboardLayout-aHnUqq57.js";import{T as H}from"./textarea-BtxBxzdY.js";import{A as O}from"./arrow-left-CpuUojG-.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function fe(){const h=f(),[M,i]=N(),t=Number(h.id),[l,x]=r.useState(""),[n,j]=r.useState(""),[p,S]=r.useState(""),[d,u]=r.useState(!1),y=g.gapAnalysis.create.useMutation(),C=async()=>{if(!l||!n){m.error("Please fill in all required fields");return}u(!0);try{const s=await y.mutateAsync({clientId:t,name:l,framework:n,scope:p});m.success("Gap Analysis started successfully"),i(`/clients/${t}/gap-analysis/${s.id}`)}catch(s){console.error(s),m.error("Failed to create assessment")}finally{u(!1)}};return e.jsx(R,{children:e.jsxs("div",{className:"p-8 max-w-3xl mx-auto space-y-6",children:[e.jsxs(o,{variant:"ghost",className:"pl-0 hover:bg-transparent",onClick:()=>i(`/clients/${t}/gap-analysis`),children:[e.jsx(O,{className:"w-4 h-4 mr-2"})," Back to List"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"New Gap Analysis"}),e.jsx("p",{className:"text-muted-foreground",children:"Start a new assessment to benchmark your security posture."})]}),e.jsxs(I,{children:[e.jsxs(v,{children:[e.jsx(A,{children:"Assessment Details"}),e.jsx(w,{children:"Define the scope and framework for this analysis."})]}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"name",children:["Assessment Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(k,{id:"name",placeholder:"e.g. Q1 2025 ISO 27001 Assessment",value:l,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"framework",children:["Framework ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(D,{onValueChange:j,value:n,children:[e.jsx(F,{children:e.jsx(T,{placeholder:"Select Framework"})}),e.jsxs(L,{children:[e.jsx(a,{value:"ISO 27001:2022",children:"ISO 27001:2022"}),e.jsx(a,{value:"SOC 2 Type II",children:"SOC 2 Type II"}),e.jsx(a,{value:"NIST CSF 2.0",children:"NIST CSF 2.0"}),e.jsx(a,{value:"NIST 800-171",children:"NIST 800-171 (CMMC L2)"}),e.jsx(a,{value:"HIPAA Security Rule",children:"HIPAA Security Rule"}),e.jsx(a,{value:"GDPR",children:"GDPR"}),e.jsx(a,{value:"PCI DSS 4.0",children:"PCI DSS 4.0"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"scope",children:"Scope Description"}),e.jsx(H,{id:"scope",placeholder:"Describe the boundaries of this assessment (e.g. Cloud Infrastructure, HR Systems)",className:"min-h-[100px]",value:p,onChange:s=>S(s.target.value)})]})]}),e.jsxs(P,{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>i(`/clients/${t}/gap-analysis`),children:"Cancel"}),e.jsxs(o,{onClick:C,disabled:d,children:[d&&e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}),"Start Assessment"]})]})]})]})})}export{fe as default};
