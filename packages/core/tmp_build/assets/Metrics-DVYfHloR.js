import{ab as k,ac as R,t as A,j as e,x as w,U as V,T as E,C,m as y,d as S,e as T}from"./index-DOc7Nwb7.js";import{P as p}from"./progress-B-1k4ZZX.js";import{D as v}from"./DashboardLayout-aHnUqq57.js";import{A as g}from"./activity-B1F2IRm3.js";import{B as P}from"./bar-chart-3-BCngNY6H.js";import{S as B}from"./shield-alert-iAruRy4W.js";import{C as $}from"./circle-check-big-BSqJVrgh.js";import{T as N}from"./truck-Bi4vSDO4.js";import{R as D,T as M,B as I}from"./generateCategoricalChart-KNLgM3hn.js";import{B as U}from"./BarChart-KWJ05I0m.js";import{X as L,Y as H}from"./YAxis-DC4HJ4F3.js";import{S as F}from"./server-Dvm2PAz3.js";import{F as z}from"./file-check-De1wUTh7.js";import{Z as K}from"./zap-B01fFOkT.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./shield-check-ETs8j4-d.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./isEqual-D_xcZLCn.js";function Be(){const{id:t}=k(),{selectedClientId:i}=R(),s=t?parseInt(t):i,{data:a,isLoading:n,error:r}=A.metrics.getDashboard.useQuery({clientId:s},{enabled:!!s});if(n)return e.jsx(v,{children:e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})})});if(r||!a)return e.jsx(v,{children:e.jsx("div",{className:"p-8 text-center text-red-500",children:"Failed to load metrics dashboard."})});const{strategic:l={riskAppetiteConsumption:0,criticalRisksUnmitigated:0,riskVelocity:0,topRiskCategories:[]},cyber:o={mttr:0,vulnDensity:0,openVulns:0,assetCriticalityCoverage:0},culture:h={policyAckRate:0,trainingCompletionRate:0,humanErrorCount:0},supplyChain:d={avgCriticalVendorRisk:0,criticalVendors:0,vendorAssessmentCoverage:0},compliance:x={controlEffectiveness:0,totalControls:0,implementedControls:0},resilience:u={biaCompletionRate:0,activeProjects:0}}=a||{};return e.jsx(v,{children:e.jsxs("div",{className:"p-8 space-y-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Executive Metrics"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Comprehensive view of Risk, Security, and Compliance Performance."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 bg-slate-50 px-3 py-1 rounded-full border border-slate-200",children:[e.jsx(g,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Live Data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(j,{title:"Risk Appetite",value:`${l.riskAppetiteConsumption}%`,icon:P,color:"text-blue-600",subtext:"Capacity Used",trend:l.riskAppetiteConsumption>80?"Critical Level":"Healthy"}),e.jsx(j,{title:"Critical Exposure",value:l.criticalRisksUnmitigated,icon:B,color:"text-red-600",subtext:"Unmitigated Risks"}),e.jsx(j,{title:"Control Health",value:`${x.controlEffectiveness}%`,icon:$,color:"text-green-600",subtext:"Effectiveness Rate"}),e.jsx(j,{title:"Vendor Risk",value:d.avgCriticalVendorRisk,icon:N,color:"text-orange-600",subtext:"Avg Critical Score"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Strategic Risk",icon:g,color:"text-blue-600",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{label:"Risk Velocity (30d)",value:l.riskVelocity>0?`+${l.riskVelocity}`:l.riskVelocity,subtext:"Net new risks"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Top Risk Categories"}),e.jsx("div",{className:"h-32",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(U,{data:l.topRiskCategories,layout:"vertical",margin:{left:40,right:10},children:[e.jsx(L,{type:"number",hide:!0}),e.jsx(H,{dataKey:"name",type:"category",width:100,tick:{fontSize:10}}),e.jsx(M,{}),e.jsx(I,{dataKey:"value",fill:"#3b82f6",radius:[0,4,4,0],barSize:16})]})})})]})]})}),e.jsxs(c,{title:"Cyber Resilience",icon:F,color:"text-indigo-600",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsx(f,{label:"MTTR",value:`${o.mttr}d`,subtext:"Avg Remediation"}),e.jsx(f,{label:"Vuln Density",value:o.vulnDensity,subtext:"Per Asset"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{label:"Open Vulnerabilities",value:o.openVulns}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Asset Criticality Coverage"}),e.jsxs("span",{className:"font-medium",children:[o.assetCriticalityCoverage,"%"]})]}),e.jsx(p,{value:o.assetCriticalityCoverage,className:"h-1.5"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Culture & Governance",icon:V,color:"text-pink-600",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-pink-50 rounded-lg border border-pink-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-pink-600"}),e.jsx("span",{className:"text-sm font-medium text-pink-900",children:"Human Error Incidents"})]}),e.jsx("span",{className:"text-xl font-bold text-pink-700",children:h.humanErrorCount})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Policy Ack Rate",value:h.policyAckRate,color:"#db2777"}),e.jsx(b,{label:"Training Completion",value:h.trainingCompletionRate,color:"#db2777"})]})]})}),e.jsx(c,{title:"Supply Chain",icon:N,color:"text-orange-600",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Critical Vendors",value:d.criticalVendors}),e.jsx(m,{label:"Avg Risk Score",value:d.avgCriticalVendorRisk}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Assessment Coverage"}),e.jsxs("span",{className:"font-medium",children:[d.vendorAssessmentCoverage,"%"]})]}),e.jsx(p,{value:d.vendorAssessmentCoverage,className:"h-1.5 bg-orange-100",indicatorClassName:"bg-orange-500"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Compliance & Audit",icon:z,color:"text-green-600",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded border text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:x.totalControls}),e.jsx("div",{className:"text-xs text-slate-500",children:"Total Controls"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded border border-green-100 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:x.implementedControls}),e.jsx("div",{className:"text-xs text-green-600",children:"Implemented"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Control Effectiveness"}),e.jsxs("span",{className:"font-medium",children:[x.controlEffectiveness,"%"]})]}),e.jsx(p,{value:x.controlEffectiveness,className:"h-1.5 bg-green-100",indicatorClassName:"bg-green-600"})]})]})}),e.jsx(c,{title:"Business Continuity",icon:K,color:"text-yellow-600",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Active Projects",value:u.activeProjects}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"BIA Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[u.biaCompletionRate,"%"]})]}),e.jsx(p,{value:u.biaCompletionRate,className:"h-1.5 bg-yellow-100",indicatorClassName:"bg-yellow-600"})]})]})})]})]})]})})}function j({title:t,value:i,icon:s,color:a,subtext:n,trend:r}){return e.jsx(C,{children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),e.jsx("div",{className:"flex items-baseline gap-2 mt-2",children:e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:i})})]}),e.jsx("div",{className:`h-12 w-12 rounded-full ${a.replace("text-","bg-").replace("600","100")} flex items-center justify-center ${a}`,children:e.jsx(s,{className:"h-6 w-6"})})]}),(n||r)&&e.jsxs("div",{className:"mt-4 flex items-center text-xs",children:[r&&e.jsx("span",{className:`font-medium mr-2 ${r.includes("Critical")?"text-red-600":"text-green-600"}`,children:r}),n&&e.jsx("span",{className:"text-slate-400",children:n})]})]})})}function c({title:t,icon:i,color:s,children:a}){return e.jsxs(C,{className:"h-full",children:[e.jsx(S,{className:"pb-3 border-b bg-slate-50/50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:`h-5 w-5 ${s}`}),e.jsx(T,{className:"text-base font-semibold text-slate-800",children:t})]})}),e.jsx(y,{className:"pt-4",children:a})]})}function m({label:t,value:i,subtext:s}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600",children:t}),s&&e.jsx("p",{className:"text-xs text-slate-400",children:s})]}),e.jsx("span",{className:"font-semibold text-slate-900",children:i})]})}function f({label:t,value:i,subtext:s}){return e.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900",children:i}),e.jsx("div",{className:"text-xs font-medium text-slate-600",children:t}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5",children:s})]})}function b({label:t,value:i,color:s}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600",children:t}),e.jsxs("span",{className:"font-bold text-slate-900",children:[i,"%"]})]}),e.jsx(p,{value:i,className:"h-2",indicatorClassName:`bg-[${s}]`,style:{"--progress-background":s}})]})}export{Be as default};
