import{b as u,r,t as m,i,j as t,x}from"./index-DOc7Nwb7.js";function f(){const[h,l]=u(),[d,s]=r.useState("Processing authentication..."),a=m.integrations.exchangeCode.useMutation({onSuccess:()=>{i.success("Integration connected successfully."),l("/admin/integrations")},onError:e=>{s("Failed to connect."),i.error(`Connection Error: ${e.message}`)}});return r.useEffect(()=>{const e=new URLSearchParams(window.location.search),c=e.get("code"),o=e.get("state");if(!c||!o){s("Invalid callback URL. Missing code or state.");return}try{const n=JSON.parse(atob(o));if(a.isLoading||a.isSuccess)return;a.mutate({clientId:n.clientId||1,provider:n.provider,code:c})}catch{s("Invalid state parameter.")}},[]),t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background",children:[t.jsx(x,{className:"h-10 w-10 animate-spin text-primary mb-4"}),t.jsx("h2",{className:"text-xl font-semibold",children:d}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Please wait while we complete the connection."})]})}export{f as default};
