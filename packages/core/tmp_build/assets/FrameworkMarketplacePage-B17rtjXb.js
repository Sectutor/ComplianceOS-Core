import{r as p,t as n,i as h,j as e,z as N,I as v,x as m,C as k,d as y,S as b,k as c,e as C,f as I,m as L,c as S,ab as F}from"./index-DOc7Nwb7.js";import{D as u}from"./DashboardLayout-aHnUqq57.js";import{A as D,a as M,b as B}from"./alert-BudCfM-X.js";import{S as P}from"./search-CwuIBBPE.js";import{D as A}from"./download-ByfWg1Mi.js";import{B as E}from"./Breadcrumb-CRi3LAxS.js";import"./index--2vFva6Y.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function Q(){const[a,r]=p.useState(""),[t,i]=p.useState(null),{data:o,isLoading:f,error:d}=n.frameworkPlugins.listRegistry.useQuery(),j=n.useContext(),w=n.frameworkPlugins.installPlugin.useMutation({onSuccess:s=>{h.success("Successfully installed framework"),i(null),j.frameworks.list.invalidate()},onError:s=>{h.error(`Installation failed: ${s.message}`),i(null)}}),g=s=>{i(s),w.mutate({pluginId:s})},x=(o==null?void 0:o.plugins.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.tags.some(l=>l.toLowerCase().includes(a.toLowerCase()))))||[];return d?e.jsxs(D,{variant:"destructive",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx(M,{children:"Error loading marketplace"}),e.jsx(B,{children:d.message})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Framework Marketplace"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse and install official and community-contributed compliance frameworks."})]}),e.jsxs("div",{className:"relative w-72",children:[e.jsx(P,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search frameworks...",className:"pl-8",value:a,onChange:s=>r(s.target.value)})]})]}),f?e.jsx("div",{className:"flex justify-center p-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})}):x.length===0?e.jsx("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:e.jsx("p",{className:"text-muted-foreground",children:"No frameworks found matching your search."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsxs(k,{className:"flex flex-col h-full hover:shadow-md transition-shadow",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(b,{className:"h-6 w-6"})}),e.jsx(c,{variant:"secondary",children:s.version})]}),e.jsx(C,{className:"mt-4",children:s.name}),e.jsx(I,{className:"line-clamp-2 min-h-[40px]",children:s.description})]}),e.jsxs(L,{className:"flex-1 flex flex-col justify-end",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.tags.slice(0,3).map(l=>e.jsx(c,{variant:"outline",className:"text-xs",children:l},l)),s.tags.length>3&&e.jsxs(c,{variant:"outline",className:"text-xs",children:["+",s.tags.length-3]})]}),e.jsx(S,{className:"w-full",onClick:()=>g(s.id),disabled:t===s.id,children:t===s.id?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"mr-2 h-4 w-4 animate-spin"}),"Installing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Install Framework"]})})]})]},s.id))})]})}function ge(){const a=F(),r=a.id?parseInt(a.id):void 0,{data:t,isLoading:i}=n.clients.get.useQuery({id:r},{enabled:!!r});return i?e.jsx(u,{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(u,{children:e.jsxs("div",{className:"space-y-6 w-full max-w-full pb-10 px-6",children:[e.jsx(E,{items:[{label:"Clients",href:"/clients"},r&&t?{label:t.name,href:`/clients/${r}`}:void 0,{label:"Framework Marketplace"}].filter(Boolean)}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Framework Marketplace"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover and install compliance frameworks, standards, and regulations."})]}),e.jsx(Q,{})]})})}export{ge as default};
