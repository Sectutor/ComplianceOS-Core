import{ab as C,t as o,j as e,x as $,aq as b,c as y,C as p,d as h,e as j,m as g,h as k,k as v,U as A}from"./index-DOc7Nwb7.js";import{D as f}from"./DashboardLayout-aHnUqq57.js";import{B as T}from"./Breadcrumb-CRi3LAxS.js";import{A as B}from"./arrow-left-CpuUojG-.js";import{M as L}from"./mail-xRDvl6QK.js";import{B as S}from"./briefcase-BxorFA78.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";const n={R:{bg:"bg-red-100",text:"text-red-800",label:"Responsible"},A:{bg:"bg-blue-100",text:"text-blue-800",label:"Accountable"},C:{bg:"bg-green-100",text:"text-green-800",label:"Consulted"},I:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Informed"}};function ge(){var N;const{id:R,employeeId:w}=C(),a=parseInt(R||"0",10),d=parseInt(w||"0",10),{data:m}=o.clients.get.useQuery({id:a},{enabled:a>0}),{data:s}=o.employees.get.useQuery({id:d,clientId:a},{enabled:d>0&&a>0}),{data:i}=o.orgRoles.get.useQuery({id:(s==null?void 0:s.orgRoleId)||0},{enabled:!!(s!=null&&s.orgRoleId)}),{data:x,isLoading:I}=o.employees.getRACIMatrix.useQuery({clientId:a},{enabled:a>0}),r=x==null?void 0:x.find(t=>t.employeeId===d);return I?e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx($,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s?e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(T,{items:[{label:"Clients",href:"/clients"},{label:(m==null?void 0:m.name)||"Client",href:`/clients/${a}`},{label:"People",href:`/clients/${a}/people`},{label:`${s.firstName} ${s.lastName}`}]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{href:`/clients/${a}/people`,children:e.jsx(y,{variant:"ghost",size:"icon",children:e.jsx(B,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Employee Profile & Assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"md:col-span-1 h-fit",children:[e.jsx(h,{children:e.jsx(j,{children:"Profile"})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:[s.firstName[0],s.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.orgRoleTitle||s.jobTitle||"No Title"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(L,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.email})]}),s.department&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s.department})]}),(s.orgRoleTitle||s.role)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(S,{className:"w-4 h-4 text-gray-400"}),e.jsx(v,{variant:"outline",className:"font-normal text-wrap text-left h-auto py-1",children:s.orgRoleTitle||s.role})]}),s.managerName&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(A,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-muted-foreground",children:"Manager: "}),e.jsx("span",{children:s.managerName})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Assignment Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xl font-bold",children:(r==null?void 0:r.totalAssignments)||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),Object.keys(n).map(t=>{const c=(r==null?void 0:r.assignments.filter(l=>l.role===t||l.raciRole&&l.raciRole[0].toUpperCase()===t).length)||0;return c?e.jsxs("div",{className:`p-2 rounded text-center ${n[t].bg} ${n[t].text}`,children:[e.jsx("div",{className:"text-xl font-bold",children:c}),e.jsx("div",{className:"text-xs opacity-80",children:t})]},t):null})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[i&&e.jsxs(p,{children:[e.jsx(h,{children:e.jsxs(j,{children:["Organizational Role: ",i.title]})}),e.jsxs(g,{className:"space-y-4",children:[i.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description})]}),i.responsibilities&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Responsibilities"}),e.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap rounded-md bg-gray-50 p-3",children:i.responsibilities})]})]})]}),e.jsxs(p,{children:[e.jsx(h,{children:e.jsx(j,{children:"Assigned Responsibilities"})}),e.jsx(g,{children:(N=r==null?void 0:r.assignments)!=null&&N.length?e.jsx("div",{className:"space-y-4",children:r.assignments.map(t=>{var u;const c=t.role||(t.raciRole?t.raciRole[0].toUpperCase():"R"),l=n[c]||n.R;return e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg bg-gray-50/50 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`mt-1 w-8 h-8 rounded flex items-center justify-center font-bold text-sm ${l.bg} ${l.text} flex-shrink-0`,children:c}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(v,{variant:"outline",className:"text-xs uppercase tracking-wider",children:t.taskType}),t.taskIdentifier&&e.jsx("span",{className:"text-xs font-mono text-gray-500",children:t.taskIdentifier})]}),e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:t.taskName}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"capitalize flex items-center gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.taskStatus==="implemented"||t.taskStatus==="approved"?"bg-green-500":"bg-gray-400"}`}),(u=t.taskStatus)==null?void 0:u.replace("_"," ")]}),t.dueDate&&e.jsxs("span",{children:["Due: ",new Date(t.dueDate).toLocaleDateString()]})]})]}),e.jsx(y,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(b,{href:t.taskType==="policy"?`/clients/${a}/policies/${t.id}?from=employee-details&employeeId=${d}`:`/clients/${a}/controls`,children:"View"})})]},t.assignmentId)})}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No assignments found for this employee."})})]})]})]})]})}):e.jsx(f,{children:e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Employee not found"})})}export{ge as default};
