import{M as T,ac as B,r as x,t as f,i as N,j as e,x as E,aq as q,c as j,C as P,d as M,e as O,f as H,m as F,v as $,D as z,o as G,p as U,q as V,s as Q,L as C,I as A,w as W}from"./index-DOc7Nwb7.js";import{D}from"./DashboardLayout-aHnUqq57.js";import{T as Z}from"./textarea-BtxBxzdY.js";import{A as J}from"./arrow-left-CpuUojG-.js";import{P as K}from"./printer-B-Q0xXOk.js";import{C as X}from"./circle-check-C5kiwRoG.js";import{E as Y}from"./external-link-C3PXjBR9.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=T("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);function Te(){const{selectedClientId:s}=B(),[a,o]=x.useState({}),[g,d]=x.useState(!1),[t,m]=x.useState(null),{data:i,isLoading:p}=f.checklist.get.useQuery({clientId:s,checklistId:"iso-27001-readiness"},{enabled:!!s});x.useEffect(()=>{i!=null&&i.items&&o(i.items)},[i]);const c=f.checklist.update.useMutation({onError:()=>{N.error("Failed to save progress")}}),r=f.checklist.linkEvidenceRequest.useMutation({onSuccess:()=>{u.checklist.get.invalidate({clientId:s,checklistId:"iso-27001-readiness"})}}),l=f.evidence.create.useMutation({onSuccess:n=>{t&&s&&r.mutate({clientId:s,checklistId:"iso-27001-readiness",taskId:t.id,evidenceRequestId:n.id}),N.success("Evidence request created and linked"),d(!1),m(null)},onError:()=>{N.error("Failed to create evidence request")}}),u=f.useContext(),k=n=>{s&&c.mutate({clientId:s,checklistId:"iso-27001-readiness",items:n})},h=(n,b)=>{const w=a[n];let y;typeof w=="object"&&w!==null?y={...w,checked:b}:y=b;const S={...a,[n]:y};o(S),k(S)},v=(n,b)=>{m({id:n,title:b}),d(!0)},L=()=>{window.print()};return p?e.jsx(D,{children:e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx(E,{className:"animate-spin"})})}):e.jsxs(D,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto p-8 print:p-0 print:max-w-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{href:"/learning/iso-27001",children:e.jsxs(j,{variant:"ghost",size:"sm",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Back to Guide"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"ISO 27001 Readiness Checklist"}),e.jsx("p",{className:"text-muted-foreground",children:"A step-by-step guide to preparing for your audit. Progress saved automatically."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[c.isLoading&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center pr-2",children:[e.jsx(E,{className:"h-3 w-3 animate-spin mr-1"})," Saving..."]}),e.jsxs(j,{onClick:L,variant:"outline",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Print Checklist"]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(P,{className:"bg-slate-50 border-slate-200",children:[e.jsxs(M,{children:[e.jsx(O,{className:"text-xl",children:"Process Overview"}),e.jsx(H,{children:"Understanding the lifecycle of your readiness journey."})]}),e.jsx(F,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-sm",children:"1"}),"Before"]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"Scope â†’ gather docs â†’ identify stakeholders â†’ define expectations"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-sm",children:"2"}),"During"]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"Interviews â†’ evidence â†’ clause review â†’ Annex A control review â†’ gap analysis"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"font-semibold text-green-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-sm",children:"3"}),"After"]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"Report â†’ roadmap â†’ fix gaps â†’ internal audit â†’ management review â†’ certification"})]})]})})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(I,{title:"ðŸ”¹ BEFORE the Readiness Assessment",color:"bg-blue-50 border-blue-200 text-blue-900",items:R.BEFORE,checkedItems:a,onCheck:h,onRequestEvidence:v,clientId:s}),e.jsx(I,{title:"ðŸ”¹ DURING the Readiness Assessment",color:"bg-amber-50 border-amber-200 text-amber-900",items:R.DURING,checkedItems:a,onCheck:h,onRequestEvidence:v,clientId:s}),e.jsx(I,{title:"ðŸ”¹ AFTER the Readiness Assessment",color:"bg-green-50 border-green-200 text-green-900",items:R.AFTER,checkedItems:a,onCheck:h,onRequestEvidence:v,clientId:s})]})]}),e.jsx(ee,{open:g,onOpenChange:d,taskTitle:(t==null?void 0:t.title)||"",isLoading:l.isLoading,onSubmit:n=>{s&&t&&l.mutate({clientId:s,clientControlId:0,evidenceId:`READINESS-${t.id.substring(0,8).toUpperCase()}`,description:n.description,owner:n.owner,status:"pending"})}})]})}function I({title:s,items:a,color:o,checkedItems:g,onCheck:d,onRequestEvidence:t,clientId:m}){return e.jsxs("section",{className:"print:break-inside-avoid",children:[e.jsx("h2",{className:`text-xl font-bold px-4 py-2 rounded-lg mb-4 ${o}`,children:s}),e.jsx("div",{className:"grid gap-6",children:a.map((i,p)=>e.jsxs(P,{className:"print:shadow-none print:border-none",children:[e.jsx(M,{className:"pb-2",children:e.jsx(O,{className:"text-lg",children:i.title})}),e.jsx(F,{children:e.jsx("div",{className:"space-y-4",children:i.tasks.map((c,r)=>{const l=`iso-chk-${c.substring(0,10).replace(/[^a-z0-9]/gi,"")}-${p}-${r}`,u=g[l],k=typeof u=="object"?u.checked:!!u,h=typeof u=="object"?u.evidenceRequestId:void 0;return e.jsxs("div",{className:"group relative flex items-start justify-between p-2 -m-2 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx($,{id:l,className:"mt-1",checked:k,onCheckedChange:v=>d(l,v===!0)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:l,className:`text-sm font-medium leading-none cursor-pointer ${k?"text-muted-foreground line-through":""}`,children:c}),h&&e.jsx(q,{href:`/clients/${m}/audit-hub?request=${h}`,children:e.jsxs("div",{className:"mt-1.5 flex items-center gap-1.5 text-[10px] font-semibold text-indigo-600 hover:text-indigo-800 transition-colors cursor-pointer bg-indigo-50 w-fit px-1.5 py-0.5 rounded shadow-sm border border-indigo-100",children:[e.jsx(X,{className:"h-3 w-3"}),"Evidence Requested",e.jsx(Y,{className:"h-2.5 w-2.5"})]})})]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity print:hidden",children:!h&&e.jsxs(j,{variant:"ghost",size:"sm",className:"h-8 px-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>t(l,c),children:[e.jsx(_,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{className:"text-xs",children:"Request Evidence"})]})})]},r)})})})]},p))})]})}function ee({open:s,onOpenChange:a,taskTitle:o,isLoading:g,onSubmit:d}){const[t,m]=x.useState(""),[i,p]=x.useState("");x.useEffect(()=>{s&&(m(`Provide evidence for: ${o}`),p(""))},[s,o]);const c=r=>{r.preventDefault(),d({description:t,owner:i})};return e.jsx(z,{open:s,onOpenChange:a,children:e.jsxs(G,{className:"sm:max-w-[425px]",children:[e.jsxs(U,{children:[e.jsx(V,{children:"Request Evidence"}),e.jsx(Q,{children:"Create an evidence request in the Audit Hub linked to this readiness task."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"task",children:"Readiness Task"}),e.jsx(A,{id:"task",value:o,disabled:!0,className:"bg-slate-50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"description",children:"Evidence Description"}),e.jsx(Z,{id:"description",value:t,onChange:r=>m(r.target.value),placeholder:"What evidence is needed?",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"owner",children:"Assign to (Email/Name)"}),e.jsx(A,{id:"owner",value:i,onChange:r=>p(r.target.value),placeholder:"e.g. jdoe@company.com"})]}),e.jsxs(W,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(j,{type:"submit",disabled:g,children:g?"Creating...":"Create Request"})]})]})]})})}const R={BEFORE:[{title:"1. Define Scope",tasks:["ISMS scope defined (boundaries, locations, teams, tech).","Products/services in scope listed.","Out-of-scope areas clearly documented."]},{title:"2. Identify Stakeholders",tasks:["Information security team identified.","Process/Control owners listed (HR, IT, DevOps, Legal, Procurement).","Executive sponsor assigned."]},{title:"3. Gather Existing Documentation",tasks:["Existing policies collected.","Network diagrams available.","Asset inventory available.","Risk register (if exists) collected.","Existing incident logs/procedures gathered.","HR onboarding/offboarding documents gathered.","Vendor list + any supplier assessments collected."]},{title:"4. Understand Organizational Context",tasks:["Business objectives documented.","Legal/regulatory obligations identified (GDPR, HIPAA, etc.).","Interested parties identified.","Internal/external issues documented."]},{title:"5. Prep Logistics",tasks:["Interview schedule created.","Evidence repository created (SharePoint/Drive).","Staff notified of readiness assessment."]}],DURING:[{title:"1. ISO 27001 Clauses 4â€“10 Review",tasks:["Organizational context reviewed.","ISMS policy reviewed.","Roles/responsibilities reviewed.","Risk assessment methodology reviewed.","Risk treatment plan reviewed.","Document control and record-keeping reviewed.","Monitoring & measurement practices checked.","Internal audit process reviewed.","Management review process reviewed.","Corrective action process reviewed."]},{title:"2. Annex A / 93 Controls Review (ISO 27001:2022)",tasks:["A.5 Organizational Controls (Policies, roles, segregation of duties, project security, supplier management, legal requirements)","A.6 People Controls (Background checks, awareness training, disciplinary processes, remote working)","A.7 Physical Controls (Secure areas, equipment protection, entry controls, physical monitoring)","A.8 Technological Controls (Access, MFA, logging, backups, crypto, patch mgmt, malware, secure dev, vuln mgmt)"]},{title:"3. Interviews & Evidence Sampling",tasks:["HR interviewed (onboarding/offboarding, screening).","IT interviewed (access control, network, backups).","DevOps/SRE interviewed (deployment, CI/CD, secure dev).","Legal/Procurement interviewed (vendor management).","Incident Response team interviewed.","Samples taken (logs, access reviews, incident tickets)."]},{title:"4. Gap Analysis",tasks:["Controls scored (Not in place / Partial / Full).","Risks assigned to gaps.","Maturity levels documented."]}],AFTER:[{title:"1. Gap Analysis Report",tasks:["High-level summary delivered.","Nonconformities documented.","Control-by-control status documented.","Missing policies listed.","Missing procedures listed."]},{title:"2. Action Plan & Remediation",tasks:["Tasks created for each gap.","Owners assigned.","Timelines defined.","Required resources identified.","Quick wins identified."]},{title:"3. Update/Develop Documentation",tasks:["ISMS policy updated.","Statement of Applicability (SoA) updated.","Information classification defined.","Risk methodology & treatment plan refined.","Incident response & BCP plans updated.","Access control & supplier management procedures created."]},{title:"4. Implement/Strengthen Controls",tasks:["MFA enforced.","Logging enhanced.","Access reviews conducted.","Backup tests performed.","Vulnerability scans performed.","Awareness training launched."]},{title:"5. Internal Audit",tasks:["Internal audit plan prepared.","Internal audit executed.","Corrective actions raised."]},{title:"6. Management Review",tasks:["Review meeting held.","Minutes documented.","Decisions/actions tracked."]},{title:"7. Certification Prep",tasks:["Stage 1 readiness confirmed.","Evidence folders cleaned up and finalized.","Staff briefed for external auditor interviews."]}]};export{Te as default};
