import{ac as L,ab as U,r as h,t as x,i as u,j as e,C as K,d as Q,e as W,f as G,c as r,m as J,x as V,k as X,D as k,o as w,p as M,q as D,s as Y,L as o,I as j,w as R}from"./index-DOc7Nwb7.js";import{D as Z}from"./DashboardLayout-aHnUqq57.js";import{B as $}from"./Breadcrumb-CRi3LAxS.js";import{S as q}from"./switch-B74-5eCi.js";import{R as S}from"./RichTextEditor-NQxhVz6n.js";import{P as ee}from"./plus-BaQ35Jcx.js";import{P as se}from"./pen-BlTNmlLB.js";import{T as te}from"./trash-2-CFEfisbM.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function Le({hideLayout:d=!1,clientId:I}){var f,C,v,N;const{selectedClientId:P}=L(),{id:T,clientId:O}=U(),i=I||P||parseInt(T||O||"0")||0,[_,m]=h.useState(!1),[t,n]=h.useState(null),{data:l,isLoading:g,refetch:p}=(f=x.onboarding.getRequirements)==null?void 0:f.useQuery({clientId:i},{enabled:!!i}),A=(C=x.onboarding.createRequirement)==null?void 0:C.useMutation({onSuccess:()=>{u.success("Requirement created successfully"),m(!1),c({title:"",key:"",description:"",isMandatory:!0}),p()}}),F=(v=x.onboarding.updateRequirement)==null?void 0:v.useMutation({onSuccess:()=>{u.success("Requirement updated successfully"),n(null),p()}}),E=(N=x.onboarding.deleteRequirement)==null?void 0:N.useMutation({onSuccess:()=>{u.success("Requirement deleted successfully"),p()}}),[a,c]=h.useState({title:"",key:"",description:"",isMandatory:!0}),z=()=>{i&&A.mutate({clientId:i,...a})},B=()=>{!i||!t||F.mutate({clientId:i,id:t.id,title:t.title,description:t.description,isMandatory:t.isMandatory})},H=s=>{i&&confirm("Are you sure? This will remove this requirement for future onboardings.")&&E.mutate({clientId:i,id:s})},y=e.jsxs("div",{className:d?"":"space-y-6",children:[!d&&e.jsxs(e.Fragment,{children:[e.jsx($,{items:[{label:"Settings",href:"/settings"},{label:"Onboarding",active:!0}]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Onboarding Settings"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure compliance requirements and acknowledgments for new employees."})]})})]}),e.jsx("div",{className:"grid gap-6",children:e.jsxs(K,{children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Compliance Acknowledgments"}),e.jsx(G,{children:"Documents employees must read and acknowledge during onboarding."})]}),e.jsxs(r,{onClick:()=>m(!0),size:d?"sm":"default",className:"gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Add Requirement"]})]}),e.jsx(J,{children:e.jsxs("div",{className:"space-y-4",children:[g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(V,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l==null?void 0:l.map(s=>{var b;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-medium text-lg",children:s.title}),s.isMandatory&&e.jsx(X,{variant:"secondary",children:"Mandatory"}),e.jsx("span",{className:"text-xs text-mono text-gray-400 font-mono bg-gray-100 px-2 py-0.5 rounded",children:s.key})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:((b=s.description)==null?void 0:b.replace(/<[^>]*>/g,""))||"No description provided."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>n(s),children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>H(s.id),children:e.jsx(te,{className:"h-4 w-4"})})]})]},s.id)}),(!l||l.length===0)&&!g&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed",children:"No requirements configured. Default system requirements may be applied."})]})})]})}),e.jsx(k,{open:_,onOpenChange:m,children:e.jsxs(w,{className:"sm:max-w-[600px]",children:[e.jsxs(M,{children:[e.jsx(D,{children:"Add Compliance Requirement"}),e.jsx(Y,{children:"Create a new document or policy for employees to acknowledge."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Title"}),e.jsx(j,{id:"title",placeholder:"e.g. Remote Work Policy",value:a.title,onChange:s=>c({...a,title:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"key",children:"Key (Unique ID)"}),e.jsx(j,{id:"key",placeholder:"e.g. remote_work_policy",value:a.key,onChange:s=>c({...a,key:s.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lowercase, underscores only. Cannot be changed later."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Content"}),e.jsx(S,{minHeight:"200px",className:"[&_.ql-container]:max-h-[400px] [&_.ql-container]:overflow-y-auto",value:a.description,onChange:s=>c({...a,description:s})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:"mandatory",checked:a.isMandatory,onCheckedChange:s=>c({...a,isMandatory:s})}),e.jsx(o,{htmlFor:"mandatory",children:"Mandatory Acknowledgment"})]})]}),e.jsxs(R,{children:[e.jsx(r,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(r,{onClick:z,disabled:!a.title||!a.key,children:"Create Requirement"})]})]})}),e.jsx(k,{open:!!t,onOpenChange:s=>!s&&n(null),children:e.jsxs(w,{className:"sm:max-w-[600px]",children:[e.jsx(M,{children:e.jsx(D,{children:"Edit Requirement"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Title"}),e.jsx(j,{value:(t==null?void 0:t.title)||"",onChange:s=>n({...t,title:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Content"}),e.jsx(S,{minHeight:"200px",className:"[&_.ql-container]:max-h-[400px] [&_.ql-container]:overflow-y-auto",value:(t==null?void 0:t.description)||"",onChange:s=>n({...t,description:s})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{checked:(t==null?void 0:t.isMandatory)||!1,onCheckedChange:s=>n({...t,isMandatory:s})}),e.jsx(o,{children:"Mandatory Acknowledgment"})]})]}),e.jsxs(R,{children:[e.jsx(r,{variant:"outline",onClick:()=>n(null),children:"Cancel"}),e.jsx(r,{onClick:B,children:"Save Changes"})]})]})})]});return d?y:e.jsx(Z,{children:y})}export{Le as default};
