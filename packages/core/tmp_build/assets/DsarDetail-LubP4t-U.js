import{ab as H,b as G,t as R,i as A,r as _,j as e,z as E,c as v,k as o,C as x,d as D,e as p,m as u,L as n,S as J,F as Q,ao as P,f as S,E as Z,G as K,H as W,J as Y,K as C,v as X,I as M}from"./index-DOc7Nwb7.js";import{c}from"./utils-BC5CVi_C.js";import{S as O}from"./separator-BWuYil37.js";import{T as ee,a as se,b,c as j}from"./tabs-CBDTXbEn.js";import{T as f}from"./textarea-BtxBxzdY.js";import{B as ae}from"./Breadcrumb-CRi3LAxS.js";import{A as F}from"./arrow-left-CpuUojG-.js";import{C as te}from"./calendar-BlLJlGbj.js";import{D as re}from"./download-ByfWg1Mi.js";import{C as I}from"./circle-check-C5kiwRoG.js";import{U as q}from"./user-CqRnJLgW.js";import{M as ie}from"./mail-xRDvl6QK.js";import{C as z}from"./circle-check-big-BSqJVrgh.js";import{C as $}from"./clock-osbacZli.js";import{Z as ne}from"./zap-B01fFOkT.js";import{B as oe}from"./briefcase-BxorFA78.js";import{A as de}from"./activity-B1F2IRm3.js";import{I as U}from"./info-By5wLOUH.js";function Ae(){var g;const i=H(),a=parseInt((i==null?void 0:i.id)||"0"),d=i==null?void 0:i.dsarId,h=parseInt(d),[,N]=G(),{data:s,isLoading:y}=R.privacy.getDsarRequest.useQuery({id:h,clientId:a},{enabled:!!h&&!!a}),l=R.privacy.updateDsarStatus.useMutation({onSuccess:()=>{A.success("Status updated successfully")},onError:r=>{A.error("Failed to update status: "+r.message)}}),[w,k]=_.useState("overview");return y?e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)] animate-fade-in",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-6",children:[e.jsx("div",{className:"h-16 w-16 rounded-full border-4 border-primary/20 border-t-primary animate-spin shadow-inner"}),e.jsxs("div",{className:"space-y-2 text-center pointer-events-none",children:[e.jsx("p",{className:"text-xl font-bold text-foreground",children:"Loading Request Details"}),e.jsx("p",{className:"text-sm text-muted-foreground animate-shimmer",children:"Accessing secure privacy database..."})]})]})}):s?e.jsxs("div",{className:"w-full max-w-full p-6 space-y-6 flex flex-col h-full animate-fade-in overflow-hidden",children:[e.jsx(ae,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Privacy",href:`/clients/${a}/privacy`},{label:"DSAR Manager",href:`/clients/${a}/privacy/dsar`},{label:s.requestId}]}),e.jsxs("div",{className:"flex items-center justify-between bg-card p-6 rounded-xl border shadow-sm animate-slide-down",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-muted transition-all duration-300 active:scale-95 group",onClick:()=>N(`/clients/${a}/privacy/dsar`),children:e.jsx(F,{className:"h-5 w-5 group-hover:-translate-x-1 transition-transform"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:[s.requestType," Request"]}),e.jsx(o,{className:c("capitalize px-3 py-1 font-semibold rounded-full shadow-sm",s.status==="Completed"?"status-implemented text-white bg-green-600 hover:bg-green-700":s.status==="In Progress"?"status-in-progress":"status-not-implemented"),children:s.status})]}),e.jsxs("p",{className:"text-muted-foreground text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded text-xs border border-border/50",children:s.requestId}),e.jsx("span",{className:"text-muted-foreground/30",children:"â€¢"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(te,{className:"h-3.5 w-3.5"})," Received ",new Date(s.requestDate).toLocaleDateString(void 0,{dateStyle:"long"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(v,{variant:"outline",className:"shadow-none border-border/50 hover:bg-secondary/50 rounded-xl px-5 h-10",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Export Report"]}),e.jsx(v,{className:c("shadow-lg transition-all duration-300 font-semibold rounded-xl px-5 h-10",s.status==="Completed"?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground hover:shadow-primary/20"),onClick:()=>l.mutate({id:s.id,status:"Completed"}),disabled:s.status==="Completed"||l.isPending,children:s.status==="Completed"?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Completed"]}):l.isPending?"Updating...":"Mark as Completed"})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 flex-1 min-h-0",children:[e.jsxs("div",{className:"col-span-3 space-y-6 animate-slide-right flex flex-col",children:[e.jsxs(x,{className:"card-top-border border-info transition-all duration-500 hover:shadow-md h-fit",children:[e.jsx(D,{className:"pb-3 px-5",children:e.jsxs(p,{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-info"}),"Requester Profile"]})}),e.jsxs(u,{className:"space-y-5 px-5 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-secondary/30 p-4 rounded-xl border border-border/40 group transition-colors hover:bg-secondary/50",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-info/10 flex items-center justify-center ring-1 ring-info/20 shadow-sm transition-transform group-hover:scale-105",children:e.jsx(q,{className:"h-6 w-6 text-info"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-bold text-sm tracking-tight truncate",children:s.subjectName||"Unknown Requester"}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate opacity-80 flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"})," ",s.subjectEmail]})]})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest text-muted-foreground/70 decoration-info underline-offset-4 underline",children:"Verification status"}),e.jsxs("div",{className:c("flex items-center justify-between gap-2 px-3 py-2.5 rounded-xl border transition-all shadow-sm",s.verificationStatus==="Verified"?"status-implemented border-emerald-500/20":"status-warning border-amber-500/20"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:c("h-4 w-4",s.verificationStatus==="Verified"?"text-emerald-500":"text-amber-500")}),e.jsx("span",{className:"text-xs font-bold",children:s.verificationStatus})]}),s.verificationStatus==="Verified"&&e.jsx(z,{className:"h-3.5 w-3.5 text-emerald-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest text-muted-foreground/70",children:"Legal deadline"}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl border bg-muted/30 group hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-background border shadow-xs",children:e.jsx($,{className:"h-4 w-4 text-slate-400 group-hover:text-primary transition-colors"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold leading-none",children:s.dueDate?new Date(s.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"N/A"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"30-day compliance window"})]})]})]})]})]})]}),e.jsxs(x,{className:"card-top-border border-evaluation transition-all duration-500 hover:shadow-md flex-1",children:[e.jsx(D,{className:"pb-3 px-5",children:e.jsxs(p,{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-evaluation"}),"Resolution Strategy"]})}),e.jsx(u,{className:"space-y-4 px-5 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{className:"text-xs font-bold opacity-80 flex items-center gap-1.5",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Case Notes"]}),e.jsx(o,{variant:"outline",className:"text-[9px] font-bold uppercase py-0 px-1.5 h-4 border-muted-foreground/20 text-muted-foreground/60",children:"Internal Only"})]}),e.jsx(f,{className:"resize-none h-48 bg-muted/30 border-border/40 focus:ring-evaluation/20 focus:border-evaluation transition-all text-sm leading-relaxed rounded-xl shadow-inner scrollbar-thin",placeholder:"Outline the steps taken, internal findings, or specific challenges encountered during fulfillment...",defaultValue:s.resolutionNotes||"",onBlur:r=>l.mutate({id:s.id,resolutionNotes:r.target.value})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-[10px] text-muted-foreground flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3 text-brand-lime"}),"Real-time persistence active"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-mono opacity-50",children:"v1.2"})]})]})})]})]}),e.jsx("div",{className:"col-span-9 flex flex-col min-h-0",children:e.jsxs(ee,{value:w,onValueChange:k,className:"h-full flex flex-col bg-card rounded-xl border shadow-sm animate-slide-left",children:[e.jsx("div",{className:"px-6 pt-4",children:e.jsxs(se,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent gap-8",children:[e.jsx(b,{value:"overview",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 py-4 text-sm font-bold tracking-tight transition-all data-[state=active]:text-primary opacity-60 data-[state=active]:opacity-100 h-14",children:"Overview"}),e.jsx(b,{value:"verification",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 py-4 text-sm font-bold tracking-tight transition-all data-[state=active]:text-primary opacity-60 data-[state=active]:opacity-100 h-14",children:"Identity Verification"}),e.jsx(b,{value:"collection",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 py-4 text-sm font-bold tracking-tight transition-all data-[state=active]:text-primary opacity-60 data-[state=active]:opacity-100 h-14",children:"Data Collection"}),e.jsx(b,{value:"response",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 py-4 text-sm font-bold tracking-tight transition-all data-[state=active]:text-primary opacity-60 data-[state=active]:opacity-100 h-14",children:"Response Builder"}),e.jsx(b,{value:"audit",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 py-4 text-sm font-bold tracking-tight transition-all data-[state=active]:text-primary opacity-60 data-[state=active]:opacity-100 h-14",children:"Audit Log"})]})}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",children:[e.jsxs(j,{value:"overview",className:"space-y-8 mt-0 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-muted/30 p-5 rounded-2xl border border-border/40 hover:bg-muted/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 border border-primary/20 text-primary",children:e.jsx(oe,{className:"h-5 w-5"})}),e.jsx(n,{className:"text-xs font-bold uppercase tracking-widest opacity-70",children:"Structural Identity"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tighter mb-1",children:"Request Archetype"}),e.jsx("p",{className:"text-lg font-bold tracking-tight",children:s.requestType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tighter mb-1",children:"Ingestion channel"}),e.jsx(o,{variant:"secondary",className:"font-bold rounded-lg px-2.5 py-0.5 capitalize",children:s.submissionMethod})]})]})]}),e.jsxs("div",{className:"bg-muted/30 p-5 rounded-2xl border border-border/40 hover:bg-muted/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-evaluation/10 border border-evaluation/20 text-evaluation",children:e.jsx(de,{className:"h-5 w-5"})}),e.jsx(n,{className:"text-xs font-bold uppercase tracking-widest opacity-70",children:"Operations & Assignment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tighter mb-1",children:"Urgency classification"}),e.jsx(o,{variant:s.priority==="critical"?"destructive":"secondary",className:"uppercase font-bold rounded-lg px-2.5 py-0.5",children:s.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tighter mb-1",children:"Active respondent"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-3 py-1.5 rounded-xl bg-background border shadow-xs w-fit",children:[e.jsx("div",{className:"h-6 w-6 rounded-lg bg-primary flex items-center justify-center text-[10px] font-black text-primary-foreground shadow-sm",children:s.assigneeId?"JD":"--"}),e.jsx("span",{className:"text-sm font-bold tracking-tight",children:s.assigneeId?"John Doe":"Unassigned"})]})]})]})]})]}),e.jsxs(x,{className:"border-border/40 shadow-none bg-secondary/10 overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-primary/20"}),e.jsx(D,{className:"pb-4",children:e.jsxs(p,{className:"text-sm font-bold flex items-center gap-2 tracking-tight",children:[e.jsx(U,{className:"h-4 w-4 text-primary"}),"Execution Summary"]})}),e.jsxs(u,{className:"text-sm leading-relaxed text-muted-foreground/80 font-medium",children:["This ",s.requestType.toLowerCase()," request was initiated on ",new Date(s.requestDate).toLocaleDateString(),". The current objective is to ensure ",s.status==="Completed"?"all obligations have been met":"verification and collection phases are expedited","to remain within the Article 15 compliance window."]})]})]}),e.jsx(j,{value:"verification",className:"space-y-6 mt-0 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsxs(x,{className:"border-border/40 shadow-sm rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-primary/5 px-6 py-4 border-b border-border/40 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"bg-primary/10 text-primary border-primary/20 h-6 px-2 text-[10px] font-black",children:"STEP 01"}),e.jsxs("div",{children:[e.jsx(p,{className:"text-base font-bold tracking-tight",children:"Identity Authentication"}),e.jsx(S,{className:"text-[11px] font-medium",children:"Mandatory verification protocols under GDPR/CCPA framework."})]})]}),e.jsx("div",{className:c("h-3 w-3 rounded-full animate-pulse",s.verificationStatus==="Verified"?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]")})]}),e.jsxs(u,{className:"space-y-8 p-6",children:[e.jsxs("div",{className:"bg-info/5 p-5 rounded-2xl flex items-start gap-4 border border-info/20 group hover:bg-info/10 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-xl bg-background border shadow-xs text-info shrink-0",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-info flex items-center gap-1.5 uppercase tracking-wider mb-1",children:["Regulatory Insight",e.jsx(o,{className:"bg-info/10 text-info border-none h-4 text-[9px]",children:"Recital 64"})]}),e.jsx("p",{className:"text-sm text-info/80 leading-relaxed font-medium",children:'Compliance teams must use "reasonable measures" to verify identity. Avoid collecting excessive metadata solely for the purpose of this verification.'})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{className:"text-xs font-bold uppercase tracking-widest opacity-70",children:"Authentication methodology"}),e.jsxs(Z,{defaultValue:s.verificationMethod||"email",onValueChange:r=>l.mutate({id:s.id,verificationMethod:r}),children:[e.jsx(K,{className:"rounded-xl h-12 border-border/60 bg-muted/20 hover:bg-muted/40 transition-all font-bold tracking-tight",children:e.jsx(W,{placeholder:"Select method..."})}),e.jsxs(Y,{className:"rounded-xl border-border/60",children:[e.jsx(C,{value:"email",className:"cursor-pointer font-medium",children:"Email Validation (Magic Link)"}),e.jsx(C,{value:"account",className:"cursor-pointer font-medium",children:"Existing Account Login"}),e.jsx(C,{value:"id_document",className:"cursor-pointer font-medium",children:"ID Document (Passport/License)"}),e.jsx(C,{value:"challenge",className:"cursor-pointer font-medium",children:"Challenge Questions"})]})]})]}),e.jsx(O,{className:"bg-border/40"}),e.jsxs("div",{className:c("flex items-center space-x-4 p-5 rounded-2xl border transition-all cursor-pointer group select-none",s.verificationStatus==="Verified"?"bg-emerald-50 border-emerald-500/30 ring-1 ring-emerald-500/10":"bg-muted/10 border-border/60 hover:border-primary/30"),onClick:()=>l.mutate({id:s.id,verificationStatus:s.verificationStatus==="Verified"?"Pending":"Verified",status:s.verificationStatus==="Verified"?"In Progress":s.status}),children:[e.jsx("div",{className:c("h-6 w-6 rounded-lg border-2 flex items-center justify-center transition-all",s.verificationStatus==="Verified"?"bg-emerald-500 border-emerald-500 text-white":"border-muted-foreground/30 group-hover:border-primary/50"),children:s.verificationStatus==="Verified"&&e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"font-bold text-sm cursor-pointer tracking-tight",children:"Identity Confirmed"}),e.jsx("p",{className:"text-[11px] text-muted-foreground font-medium",children:"Check this if the requester's identity has been successfully authenticated."})]})]})]})]})}),e.jsx(j,{value:"collection",className:"space-y-6 mt-0 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsxs(x,{className:"border-border/40 shadow-sm rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-primary/5 px-6 py-4 border-b border-border/40",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"bg-primary/10 text-primary border-primary/20 h-6 px-2 text-[10px] font-black",children:"STEP 02"}),e.jsxs("div",{children:[e.jsx(p,{className:"text-base font-bold tracking-tight",children:"Data Inventory Search"}),e.jsx(S,{className:"text-[11px] font-medium",children:"Track and document the search for the subject's personal data across local and cloud environments."})]})]})}),e.jsxs(u,{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["CRM System","Marketing Database","Customer Support Tickets","Email Archives","HR Records","Billing System"].map((r,m)=>e.jsxs("div",{className:"flex items-center space-x-3 border p-4 rounded-2xl hover:bg-muted/30 transition-all group cursor-pointer border-border/50 hover:border-primary/30 animate-in fade-in slide-in-from-right duration-300",style:{animationDelay:`${m*50}ms`},children:[e.jsx(X,{id:`check-${r}`,className:"rounded-md h-5 w-5 data-[state=checked]:bg-primary"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(n,{htmlFor:`check-${r}`,className:"cursor-pointer font-bold text-sm tracking-tight truncate block",children:r}),e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tighter opacity-50",children:"Local node"})]})]},r))}),e.jsxs("div",{className:"mt-8 flex items-start gap-3 p-4 bg-muted/20 rounded-xl border border-dashed border-muted-foreground/30",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsx("p",{className:"text-[11px] text-muted-foreground leading-relaxed font-medium",children:"This checklist is maintained for internal audit trails and helps demonstrate accountability under GDPR Article 5(2). It does not automatically populate the final disclosure report."})]})]})]})}),e.jsx(j,{value:"response",className:"space-y-6 mt-0 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(le,{request:s})}),e.jsx(j,{value:"audit",className:"space-y-6 mt-0 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsxs(x,{className:"border-border/40 shadow-sm rounded-2xl overflow-hidden min-h-[400px]",children:[e.jsxs("div",{className:"bg-primary/5 px-6 py-4 border-b border-border/40",children:[e.jsxs(p,{className:"text-base font-bold tracking-tight flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-primary"}),"Action Timeline"]}),e.jsx(S,{className:"text-[11px] font-medium",children:"Immutable log of all administrative operations performed on this request."})]}),e.jsx(u,{className:"p-8",children:e.jsxs("div",{className:"relative space-y-8 before:absolute before:left-[11px] before:top-2 before:bottom-2 before:w-[2px] before:bg-gradient-to-b before:from-primary/20 before:via-primary/10 before:to-transparent",children:[(g=s.auditLog)==null?void 0:g.map((r,m)=>e.jsxs("div",{className:"relative flex gap-6 pl-2 group animate-in fade-in slide-in-from-left duration-300",style:{animationDelay:`${m*100}ms`},children:[e.jsx("div",{className:"relative z-10 p-1.5 rounded-full bg-background ring-4 ring-background border-2 border-primary/20 group-hover:border-primary/50 transition-colors",children:e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary"})}),e.jsxs("div",{className:"pb-6 border-b border-border/40 w-full group-last:border-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("p",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[r.action,e.jsx("span",{className:"h-1 w-1 rounded-full bg-muted-foreground/30"}),e.jsxs("span",{className:"text-muted-foreground font-bold tracking-tight lowercase",children:["by ",r.user]})]}),e.jsxs("p",{className:"text-[10px] font-mono text-muted-foreground flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),new Date(r.timestamp).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})]})]}),e.jsx("p",{className:"text-sm text-foreground/80 font-medium leading-relaxed",children:r.details}),r.action==="COMPLETED"&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-500/5 border border-emerald-500/10 w-fit",children:[e.jsx(z,{className:"h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-tighter",children:"Verified compliance"})]})]})]},m)),(!s.auditLog||s.auditLog.length===0)&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-3 opacity-40",children:[e.jsx(P,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-sm font-bold tracking-tight",children:"No activity logs recorded yet"})]})]})})]})})]})]})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)] space-y-6 animate-fade-in px-4",children:[e.jsx("div",{className:"bg-destructive/10 p-4 rounded-2xl ring-1 ring-destructive/20 shadow-sm",children:e.jsx(E,{className:"h-12 w-12 text-destructive animate-pulse"})}),e.jsxs("div",{className:"text-center space-y-2 max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Request not found"}),e.jsx("p",{className:"text-muted-foreground",children:"The Data Subject Access Request you are looking for does not exist or has been removed from the system."})]}),e.jsxs(v,{variant:"outline",size:"lg",className:"rounded-xl shadow-sm hover:translate-y-[-1px] transition-transform active:translate-y-0",onClick:()=>N(`/clients/${a}/privacy/dsar`),children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Back to DSAR Manager"]})]})}function le({request:i}){var s,y,l,w,k,g,r,m,L,T,B,V;const[a,d]=_.useState({personalDataFound:((s=i.responseData)==null?void 0:s.personalDataFound)||!1,dataCategories:((l=(y=i.responseData)==null?void 0:y.dataCategories)==null?void 0:l.join(`
`))||"",purposes:((k=(w=i.responseData)==null?void 0:w.purposes)==null?void 0:k.join(`
`))||"",recipients:((r=(g=i.responseData)==null?void 0:g.recipients)==null?void 0:r.join(`
`))||"",lawfulBasis:((L=(m=i.responseData)==null?void 0:m.lawfulBasis)==null?void 0:L.join(`
`))||"",retentionPeriod:((T=i.responseData)==null?void 0:T.retentionPeriod)||"",sources:((B=i.responseData)==null?void 0:B.sources)||"",rightsInfo:((V=i.responseData)==null?void 0:V.rightsInfo)||"You have the right to request access, rectification, erasure, restriction, and portability of your personal data."}),h=R.privacy.updateDsarResponseData.useMutation({onSuccess:()=>{A.success("Response framework saved successfully")},onError:t=>{A.error("Process failed: "+t.message)}}),N=()=>{h.mutate({id:i.id,responseData:{personalDataFound:a.personalDataFound,dataCategories:a.dataCategories.split(`
`).filter(t=>t.trim()),purposes:a.purposes.split(`
`).filter(t=>t.trim()),recipients:a.recipients.split(`
`).filter(t=>t.trim()),lawfulBasis:a.lawfulBasis.split(`
`).filter(t=>t.trim()),retentionPeriod:a.retentionPeriod,sources:a.sources,rightsInfo:a.rightsInfo}})};return e.jsxs(x,{className:"border-border/40 shadow-sm rounded-2xl overflow-hidden border-t-4 border-t-primary",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 p-6 bg-muted/5 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-xl font-bold tracking-tight",children:"Article 15 Disclosure Generator"}),e.jsx(S,{className:"text-xs font-medium",children:"Construct the comprehensive disclosure report for the data subject."})]}),e.jsx(v,{onClick:N,disabled:h.isPending,className:"rounded-xl px-6 font-bold shadow-lg shadow-primary/10 transition-all hover:translate-y-[-1px] active:translate-y-0",children:h.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full border-2 border-primary-foreground/30 border-t-primary-foreground animate-spin"}),"Saving..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Save Elements"]})})]}),e.jsxs(u,{className:"space-y-8 p-6",children:[e.jsxs("div",{className:c("flex items-start space-x-4 p-5 rounded-2xl border transition-all cursor-pointer group shadow-inner",a.personalDataFound?"bg-emerald-500/5 border-emerald-500/30":"bg-destructive/5 border-destructive/20"),onClick:()=>d({...a,personalDataFound:!a.personalDataFound}),children:[e.jsx("div",{className:c("mt-1 h-5 w-5 rounded-md border-2 flex items-center justify-center transition-all",a.personalDataFound?"bg-emerald-500 border-emerald-500 text-white":"border-destructive text-transparent"),children:a.personalDataFound&&e.jsx(I,{className:"h-3 w-3"})}),e.jsxs("div",{className:"grid gap-1 px-1 select-none",children:[e.jsx(n,{className:"font-bold text-base cursor-pointer tracking-tight",children:"Personal Information Identified"}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium max-w-lg",children:"Uncheck if the subject's personal data was not found or has been completely anonymized/deleted from all processing systems."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Categories of Data"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 15(1)(b)"})]}),e.jsx(f,{value:a.dataCategories,onChange:t=>d({...a,dataCategories:t.target.value}),className:"h-40 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-medium text-sm leading-relaxed custom-scrollbar",placeholder:`e.g. Identity Data
Contact Details
Browsing History`}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"List each category on a new line."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Purposes of Processing"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 15(1)(a)"})]}),e.jsx(f,{value:a.purposes,onChange:t=>d({...a,purposes:t.target.value}),className:"h-40 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-medium text-sm leading-relaxed custom-scrollbar",placeholder:`e.g. Execution of contract
Marketing opt-in
Legal record keeping`}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"List each purpose on a new line."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Recipients of Data"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 15(1)(c)"})]}),e.jsx(f,{value:a.recipients,onChange:t=>d({...a,recipients:t.target.value}),className:"h-40 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-medium text-sm leading-relaxed custom-scrollbar",placeholder:`e.g. Cloud providers (AWS)
Payment processors (Stripe)
Third-party marketing partners`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Processing Lawfulness"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 6"})]}),e.jsx(f,{value:a.lawfulBasis,onChange:t=>d({...a,lawfulBasis:t.target.value}),className:"h-40 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-medium text-sm leading-relaxed custom-scrollbar",placeholder:`e.g. Article 6(1)(b) - Contractual necessity
Article 6(1)(a) - Consent`})]})]}),e.jsx(O,{className:"bg-border/40"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Retention period"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 15(1)(d)"})]}),e.jsx(M,{value:a.retentionPeriod,onChange:t=>d({...a,retentionPeriod:t.target.value}),className:"h-12 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-bold tracking-tight",placeholder:"e.g., 7 years post-termination"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest opacity-60",children:"Origin of data"}),e.jsx(o,{variant:"outline",className:"text-[9px] h-4",children:"Article 15(1)(g)"})]}),e.jsx(M,{value:a.sources,onChange:t=>d({...a,sources:t.target.value}),className:"h-12 rounded-xl bg-muted/20 border-border/60 focus:ring-primary/20 transition-all font-bold tracking-tight",placeholder:"e.g., Direct collection, Public directories"})]})]}),e.jsxs("div",{className:"space-y-3 bg-primary/5 p-6 rounded-2xl border border-primary/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(n,{className:"text-[10px] uppercase font-bold tracking-widest text-primary",children:"Data Subject Rights Notification"}),e.jsx(o,{className:"bg-primary/20 text-primary border-none text-[9px]",children:"Article 15(1)(e)"})]}),e.jsx(f,{value:a.rightsInfo,onChange:t=>d({...a,rightsInfo:t.target.value}),className:"h-28 rounded-xl bg-background border-border/60 focus:ring-primary/30 transition-all font-medium text-sm leading-relaxed shadow-xs"}),e.jsx("p",{className:"text-[10px] text-muted-foreground flex items-center gap-1.5 font-medium italic",children:"Standard regulatory language prepopulated. Adjust if specific jurisdictional requirements apply."})]})]})]})}export{Ae as default};
