import{ac as k,r as I,b as D,t as h,j as e,C as c,d as u,e as j,f,m as l,h as P,T as L,c as r,I as N,A as d,N as E,O as T,P as g,Q as a,V as R,W as n,F as B,k as F}from"./index-DOc7Nwb7.js";import{C as A}from"./CyberLayout-B8x_G-rt.js";import{E as O}from"./enhanced-dialog-CeRPsI16.js";import{P as M}from"./PageGuide-CPKKXXS6.js";import{L as q}from"./link-2-CtlmhYuV.js";import{F as H}from"./file-check-De1wUTh7.js";import{S as b}from"./shield-check-ETs8j4-d.js";import{E as $}from"./external-link-C3PXjBR9.js";import{F as z}from"./folder-open-G4YXLyIS.js";import{P as Q}from"./plus-BaQ35Jcx.js";import{S as U}from"./search-CwuIBBPE.js";import"./DashboardLayout-aHnUqq57.js";import"./index--2vFva6Y.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./book-open-BffBrdze.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./database-Bjtecw5f.js";import"./activity-B1F2IRm3.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./utils-BC5CVi_C.js";import"./bar-chart-3-BCngNY6H.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";const V=[{id:"bcp",title:"Business Continuity Plans",description:"BIA, Recovery Plans, and BCM documentation",icon:P,path:"/business-continuity",color:"text-blue-600 bg-blue-50"},{id:"policies",title:"Security Policies",description:"Information Security, Access Control, and other policies",icon:H,path:"/client-policies",color:"text-green-600 bg-green-50"},{id:"risks",title:"Risk Management",description:"Risk assessments, mitigations, and treatment plans",icon:L,path:"/risks",color:"text-orange-600 bg-orange-50"},{id:"controls",title:"Control Framework",description:"Implemented controls and their evidence",icon:b,path:"/client-controls",color:"text-purple-600 bg-purple-50"}];function Oe(){const{selectedClientId:t}=k(),[v,i]=I.useState(!1),[,m]=D(),{data:o,isLoading:C,refetch:y}=h.clientPolicies.list.useQuery({clientId:t||0,module:"cyber"},{enabled:!!t}),p=h.clientPolicies.create.useMutation({onSuccess:()=>{i(!1),y()}}),w=s=>{s.preventDefault();const S=s.target.elements.namedItem("name").value;t&&p.mutate({clientId:t,name:S,module:"cyber",status:"draft",content:`# New NIS2 Policy

Draft content...`})};return e.jsx(A,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"animate-slide-down",children:e.jsx(M,{title:"Documentation & Evidence",description:"Repository for NIS2 required policies and linked evidence.",rationale:"Demonstrable compliance requires organized, accessible documentation of policies and evidence.",howToUse:[{step:"Create",description:"Draft and approve NIS2-specific policies."},{step:"Link",description:"Connect evidence from other modules (Risks, BCP, Controls)."},{step:"Review",description:"Ensure all documentation is up-to-date and approved."}]})}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Linked Evidence Sources"]}),e.jsx(f,{children:"NIS2 compliance draws on documentation from multiple areas. Click to view related evidence."})]}),e.jsx(l,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:V.map(s=>{const x=s.icon;return e.jsx(c,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/30",onClick:()=>m(s.path),children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${s.color} mb-3`,children:e.jsx(x,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-semibold text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-1 mt-3 text-xs text-primary",children:[e.jsx($,{className:"h-3 w-3"}),"View Documents"]})]})},s.id)})})})]}),e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"NIS2 Specific Documents"]}),e.jsx(f,{children:"Policies and procedures specifically created for NIS2 compliance."})]}),e.jsxs(r,{onClick:()=>i(!0),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," Create Document"]})]})}),e.jsxs(l,{children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"relative w-72",children:[e.jsx(U,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(N,{placeholder:"Search documents...",className:"pl-8"})]})}),C?e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-12 w-full"}),e.jsx(d,{className:"h-12 w-full"}),e.jsx(d,{className:"h-12 w-full"})]}):o&&o.length>0?e.jsx("div",{className:"border rounded-md",children:e.jsxs(E,{children:[e.jsx(T,{children:e.jsxs(g,{children:[e.jsx(a,{children:"Document Name"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Last Updated"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(R,{children:o.map(s=>e.jsxs(g,{children:[e.jsx(n,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-blue-500"}),s.name]})}),e.jsx(n,{children:e.jsx(F,{variant:s.status==="approved"?"default":"outline",children:s.status})}),e.jsx(n,{className:"text-muted-foreground text-sm",children:new Date(s.updatedAt||new Date).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>m(`/clients/${t}/policies/${s.id}`),children:"Edit"})})]},s.id))})]})}):e.jsx("div",{className:"border-dashed border-2 rounded-lg py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"h-12 w-12 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(b,{className:"h-6 w-6 text-slate-400"})}),e.jsx("h3",{className:"font-semibold text-lg",children:"No NIS2 Documents Yet"}),e.jsx("p",{className:"text-muted-foreground max-w-sm mb-6 mt-2",children:"Start by creating key NIS2 policies such as the Information Security Policy or Incident Response Plan."}),e.jsx(r,{onClick:()=>i(!0),children:"Create First Document"})]})})]})]}),e.jsx(O,{open:v,onOpenChange:i,title:"Create NIS2 Document",description:"Add a new policy or evidence document to the repository.",children:e.jsxs("form",{onSubmit:w,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Document Name"}),e.jsx(N,{name:"name",placeholder:"e.g. Incident Response Plan",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:p.isLoading,children:"Create"})]})]})})]})})}export{Oe as default};
