import{r as N,j as e,S as C,t as j,T as $,C as g,m as p,ab as W,b as q,u as _,c as y,d as L,e as H,f as J,aq as D,k as X,an as Y,a3 as Z}from"./index-DOc7Nwb7.js";import{D as T}from"./DashboardLayout-aHnUqq57.js";import{R as P}from"./RiskHeatmap-OsHQJKEg.js";import{T as M}from"./trending-down-qhVy-7Im.js";import{T as F}from"./trending-up-eUiO956o.js";import{M as z}from"./minus-D5NXr0he.js";import{C as ee}from"./circle-check-C5kiwRoG.js";import{T as G}from"./target-cfAj3L6j.js";import{R as se,l as te,T as ie}from"./generateCategoricalChart-KNLgM3hn.js";import{P as ae,a as re}from"./PieChart-Lpe3cWE7.js";import{A as S}from"./activity-B1F2IRm3.js";import{P as le}from"./PageGuide-CPKKXXS6.js";import{C as ne}from"./circle-check-big-BSqJVrgh.js";import{S as U}from"./sparkles-CoQ80pK2.js";import{A as R}from"./arrow-right-M96iV-v9.js";import{S as de}from"./server-Dvm2PAz3.js";import{F as oe}from"./flame-BhFhwlpV.js";import{S as ce}from"./stethoscope-QtggHuPQ.js";import{B as me}from"./bar-chart-3-BCngNY6H.js";import{B as xe}from"./book-open-BffBrdze.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./database-Bjtecw5f.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";import"./utils-BC5CVi_C.js";import"./isEqual-D_xcZLCn.js";import"./PolarAngleAxis-BO8F-h7c.js";import"./separator-BWuYil37.js";import"./info-By5wLOUH.js";const O={"Very High":5,High:4,Medium:3,Low:2,"Very Low":1};function he({risks:r}){const s=N.useMemo(()=>{let t=0,o=0,d=0,x=0,f=0,h=0,c=0;r.forEach(m=>{const u=O[m.inherentRisk||"Medium"]||3,w=O[m.residualRisk||m.inherentRisk||"Medium"]||3;t+=u,o+=w,w<u?d++:w>u?f++:x++,m.treatmentCount>0&&h++,u>=4&&(!m.treatmentCount||m.treatmentCount===0)&&c++});const b=t>0?Math.round((t-o)/t*100):0,v=r.length>0?Math.round(h/r.length*100):0;return{totalInherent:t,totalResidual:o,reductionPercentage:b,risksReduced:d,risksUnchanged:x,risksIncreased:f,treatedCount:h,untreatedHighRisks:c,treatmentCoverage:v,totalRisks:r.length}},[r]),i=[{name:"Reduced",value:s.risksReduced,fill:"#22c55e"},{name:"Unchanged",value:s.risksUnchanged,fill:"#6b7280"},{name:"Increased",value:s.risksIncreased,fill:"#ef4444"}].filter(t=>t.value>0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-emerald-500 rounded-xl shadow-lg p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/90",children:"Risk Reduction"}),e.jsxs("p",{className:"text-3xl font-bold mt-1 text-white",children:[s.reductionPercentage,"%"]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-sm",children:s.reductionPercentage>0?e.jsx(M,{className:"w-6 h-6 text-white"}):s.reductionPercentage<0?e.jsx(F,{className:"w-6 h-6 text-white"}):e.jsx(z,{className:"w-6 h-6 text-white"})})]}),e.jsxs("p",{className:"text-xs text-white/80 mt-2 font-medium",children:["Inherent: ",s.totalInherent," â†’ Residual: ",s.totalResidual]})]}),e.jsxs("div",{className:"bg-blue-500 rounded-xl shadow-lg p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/90",children:"Treatment Coverage"}),e.jsxs("p",{className:"text-3xl font-bold mt-1 text-white",children:[s.treatmentCoverage,"%"]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-sm",children:e.jsx(C,{className:"w-6 h-6 text-white"})})]}),e.jsxs("p",{className:"text-xs text-white/80 mt-2 font-medium",children:[s.treatedCount," of ",s.totalRisks," risks treated"]})]}),e.jsxs("div",{className:"bg-indigo-500 rounded-xl shadow-lg p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/90",children:"Risks Improved"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-white",children:s.risksReduced})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-sm",children:e.jsx(ee,{className:"w-6 h-6 text-white"})})]}),e.jsx("p",{className:"text-xs text-white/80 mt-2 font-medium",children:"Residual lower than inherent"})]}),e.jsxs("div",{className:`rounded-xl shadow-lg p-4 text-white ${s.untreatedHighRisks>0?"bg-rose-500":"bg-teal-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/90",children:"Attention Needed"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-white",children:s.untreatedHighRisks})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-sm",children:e.jsx(G,{className:"w-6 h-6 text-white"})})]}),e.jsx("p",{className:"text-xs text-white/80 mt-2 font-medium",children:"High risks without treatments"})]})]}),e.jsxs("div",{className:"bg-card rounded-xl border shadow-sm p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Risk Level Changes"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-48 h-48",children:e.jsx(se,{width:"100%",height:"100%",children:e.jsxs(ae,{children:[e.jsx(re,{data:i,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:i.map((t,o)=>e.jsx(te,{fill:t.fill},`cell-${o}`))}),e.jsx(ie,{})]})})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Reduced (Improved)"})]}),e.jsx("span",{className:"font-bold text-green-600",children:s.risksReduced})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Unchanged"})]}),e.jsx("span",{className:"font-bold text-gray-600",children:s.risksUnchanged})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Increased (Worsened)"})]}),e.jsx("span",{className:"font-bold text-red-600",children:s.risksIncreased})]})]})]})]})]})}function ge({title:r,value:s,previousValue:i,icon:t,colorScheme:o,suffix:d="",isLoading:x}){const h={red:{bg:"bg-red-500",text:"text-white",icon:"bg-white/20 text-white"},yellow:{bg:"bg-amber-500",text:"text-white",icon:"bg-white/20 text-white"},green:{bg:"bg-emerald-500",text:"text-white",icon:"bg-white/20 text-white"},blue:{bg:"bg-blue-500",text:"text-white",icon:"bg-white/20 text-white"}}[o];let c="neutral",b=0;i!==void 0&&typeof s=="number"&&(s>i?(c="up",b=i>0?Math.round((s-i)/i*100):100):s<i&&(c="down",b=i>0?Math.round((i-s)/i*100):0));const v=c==="up"?F:c==="down"?M:z;return e.jsx(g,{className:`${h.bg} border-none shadow-lg transition-all hover:scale-[1.02] hover:shadow-xl duration-300`,children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-white/70 uppercase tracking-widest",children:r}),e.jsx("div",{className:"flex items-baseline gap-2 mt-1",children:x?e.jsx("div",{className:"h-8 w-16 bg-white/20 animate-pulse rounded"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`text-2xl font-black ${h.text}`,children:[s,d]}),i!==void 0&&e.jsxs("span",{className:`text-xs font-bold flex items-center gap-0.5 ${c==="up"||c==="down"?"text-white":"text-white/60"}`,children:[e.jsx(v,{className:"w-3 h-3"}),b,"%"]})]})})]}),e.jsx("div",{className:`p-3 rounded-xl ${h.icon} backdrop-blur-md border border-white/10 shadow-inner`,children:e.jsx(t,{className:"w-5 h-5"})})]})})})}function pe({clientId:r}){const{data:s,isLoading:i}=j.risks.getKRIStats.useQuery({clientId:r},{enabled:!!r,staleTime:6e4}),t=[{title:"High/Critical Risks",value:(s==null?void 0:s.highRiskCount)??0,previousValue:s==null?void 0:s.previousHighRiskCount,icon:$,colorScheme:"red"},{title:"Avg Residual Score",value:(s==null?void 0:s.avgResidualScore)??0,previousValue:s==null?void 0:s.previousAvgResidual,icon:G,colorScheme:"yellow"},{title:"Controls Linked",value:(s==null?void 0:s.linkedControlsCount)??0,previousValue:s==null?void 0:s.previousLinkedControls,icon:C,colorScheme:"green"},{title:"Treatment Progress",value:(s==null?void 0:s.treatmentProgress)??0,previousValue:s==null?void 0:s.previousTreatmentProgress,icon:S,colorScheme:"blue",suffix:"%"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((o,d)=>e.jsx(ge,{...o,isLoading:i},d))})}function js(){const r=W(),[s,i]=q(),t=r.id?Number(r.id):null,{user:o,client:d}=_(),[x,f]=N.useState(!0),[h,c]=N.useState(!0),[b,v]=N.useState(!0),[m,u]=N.useState(null);j.useUtils();const w=t||(d==null?void 0:d.id),{data:K,isLoading:B}=j.clients.get.useQuery({id:w||0},{enabled:!!w&&!d}),k=d||K,l=(k==null?void 0:k.id)||0,{data:I,isLoading:be}=j.risks.getAssets.useQuery({clientId:l},{enabled:!!l}),{data:n,isLoading:we}=j.risks.getRiskAssessments.useQuery({clientId:l},{enabled:!!l});if(B)return e.jsx(T,{children:e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading client data..."})});if(!k)return e.jsx(T,{children:e.jsx("div",{className:"p-8 text-center text-destructive",children:"Client not found."})});const Q=(n==null?void 0:n.filter(a=>a.inherentRisk==="High"||a.inherentRisk==="Very High").length)||0,E=(n==null?void 0:n.filter(a=>a.treatmentCount>0).length)||0;I!=null&&I.filter(a=>(a.valuationC||0)>=4||(a.valuationI||0)>=4||(a.valuationA||0)>=4).length;const V=[{label:"Total Risks",value:(n==null?void 0:n.length)||0,icon:C,bgColor:"bg-blue-600",iconColor:"text-white",containerClass:"text-white shadow-lg shadow-blue-200 dark:shadow-none"},{label:"High/Critical Risks",value:Q,icon:$,bgColor:"bg-red-600",iconColor:"text-white",containerClass:"text-white shadow-lg shadow-red-200 dark:shadow-none"},{label:"With Treatments",value:E,icon:ne,bgColor:"bg-emerald-600",iconColor:"text-white",containerClass:"text-white shadow-lg shadow-emerald-200 dark:shadow-none"}];return e.jsx(T,{children:e.jsxs("div",{className:"space-y-6 w-full max-w-full px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Risk Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Overview of your risk posture and asset coverage."})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(le,{title:"Risk Dashboard",description:"Real-time overview of your organizational risk posture.",rationale:"This dashboard provides executives and risk managers with an immediate view of high-priority risks, upcoming deadlines, and overall risk reduction progress.",howToUse:[{step:"Monitor Stats",description:"Track key metrics like 'Critical Risks' and 'Overdue Actions' at a glance."},{step:"Analyze Heatmaps",description:"Visualize inherent vs. residual risk distribution."},{step:"Track Remediation",description:"Use the 'Risk Reduction' chart to see progress over time."},{step:"Action Items",description:"Address items in the 'Overdue' and 'Upcoming' lanes immediately."}],integrations:[{name:"Risk Register",description:"Aggregates data from all individual risk assessments."},{name:"Gap Analysis",description:"Displays compliance gaps alongside operational risks."},{name:"KRIs",description:"Trends for Key Risk Indicators are visualized here."}]})})]}),e.jsx(g,{className:"bg-gradient-to-r from-slate-900 to-orange-900 text-white border-0 shadow-2xl overflow-hidden group cursor-pointer",onClick:()=>i(`/clients/${l}/risks/overview`),children:e.jsxs(p,{className:"p-0 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-orange-500/20 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-500"}),e.jsxs("div",{className:"p-8 flex flex-col md:flex-row items-center justify-between gap-6 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/10 px-2 py-0.5 rounded-full border border-white/20 text-[10px] font-bold uppercase tracking-wider text-orange-200",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"Knowledge Hub"})]}),e.jsx("h2",{className:"text-2xl font-bold",children:"Risk Management Framework Overview"}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:"Understand the integrated workflow between Assets, Threats, Assessments, and Treatment Plans. Learn ISO 27005 methodology."})]}),e.jsxs(y,{className:"bg-white text-slate-900 hover:bg-orange-50 font-bold px-6 py-6 h-auto rounded-xl shadow-lg group-hover:translate-x-1 transition-transform",children:["Explore Framework Guide",e.jsx(R,{className:"w-5 h-5 ml-2"})]})]})]})}),e.jsxs(g,{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none shadow-lg overflow-hidden relative mb-6",children:[e.jsxs(L,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-6 h-6 text-red-400"}),"Getting Started with Risk Management"]}),e.jsx(J,{className:"text-slate-300",children:"Follow this workflow to identify, assess, and treat information security risks."})]}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 relative",children:[e.jsx("div",{className:"hidden md:block absolute top-6 left-10 right-10 h-0.5 bg-slate-700 -z-10"}),[{step:"1. Start",title:"Define Assets",desc:"Register critical information assets.",link:`/clients/${l}/risks/assets`,icon:de,color:"text-blue-400",bg:"bg-blue-900/50"},{step:"2. Library",title:"Threats & Vulns",desc:"Manage your threat library.",link:`/clients/${l}/risks/threats`,icon:oe,color:"text-orange-400",bg:"bg-orange-900/50"},{step:"3. Assess",title:"Risk Assessment",desc:"Analyze risks and impact.",link:`/clients/${l}/risks/assessments`,icon:S,color:"text-red-400",bg:"bg-red-900/50"},{step:"4. Treat",title:"Treatment Plan",desc:"Define controls and mitigation.",link:`/clients/${l}/risks/treatment-plan`,icon:ce,color:"text-green-400",bg:"bg-green-900/50"},{step:"5. Monitor",title:"Review & Report",desc:"Track ROI and risk reduction.",link:`/clients/${l}/risks/report`,icon:me,color:"text-purple-400",bg:"bg-purple-900/50"}].map((a,A)=>e.jsx(D,{href:a.link,children:e.jsxs("div",{className:"group relative flex flex-col items-center text-center p-4 rounded-xl hover:bg-white/10 transition-colors cursor-pointer h-full border border-transparent hover:border-white/10",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${a.bg} flex items-center justify-center mb-3 shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(a.icon,{className:`w-6 h-6 ${a.color}`})}),e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1",children:a.step}),e.jsx("div",{className:"font-semibold mb-1 text-white",children:a.title}),e.jsx("div",{className:"text-xs text-slate-400 leading-snug",children:a.desc})]})},A))]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[V.map((a,A)=>e.jsxs("div",{className:`p-4 rounded-xl border-none shadow-sm flex items-center justify-between ${a.bgColor} ${a.containerClass}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 font-medium",children:a.label}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-white",children:a.value})]}),e.jsx("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-md",children:e.jsx(a.icon,{className:"w-5 h-5 text-white"})})]},A)),e.jsx("div",{className:"p-4 rounded-xl border border-amber-200 bg-white shadow-sm flex flex-col justify-between cursor-pointer hover:border-amber-400 hover:shadow-md transition-all group",onClick:()=>window.location.href=`/clients/${l}/risks/alignment-guide`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900",children:"ISO 27005"}),e.jsx(X,{variant:"secondary",className:"text-[10px] px-1.5 h-5 bg-amber-100 text-amber-700 pointer-events-none",children:"GUIDE"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mt-2 font-medium group-hover:text-amber-600 transition-colors",children:[e.jsx("span",{children:"View alignment"}),e.jsx(R,{className:"w-3 h-3 group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 text-amber-600 group-hover:bg-amber-100 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(D,{href:`/clients/${l}/risks/guided`,children:e.jsxs(y,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:[e.jsx(U,{className:"w-4 h-4 mr-2"})," Start Guided Assessment"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ue,{clientId:l}),e.jsx(je,{clientId:l})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Key Risk Indicators"}),e.jsx(pe,{clientId:l})]}),e.jsx(g,{className:"bg-gradient-to-r from-blue-900 to-indigo-900 text-white border-none shadow-lg mb-6",children:e.jsxs(p,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-blue-300"}),e.jsx("h3",{className:"text-xl font-bold",children:"Gap Analysis"})]}),e.jsx("p",{className:"text-blue-100 max-w-2xl",children:"Conduct comprehensive gap assessments against major security frameworks like ISO 27001, SOC 2, HIPAA, and NIST. Identify missing controls and track remediation."})]}),e.jsxs(y,{onClick:()=>i(`/clients/${l}/gap-analysis`),className:"bg-white text-blue-900 hover:bg-blue-50",children:["Open Gap Analysis",e.jsx(R,{className:"w-4 h-4 ml-2"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>f(!x),className:"flex items-center gap-2 text-lg font-semibold hover:text-primary transition-colors",children:[x?e.jsx(Y,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"}),"Risk Analytics & Visualizations"]}),x&&e.jsxs("div",{className:"space-y-6",children:[n&&n.length>0&&e.jsx(he,{risks:n}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{children:e.jsx(p,{className:"pt-6",children:e.jsx(P,{assessments:n||[],type:"inherent",title:"Inherent Risk Heatmap",activeFilter:m,onFilterChange:u})})}),e.jsx(g,{children:e.jsx(p,{className:"pt-6",children:e.jsx(P,{assessments:n||[],type:"residual",title:"Residual Risk Heatmap",activeFilter:m,onFilterChange:u})})})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(y,{variant:"outline",onClick:()=>i(`/clients/${l}/risks/register`),className:"w-full justify-between",children:[e.jsx("span",{className:"font-medium",children:"View Full Risk Register"}),e.jsx(R,{className:"w-4 h-4"})]})})]})})}function ue({clientId:r}){const{data:s=[],isLoading:i}=j.risks.getOverdueItems.useQuery({clientId:r},{enabled:!!r});return e.jsxs(g,{className:"border-l-4 border-l-red-500",children:[e.jsx(L,{className:"pb-2",children:e.jsxs(H,{className:"text-base flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-red-500"})," Overdue Actions",s.length>0&&e.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded-full",children:s.length})]})}),e.jsx(p,{children:i?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Loading..."}):s.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No overdue items ðŸŽ‰"}):e.jsx("ul",{className:"space-y-2",children:s.slice(0,5).map(t=>e.jsxs("li",{className:"text-sm flex justify-between items-center p-2 bg-red-50 dark:bg-red-900/20 rounded",children:[e.jsx("span",{className:"truncate",children:t.title}),e.jsxs("span",{className:"text-xs text-red-600 whitespace-nowrap ml-2",children:[t.daysOverdue,"d overdue"]})]},`${t.type}-${t.id}`))})})]})}function je({clientId:r}){const{data:s=[],isLoading:i}=j.risks.getUpcomingDeadlines.useQuery({clientId:r,days:14},{enabled:!!r});return e.jsxs(g,{className:"border-l-4 border-l-yellow-500",children:[e.jsx(L,{className:"pb-2",children:e.jsxs(H,{className:"text-base flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-yellow-500"})," Upcoming Deadlines",s.length>0&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full",children:s.length})]})}),e.jsx(p,{children:i?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Loading..."}):s.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No upcoming deadlines"}):e.jsx("ul",{className:"space-y-2",children:s.slice(0,5).map(t=>e.jsxs("li",{className:"text-sm flex justify-between items-center p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded",children:[e.jsx("span",{className:"truncate",children:t.title}),e.jsxs("span",{className:"text-xs text-yellow-600 whitespace-nowrap ml-2",children:["in ",t.daysUntilDue,"d"]})]},`${t.type}-${t.id}`))})})]})}export{js as default};
