import{j as e,C as n,d as c,e as d,m as o,ab as $,t as C,R as b,aq as g,c as f,S as T,f as A,T as k,F as D,k as M}from"./index-DOc7Nwb7.js";import{D as L}from"./DashboardLayout-aHnUqq57.js";import{c as I}from"./utils-BC5CVi_C.js";import{B as j}from"./book-open-BffBrdze.js";import{A as S}from"./arrow-right-M96iV-v9.js";import{D as O}from"./database-Bjtecw5f.js";import{A as P}from"./activity-B1F2IRm3.js";import{L as z}from"./layers-ZuBPQb1T.js";import{C as B}from"./circle-check-big-BSqJVrgh.js";import{F}from"./flask-conical-fbX9rPnC.js";import{T as R}from"./trending-up-eUiO956o.js";import{C as G}from"./clock-osbacZli.js";import"./index--2vFva6Y.js";import"./search-CwuIBBPE.js";import"./filter-Ceo--4mb.js";import"./clipboard-check-CQkJX5J0.js";import"./sparkles-CoQ80pK2.js";import"./send-FW7-3cjH.js";import"./scroll-area-DPaNxEJD.js";import"./settings-CIu9FFiX.js";import"./circle-check-C5kiwRoG.js";import"./en-US-Bfz1jvxT.js";import"./getTimezoneOffsetInMilliseconds-em2BGgN1.js";import"./rocket-C2MuHhsn.js";import"./scale-BCebIfgE.js";import"./layout-grid-CGqkIAJU.js";import"./zap-B01fFOkT.js";import"./star-BTvaCCU4.js";import"./briefcase-BxorFA78.js";import"./target-cfAj3L6j.js";import"./shield-check-ETs8j4-d.js";import"./shield-alert-iAruRy4W.js";import"./brain-C-Zi22rJ.js";import"./link-FmUqdGRG.js";import"./lock-czWF3qbC.js";import"./globe-BMGZmoaJ.js";import"./calendar-BlLJlGbj.js";import"./message-square-5hBo7zY3.js";import"./upload-BBmUECj8.js";import"./user-CqRnJLgW.js";function E({data:N,title:a="Criticality vs. Risk Heatmap",description:s}){const v=["Critical","High","Medium","Low"],i=["Tier 4 (Non-Critical)","Tier 3","Tier 2","Tier 1 (Mission Critical)"],m=r=>r>=20?0:r>=15?1:r>=8?2:3,w=r=>r.includes("Tier 1")?3:r.includes("Tier 2")?2:r.includes("Tier 3")?1:0,h=Array(4).fill(null).map(()=>Array(4).fill(0));N.forEach(r=>{const x=m(r.riskScore),t=w(r.criticality);h[x][t]++});const u=(r,x,t)=>{const y=3-r+x;return y>=5?"bg-red-500 dark:bg-red-600 text-white border-red-600":y>=4?"bg-orange-500 dark:bg-orange-600 text-white border-orange-600":y>=2?"bg-yellow-400 dark:bg-yellow-500 text-zinc-900 border-yellow-500":"bg-emerald-500 dark:bg-emerald-600 text-white border-emerald-600"};return e.jsxs(n,{children:[e.jsxs(c,{className:"pb-4",children:[e.jsx(d,{className:"text-lg font-medium",children:a}),s&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),e.jsx(o,{children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex flex-col justify-between pr-4 py-6 h-64 text-sm text-muted-foreground font-medium w-20 text-right",children:v.map(r=>e.jsx("div",{className:"flex-1 flex items-center justify-end",children:r},r))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"grid grid-cols-4 grid-rows-4 gap-1 h-64 border rounded-md overflow-hidden dark:border-slate-800",children:h.map((r,x)=>r.map((t,l)=>e.jsx("div",{className:I("flex items-center justify-center font-bold text-lg border transition-all hover:brightness-95 cursor-default relative group",u(x,l),t>0?"border-transparent":"border-slate-100 dark:border-slate-800"),title:`${v[x]} Risk + ${i[l]}: ${t} items`,children:t>0&&t},`${x}-${l}`)))}),e.jsx("div",{className:"grid grid-cols-4 pt-2 text-xs text-muted-foreground text-center",children:i.map(r=>e.jsx("div",{children:r.split(" ")[0]+" "+r.split(" ")[1]},r))}),e.jsx("div",{className:"text-center text-xs font-semibold mt-1 text-slate-500 uppercase tracking-wider",children:"Process Criticality"})]})]})})]})}function Ae(){var x;const N=$(),a=parseInt(N.id||"0"),{data:s,isLoading:v}=C.businessContinuity.getDashboardMetrics.useQuery({clientId:a}),{data:i}=C.businessContinuity.processes.list.useQuery({clientId:a}),{data:m}=C.businessContinuity.exercises.listAll.useQuery({clientId:a}),w=b.useMemo(()=>i?i.map(t=>({id:t.id,label:t.name,criticality:t.criticalityTier||"Tier 4",riskScore:t.id*7%25})):[],[i]),h=b.useMemo(()=>{if(!i)return{withRto:0,total:0,coverage:0};const t=i.filter(p=>p.rto).length,l=i.length;return{withRto:t,total:l,coverage:l>0?Math.round(t/l*100):0}},[i]),u=b.useMemo(()=>{if(!i)return{withRpo:0,total:0,coverage:0};const t=i.filter(p=>p.rpo).length,l=i.length;return{withRpo:t,total:l,coverage:l>0?Math.round(t/l*100):0}},[i]),r=b.useMemo(()=>{if(!i)return{withMtpd:0,total:0,coverage:0};const t=i.filter(p=>p.mtpd).length,l=i.length;return{withMtpd:t,total:l,coverage:l>0?Math.round(t/l*100):0}},[i]);return e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Business Continuity"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your organization's resilience, recovery strategies, and continuity plans."})]})}),e.jsx(n,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-100 mb-6",children:e.jsxs(o,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl hidden sm:block",children:e.jsx(j,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900 text-lg",children:"Business Continuity Program Guide"}),e.jsx("p",{className:"text-blue-700/80 max-w-2xl",children:"Understand the ISO 22301 lifecycle, from BIA to recovery planning and exercising."})]})]}),e.jsx(g,{href:`/clients/${a}/business-continuity/overview`,children:e.jsxs(f,{className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold whitespace-nowrap",children:["View Program Guide ",e.jsx(S,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsxs(n,{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-primary/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-6 h-6 text-blue-400"}),"Getting Started with Business Continuity"]}),e.jsx(A,{className:"text-slate-300",children:"Follow this 5-step workflow to build a comprehensive and compliant recovery plan."})]}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 relative",children:[e.jsx("div",{className:"hidden md:block absolute top-6 left-10 right-10 h-0.5 bg-slate-700 -z-10"}),[{step:"Step 0",title:"Governance & Scope",desc:"Charter, Team, and Policy.",link:`/clients/${a}/business-continuity/governance`,icon:j,color:"text-emerald-400",bg:"bg-emerald-900/50",isComplete:!0},{step:"1. Start",title:"Define Processes",desc:"Register critical business functions.",link:`/clients/${a}/business-continuity/processes`,icon:O,color:"text-blue-400",bg:"bg-blue-900/50",isComplete:((i==null?void 0:i.length)||0)>0},{step:"2. Assess",title:"Create BIA",desc:"Analyze impact and set RTO/RPOs.",link:`/clients/${a}/business-continuity/bia`,icon:P,color:"text-amber-400",bg:"bg-amber-900/50",isComplete:((s==null?void 0:s.totalBIAs)||0)>0},{step:"3. Plan",title:"Strategies & Scenarios",desc:"Define mitigation and recovery strategies.",link:`/clients/${a}/business-continuity/scenarios`,icon:k,color:"text-purple-400",bg:"bg-purple-900/50",isComplete:((s==null?void 0:s.totalStrategies)||0)>0},{step:"4. Build",title:"Build Plan",desc:"Compile BIAs and strategies into a plan.",link:`/clients/${a}/business-continuity/plans/new`,icon:z,color:"text-pink-400",bg:"bg-pink-900/50",isComplete:((s==null?void 0:s.totalPlans)||0)>0},{step:"5. Finish",title:"Generate & Save",desc:"Finalize, review, and approve the BCP.",link:`/clients/${a}/business-continuity/plans`,icon:B,color:"text-green-400",bg:"bg-green-900/50",isComplete:((s==null?void 0:s.approvedPlans)||0)>0}].map((t,l)=>e.jsx(g,{href:t.link,children:e.jsxs("div",{className:`group relative flex flex-col items-center text-center p-4 rounded-xl transition-all cursor-pointer h-full border ${t.isComplete?"bg-white/5 border-emerald-500/30":"hover:bg-white/10 border-transparent hover:border-white/10"}`,children:[e.jsxs("div",{className:`w-12 h-12 rounded-full ${t.bg} flex items-center justify-center mb-3 shadow-lg group-hover:scale-110 transition-transform relative`,children:[e.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.isComplete&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-emerald-500 text-white rounded-full p-0.5 border-2 border-slate-900",children:e.jsx(B,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1",children:t.step}),e.jsx("div",{className:"font-semibold mb-1 text-white",children:t.title}),e.jsx("div",{className:"text-xs text-slate-400 leading-snug",children:t.desc})]})},l))]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(n,{className:"card-enhanced border-l-4 border-l-blue-600 bg-blue-50/50",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-blue-900",children:"Program Readiness"}),e.jsx(T,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700",children:[(s==null?void 0:s.readinessScore)||0,"%"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Based on Approved Plans Coverage"})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-emerald-600 bg-emerald-50/50 cursor-pointer hover:bg-emerald-100/50 transition-colors",onClick:()=>window.location.href=`/clients/${a}/business-continuity/training`,children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-emerald-900",children:"Staff Training"}),e.jsx(j,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-700",children:"Track"}),e.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"Records & Certifications"})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-purple-600 bg-purple-50/50 cursor-pointer hover:bg-purple-100/50 transition-colors",onClick:()=>window.location.href=`/clients/${a}/business-continuity/exercises`,children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-purple-900",children:"Plan Exercises"}),e.jsx(F,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:(s==null?void 0:s.totalExercises)||0}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[(s==null?void 0:s.completedExercises)||0," Completed",((x=m==null?void 0:m[0])==null?void 0:x.startDate)&&e.jsxs("span",{className:"ml-2",children:["â€¢ Last: ",new Date(m[0].startDate).toLocaleDateString()]})]})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-orange-500 bg-orange-50/50",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-orange-900",children:"RTO Coverage"}),e.jsx(R,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-700",children:[h.coverage,"%"]}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[h.withRto," / ",h.total," Processes with RTO"]})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-pink-500 bg-pink-50/50",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-pink-900",children:"RPO Coverage"}),e.jsx(G,{className:"h-4 w-4 text-pink-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-3xl font-bold text-pink-700",children:[u.coverage,"%"]}),e.jsxs("p",{className:"text-xs text-pink-600 mt-1",children:[u.withRpo," / ",u.total," Processes with RPO"]})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-red-500 bg-red-50/50",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-red-900",children:"MTPD Coverage"}),e.jsx(k,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-3xl font-bold text-red-700",children:[r.coverage,"%"]}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[r.withMtpd," / ",r.total," Processes with MTPD"]})]})]}),e.jsxs(n,{className:"card-enhanced",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"BIA Governance"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(s==null?void 0:s.completedBIAs)||0," / ",(s==null?void 0:s.totalBIAs)||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed vs Total BIAs"})]})]}),e.jsxs(n,{className:"card-enhanced",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Plan Validation"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.approvedPlans)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Approved Plans (",(s==null?void 0:s.testedPlans)||0," Tested)"]})]})]}),e.jsxs(n,{className:"card-enhanced border-l-4 border-l-indigo-600 bg-indigo-50/50 cursor-pointer hover:bg-indigo-100/50 transition-colors group",onClick:()=>window.location.href=`/clients/${a}/business-continuity/iso22301`,children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"text-sm font-medium text-indigo-900",children:"ISO 22301 Standards"}),e.jsx(M,{variant:"secondary",className:"text-[10px] px-1.5 h-5 bg-indigo-200 text-indigo-800 hover:bg-indigo-300 pointer-events-none",children:"GUIDE"})]}),e.jsx(j,{className:"h-4 w-4 text-indigo-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-3xl font-bold text-indigo-700",children:"100%"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-indigo-600 mt-1",children:[e.jsx("span",{children:"View alignment explainer"}),e.jsx(S,{className:"w-3 h-3 group-hover:translate-x-1 transition-transform"})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(E,{data:w,description:"Visual distribution of process criticality vs. risk exposure."})}),e.jsxs(n,{className:"col-span-1",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Quick Actions"}),e.jsx(A,{children:"Common tasks to get started"})]}),e.jsxs(o,{className:"grid gap-4",children:[e.jsx(g,{href:`/clients/${a}/business-continuity/wizard`,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start h-auto py-4 px-4 hover:bg-green-50 hover:border-green-200",children:[e.jsx(R,{className:"mr-4 h-6 w-6 text-green-500"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-semibold",children:"Start New Cycle"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Initialize a guided BCP project flow"})]})]})}),e.jsx(g,{href:`/clients/${a}/business-continuity/bia`,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start h-auto py-4 px-4 hover:bg-blue-50 hover:border-blue-200",children:[e.jsx(P,{className:"mr-4 h-6 w-6 text-blue-500"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-semibold",children:"Conduct BIA"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Identify critical activities and impact"})]})]})}),e.jsx(g,{href:`/clients/${a}/business-continuity/scenarios`,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start h-auto py-4 px-4 hover:bg-orange-50 hover:border-orange-200",children:[e.jsx(k,{className:"mr-4 h-6 w-6 text-orange-500"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-semibold",children:"Define Scenarios"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Plan for potential disruptions"})]})]})})]})]})]})]})})}export{Ae as default};
